<!--Hautv edit-->
<div class="container-fluid" (click)="closeContextMenu()">
    <div class="margin-tp-5 margin-0">
        <div class="">
            <div class="itemw">
                <div class="menu-tool-bar he" style="line-height: 16px;">
                    <div class="gr-tool-bar2">
                        <button class="aprev button-navigation" (click)="previousEdit()"
                                [disabled]="rowNum===count || statusVoucher === 0 || count == 1"
                        ><i class="mdi mdi-arrow-left"></i></button>
                        <button class="anext disable button-navigation" (click)="nextEdit()"
                                [disabled]="rowNum===1 || statusVoucher === 0 || count == 1"><i
                            class="mdi mdi-arrow-right"></i></button>
                        <button class="button-navigation" *ebHasSomeAuthority="['ROLE_ADMIN', ROLE_Them]" [disabled]="statusVoucher === 0" (click)="addNew()"
                           title="{{'ebwebApp.outWard.tooltipAdd' | translate}}"><i
                            class="mdi mdi-plus"></i> <span jhiTranslate="ebwebApp.mCReceipt.home.add"></span></button>
                        <button class="button-navigation" *ebHasSomeAuthority="['ROLE_ADMIN', ROLE_Sua]"
                           title="{{'ebwebApp.outWard.tooltipEdit' | translate}}"
                                [disabled]="(statusVoucher === 1 && mCPayment.recorded === true) || statusVoucher === 0 || checkCloseBook(account, mCPayment.postedDate)"
                            (click)="edit()"
                        ><i class="mdi mdi-rename-box"></i> <span
                            jhiTranslate="ebwebApp.mCReceipt.home.edit"></span></button>
                        <button class="button-navigation" *ebHasSomeAuthority="['ROLE_ADMIN', ROLE_Them, ROLE_Sua]" [disabled]="statusVoucher === 1" (click)="save()"
                           title="{{'ebwebApp.outWard.tooltipSave' | translate}}"><i
                            class="mdi mdi-briefcase-download"></i> <span
                            jhiTranslate="ebwebApp.mCReceipt.home.save"></span></button>
                        <button class="button-navigation" *ebHasSomeAuthority="['ROLE_ADMIN', ROLE_Them]" [disabled]="statusVoucher === 1" (click)="saveAndNew()"
                           title="{{'ebwebApp.outWard.tooltipSaveAndAdd' | translate}}"><i class="mdi mdi-plus"></i>
                            <span
                                jhiTranslate="ebwebApp.mCReceipt.home.saveAndAddNew"></span></button>
                        <button class="button-navigation" *ebHasSomeAuthority="['ROLE_ADMIN', ROLE_GhiSo]" [hidden]="mCPayment.recorded" [disabled]="statusVoucher === 0 || checkCloseBook(account, mCPayment.postedDate)" (click)="record()"
                           title="{{'ebwebApp.outWard.tooltipRecord' | translate}}"><i
                            class="mdi mdi-pencil"></i> <span
                            jhiTranslate="ebwebApp.mCReceipt.home.record"></span></button>
                        <button class="button-navigation" *ebHasSomeAuthority="['ROLE_ADMIN', ROLE_GhiSo]" [hidden]="!mCPayment.recorded" (click)="unrecord()" [disabled]="checkCloseBook(account, mCPayment.postedDate)"
                           title="{{'ebwebApp.outWard.tooltipUnRecord' | translate}}"><i class="mdi mdi-pencil-off"></i>
                            <span jhiTranslate="ebwebApp.mCReceipt.home.unrecord"></span></button>
                        <button class="button-navigation" *ebHasSomeAuthority="['ROLE_ADMIN', ROLE_Them]" [disabled]="statusVoucher === 0" (click)="copyAndNew()"
                           title="{{'ebwebApp.outWard.tooltipCopy&Add' | translate}}"><i class="mdi mdi-plus"></i>
                            <span jhiTranslate="ebwebApp.mCReceipt.home.CopyAndAddNew"></span></button>
                        <button class="button-navigation" *ebHasSomeAuthority="['ROLE_ADMIN', ROLE_Xoa]" [disabled]="(statusVoucher === 1 && mCPayment.recorded === true) || statusVoucher === 0 || checkCloseBook(account, mCPayment.postedDate)"
                           title="{{'ebwebApp.outWard.tooltipDrop' | translate}}"
                           (click)="delete()"
                           replaceUrl="true"
                           queryParamsHandling="merge"><i class="mdi mdi-delete-forever"></i> <span
                            jhiTranslate="ebwebApp.mCReceipt.home.delete"></span></button>
                        <button *ebHasSomeAuthority="['ROLE_ADMIN', ROLE.PhieuChi_In]" [disabled]="statusVoucher === 0" class="dropdown-toggle button-navigation" data-toggle="dropdown"
                           role="button"><i class="mdi mdi-printer"></i> In</button>
                        <div class="dropdown-menu">
                            <div class="dropdown-item" *ngIf="mCPayment.id&&statusVoucher === 1">
                                <a (click)="exportPdf(false,REPORT.ChungTuKeToan)">
                                    <span jhiTranslate="ebwebApp.mBDeposit.financialPaper"></span>
                                </a>
                            </div>
                            <div [hidden]="!isForeignCurrency()" class="dropdown-item" *ngIf="mCPayment.id&&statusVoucher === 1">
                                <a (click)="exportPdf(false,REPORT.ChungTuKeToanQuyDoi)">
                                    <span jhiTranslate="ebwebApp.mBDeposit.financialPaperQD"></span>
                                </a>
                            </div>
                            <div class="dropdown-item" *ngIf="mCPayment.id&&statusVoucher === 1">
                                <a (click)="exportPdf(false,REPORT.BieuMau)">
                                    <span jhiTranslate="ebwebApp.mCPayment.print.mCPayment"></span>
                                </a>
                            </div>
                            <div class="dropdown-item" *ngIf="mCPayment.id&&statusVoucher === 1">
                                <a (click)="exportPdf(false,REPORT.PhieuChiTT2Lien)">
                                    <span jhiTranslate="ebwebApp.mCPayment.print.mCPayment2"></span>
                                </a>
                            </div>
                            <div class="dropdown-item" *ngIf="mCPayment.id&&statusVoucher === 1">
                                <a (click)="exportPdf(false,REPORT.PhieuChiA5)">
                                    <span jhiTranslate="ebwebApp.mCPayment.print.mCPaymentA5"></span>
                                </a>
                            </div>
                        </div>
                        <button class="button-navigation" (click)="closeForm()" title="{{'ebwebApp.outWard.tooltipBack' | translate}}"><i class="mdi mdi-window-close"></i> <span
                            jhiTranslate="ebwebApp.mCReceipt.home.close"></span></button>
                    </div>
                </div>

                <div class="tool-navbar">
                    <div class="row no-gutters">
                        <div class="col-sm-4 line-btn" style="margin-bottom: 4px; padding-left: 0 !important;">
                            <div class="lbtn-action">
                                <ul class="nav nav-tabs">
                                    <li class="active"><a class="active myreadonlytrue" data-toggle="tab" href="#home0">PHIẾU CHI</a></li>
                                </ul>
                            </div>
                        </div>
                        <label class="col-sm-6 col-form-label justify-content-end" for="field_accountingObject0" style="font-size: 14px;
                                            font-weight: 600;text-align: right;"
                               jhiTranslate="ebwebApp.mCReceipt.accountingObject">Đối tượng</label>
                        <div class="col-sm-2 justify-content-end last-div-2-0">
                            <select style="height: 35px;float: right" name="accountingObject0"
                                    id="field_accountingObject0"
                                    class="form-control form-control-sm"
                                    [(ngModel)]="mCPayment.accountingObjectType"
                                    (ngModelChange)="selectAccountingObjectType()">
                                <option [ngValue]="ccountingObjectType.value"
                                        *ngFor="let ccountingObjectType of lstAccountingObjectTypes">{{ccountingObjectType.name}}</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="row no-gutters">
                    <div class="col-lg-9 pd-r-0 form-main-new">
                        <form>
                            <h3 jhiTranslate="ebwebApp.common.generalInformation">Thông tin chung</h3>
                            <div class="row">
                                <div class="col-lg-12">
                                    <div class="form-group row no-gutters">
                                        <label class="col-sm-2 col-form-label"
                                               jhiTranslate="ebwebApp.mCPayment.accountingObjectID"
                                               for="field_accountingObjectID">Accounting Object</label>
                                        <div class="col-sm-3 pd-l-0">
                                            <combo-box style="" id="field_accountingObjectID"
                                                       name="comboboxaccountingObjectID"
                                                       [noEdit] = "mCPayment?.typeID === TYPE_MC_PAYMENT_NCC"
                                                       [isOutTable]="true"
                                                       [isRequired]="false"
                                                       [showIconPlus]="true"
                                                       [nameCategory]="nameCategory"
                                                       [dataList]="accountingObjects"
                                                       [listColumns]="utilsService.listColumnsAccountingObjects"
                                                       displayMember="accountingObjectCode"
                                                       valueName="id"
                                                       [headerColumns]="utilsService.listHeaderColumnsAccountingObject"
                                                       [isObject]="false"
                                                       [(ngModel)]="mCPayment.accountingObjectID"
                                                       (ngModelChange)="selectAccountingObject()"
                                                       (click)="saveParent()"
                                            ></combo-box>
                                        </div>
                                        <div class="col-sm-7 pd-l-0 last-div-1-1">
                                            <input type="text" class="form-control form-control-sm"
                                                   name="accountingObjectName"
                                                   [(ngModel)]="mCPayment.accountingObjectName" maxlength="512"/>
                                        </div>
                                    </div>
                                    <div class="form-group row no-gutters">
                                        <label class="col-sm-2 col-form-label"
                                               jhiTranslate="ebwebApp.mCReceipt.accountingObjectAddress"
                                               for="field_accountingObjectAddress4">Accounting Object Address</label>
                                        <div class="col-sm-10 pd-l-0 last-div-1-0">
                                            <input type="text" class="form-control form-control-sm"
                                                   name="accountingObjectAddress4"
                                                   id="field_accountingObjectAddress4"
                                                   [(ngModel)]="mCPayment.accountingObjectAddress"
                                                   maxlength="512">
                                        </div>
                                    </div>
                                    <div class="form-group row no-gutters">
                                        <label class="col-sm-2 col-form-label"
                                               jhiTranslate="ebwebApp.mCReceipt.taxCode">Mã số thuế</label>
                                        <div class="col-sm-3 pd-l-0">
                                            <input type="text" class="form-control form-control-sm" name="taxCode4"
                                                   [(ngModel)]="mCPayment.taxCode">
                                        </div>
                                        <label class="col-sm-2 col-form-label"
                                               jhiTranslate="ebwebApp.mCPayment.receiver"
                                               for="field_receiver">Payers</label>
                                        <div class="col-sm-5 pd-l-0 last-div-2-1">
                                            <input type="text" class="form-control form-control-sm" name="receivers4"
                                                   id="field_receiver"
                                                   [(ngModel)]="mCPayment.receiver" maxlength="512"/>
                                        </div>
                                    </div>
                                    <div class="form-group row no-gutters">
                                        <label class="col-sm-2 col-form-label"
                                               jhiTranslate="ebwebApp.mCReceipt.reason"
                                               for="field_reason">Diễn giải</label>
                                        <div class="col-sm-3 pd-l-0 pd-r-10">
                                            <combo-box style="" id="reason_cb"
                                                       name="comboboxreason"
                                                       [isOutTable]="true"
                                                       [dataList]="autoPrinciples"
                                                       [listColumns]="utilsService.listColumnsAutoPrinciple"
                                                       displayMember="autoPrincipleName"
                                                       valueName="autoPrincipleName"
                                                       [headerColumns]="utilsService.listHeaderColumnsAutoPrinciple"
                                                       [isObject]="true"
                                                       [(ngModel)]="autoPrinciple"
                                                       (ngModelChange)="selectAutoPrinciple()"
                                            ></combo-box>
                                        </div>
                                        <div class="col-sm-7 pd-l-0 last-div-1-1">
                                            <input type="text" class="form-control form-control-sm" name="reason"
                                                   id="field_reason"
                                                   [(ngModel)]="mCPayment.reason"
                                                   maxlength="512"/>
                                        </div>
                                    </div>
                                    <div class="form-group row no-gutters">
                                        <label class="col-sm-2 col-form-label"
                                               jhiTranslate="ebwebApp.sAInvoice.employeeID" for="field_employeeID">Nhân
                                            viên thực hiện</label>
                                        <div class="col-sm-3 pd-l-0">
                                            <combo-box style="" id="field_employeeID"
                                                       name="comboboxEmployees"
                                                       [isOutTable]="true"
                                                       [dataList]="employees"
                                                       [nameCategory]="utilsService.NHAN_VIEN"
                                                       [showIconPlus]="true"
                                                       [listColumns]="utilsService.listColumnsEmployees"
                                                       displayMember="accountingObjectCode"
                                                       valueName="id"
                                                       [headerColumns]="utilsService.listHeaderColumnsEmployees"
                                                       [isObject]="false"
                                                       [(ngModel)]="mCPayment.employeeID"
                                                       (click)="saveParent()"
                                            ></combo-box>
                                        </div>
                                        <label class="col-sm-2 col-form-label"
                                               jhiTranslate="ebwebApp.mCReceipt.numberAttach" for="number_attach4">Kèm
                                            theo</label>
                                        <div class="col-sm-5 pd-l-0 last-div-2-1">
                                            <input type="text" class="form-control form-control-sm"
                                                   id="number_attach4"
                                                   [(ngModel)]="mCPayment.numberAttach"
                                                   name="numberAttach"
                                            />
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="col-lg-4 pd-only-l-10 form-main-new">
                        <form style="padding-bottom: 8px">
                            <h3 jhiTranslate="ebwebApp.common.license">Chứng từ</h3>
                            <div class="row">
                                <div class="col-lg-12">
                                    <div class="form-group row no-gutters">
                                        <label class="col-sm-4 col-form-label" jhiTranslate="ebwebApp.sAInvoice.noFBook">Số chứng từ</label>
                                        <div class="col-sm-8 pd-l-0 last-div-1-0">
                                            <input type="text" [(ngModel)]="no" required
                                                   (ngModelChange)="changeNoVoucher()"
                                                   class="form-control form-control-sm" name="No">
                                        </div>
                                    </div>
                                    <div class="form-group row no-gutters">
                                        <label class="col-sm-4 col-form-label"
                                               jhiTranslate="ebwebApp.mBDeposit.date"></label>
                                        <div class="col-sm-8 last-div-1-0">
                                            <eb-date-picker name="field_date" id="field_date" [(ngModel)]="mCPayment.date" (ngModelChange)="changeDate()"></eb-date-picker>
                                        </div>
                                    </div>
                                    <div class="form-group row no-gutters">
                                        <label class="col-sm-4 col-form-label"
                                               jhiTranslate="ebwebApp.mBDeposit.postedDate"></label>
                                        <div class="col-sm-8 last-div-1-0">
                                            <eb-date-picker name="field_postedDate" id="field_postedDate" [(ngModel)]="mCPayment.postedDate"></eb-date-picker>
                                        </div>
                                    </div>
                                    <div class="form-group row no-gutters">
                                        <label class="col-sm-4 col-form-label"
                                               jhiTranslate="ebwebApp.sAInvoice.currencyID">Loại
                                            tiền</label>
                                        <div class="col-sm-3 pd-l-0 form-group">
                                            <combo-box id="currency2"
                                                       name="currency2"
                                                       [dataList]="currencys"
                                                       [noEdit]="mCPayment.typeID === TYPE_MC_PAYMENT_NCC"
                                                       [listColumns]="utilsService.listColumnsCurrency"
                                                       [isOutTable]="true"
                                                       displayMember="currencyCode"
                                                       valueName="currencyCode"
                                                       [headerColumns]="utilsService.listHeaderColumnsCurrency"
                                                       [isObject]="false"
                                                       [(ngModel)]="mCPayment.currencyID"
                                                       [isRequired]="true"
                                                       (ngModelChange)="selectCurrency()">
                                            </combo-box>
                                        </div>
                                        <label class="col-sm-4 col-form-label"
                                               jhiTranslate="ebwebApp.sAInvoice.exchangeRate"
                                               style="width: 53px; max-width: 53px !important; min-width: 43px !important;">Tỷ giá</label>
                                        <div class="col-sm-3 pd-l-0 last-div-2-1" style="min-width: 43px !important;max-width: calc(75% - 153px) !important;">
                                            <input type="text" class="form-control form-control-sm text-right"
                                                   name="exchangeRate"
                                                   [class.noEdit]="mCPayment.typeID === TYPE_MC_PAYMENT_NCC"
                                                   [class.noEdit]="mCPayment.currencyID === currencyCode"
                                                   ebCurrencyMask
                                                   [systemOptions]="account?.systemOption"
                                                   [type] = "4"
                                                   class="form-control form-control-sm"
                                                   [(ngModel)]="mCPayment.exchangeRate"
                                                   (ngModelChange)="changeExchangeRate()">
                                        </div>
                                    </div>
                                    <div class="form-group row no-gutters" [hidden]="!showVaoSo">
                                        <label class="col-sm-4 col-form-label"
                                               jhiTranslate="ebwebApp.sAInvoice.typeLedger">Vào
                                            sổ</label>
                                        <div class="col-sm-8 pd-l-0 last-div-1-0">
                                            <select [class.noEdit]="mCPayment.typeID === TYPE_MC_PAYMENT_NCC" class="form-control" name="typeLedger" id="field_typeLedger"
                                                    [(ngModel)]="mCPayment.typeLedger">
                                                <option value="0" *ngIf="isSoTaiChinh" jhiTranslate="ebwebApp.mBDeposit.financialBook">Sổ
                                                    tài chính
                                                </option>
                                                <option value="1"  *ngIf="!isSoTaiChinh" jhiTranslate="ebwebApp.mBDeposit.managementBook">
                                                    Sổ quản trị
                                                </option>
                                                <option value="2" jhiTranslate="ebwebApp.mBDeposit.bothBooks">Cả 2
                                                    sổ
                                                </option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
                <ngb-tabset *ngIf="mCPayment.typeID !== TYPE_MC_PAYMENT_NCC" class="tool-navbar" (tabChange)="beforeChange($event)">
                    <ngb-tab>
                        <ng-template ngbTabTitle><span jhiTranslate="ebwebApp.mCPayment.home.detail">Chi tiết</span>
                        </ng-template>
                        <ng-template ngbTabContent>
                            <div class="tab-content">
                                <div class="frm-main frm-padding tab-pane fade in active show" id="home-detail"
                                     style="background: #cbdcf0">
                                    <div id="table-scroll-detail" class="table-scroll">
                                        <table id="main-table-detail" class="main-table">
                                            <thead>
                                            <tr>
                                                <th scope="col" jhiTranslate="ebwebApp.mCPaymentDetails.description">Diễn giải</th>
                                                <th scope="col" jhiTranslate="ebwebApp.mCPaymentDetails.debitAccount">TK Nợ</th>
                                                <th scope="col" jhiTranslate="ebwebApp.mCPaymentDetails.creditAccount">TK Có</th>
                                                <th scope="col" jhiTranslate="ebwebApp.mCPaymentDetails.amountOriginal">Số tiền</th>
                                                <th scope="col" *ngIf="mCPayment.currencyID!==currencyCode" jhiTranslate="ebwebApp.mCPaymentDetails.amount">Thành tiền QĐ</th>
                                                <th scope="col" jhiTranslate="ebwebApp.mCPaymentDetails.accountingObject">Đối tượng</th>
                                                <th scope="col" jhiTranslate="ebwebApp.mCPaymentDetails.bankAccountDetails">Tài khoản ngân hàng</th>
                                                <th scope="col" jhiTranslate="ebwebApp.mCPaymentDetails.expenseItem">Khoản mục CP</th>
                                                <th scope="col" jhiTranslate="ebwebApp.mCPaymentDetails.budgetItem">Mục thu chi</th>
                                                <th scope="col" jhiTranslate="ebwebApp.mCPaymentDetails.departmentID">Phòng ban</th>
                                                <th scope="col" jhiTranslate="ebwebApp.mCPaymentDetails.costSet">Đối tượng THCP</th>
<!--                                                <th scope="col" jhiTranslate="ebwebApp.mCPaymentDetails.eMContractID">Hợp đồng</th>-->
                                                <th scope="col" jhiTranslate="ebwebApp.mCPaymentDetails.statisticsCode">Mã thống kê</th>
                                                <th scope="col" [hidden]="true" *ngIf="mCPayment.currencyID!==currencyCode" jhiTranslate="ebwebApp.mCPaymentDetails.cashOutExchangeRateFB">Tỷ giá xuất quỹ</th>
                                                <th scope="col" [hidden]="true" *ngIf="mCPayment.currencyID!==currencyCode" jhiTranslate="ebwebApp.mCPaymentDetails.cashOutAmountFB">QĐ theo tỷ giá xuất quỹ</th>
                                                <th scope="col" [hidden]="true" *ngIf="mCPayment.currencyID!==currencyCode" jhiTranslate="ebwebApp.mCPaymentDetails.cashOutDifferAmountFB">Chênh lệch</th>
                                                <th scope="col" [hidden]="true" *ngIf="mCPayment.currencyID!==currencyCode" jhiTranslate="ebwebApp.mCPaymentDetails.cashOutDifferAccountFB">TK xử lý chênh lệch</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr oncontextmenu="return false;"
                                                (contextmenu)="onRightClick($event, mCPaymentDetails, detail, true, true, 0)"
                                                *ngFor="let detail of mCPaymentDetails; let i = index"
                                                (keydown.control.delete)="KeyPress(detail, 'ctr + delete',0)"
                                                (keydown.control.c)="KeyPress(detail,'ctr + c', 0)"
                                                (keydown.control.insert)="KeyPress(detail,'ctr + insert', 0)"
                                                (click)="saveRow(i)"
                                            >
                                                <td class="cell-Table description" [title]="detail.description">
                                                    <input type="text" class="input-Cell"
                                                           name="{{'description_DT'+i}}"
                                                           id="{{'description_DT'+i}}"
                                                           [(ngModel)]="detail.description"
                                                           (focus)="actionFocus(0, i)" ></td>
                                                <td class="cell-Table jsgrid-align-center">
                                                    <combo-box idIp="debitAccountList{{i}}"
                                                               nameIp="debitAccountList{{i}}"
                                                               [isRequired]="true"
                                                               [dataList]="debitAccountList"
                                                               [listColumns]="utilsService.listColumnsAccountList"
                                                               displayMember="accountNumber"
                                                               valueName="accountNumber"
                                                               [headerColumns]="utilsService.listHeaderColumnsAccountList"
                                                               [isObject]="false"
                                                               [(ngModel)]="detail.debitAccount"
                                                               (ngModelChange)="calcular(detail, 110,'debitAccount', mCPayment, mCPaymentDetails, mCPaymentDetailTaxs)"
                                                               (focusInput)="actionFocus(1, i)"
                                                               [isOutTable]="false"
                                                    >
                                                    </combo-box>
                                                </td>
                                                <td class="cell-Table jsgrid-align-center">
                                                    <combo-box idIp="creditAccount{{i}}"
                                                               nameIp="creditAccount{{i}}"
                                                               [isRequired]="true"
                                                               [dataList]="creditAccountList"
                                                               [listColumns]="utilsService.listColumnsAccountList"
                                                               displayMember="accountNumber"
                                                               valueName="accountNumber"
                                                               [headerColumns]="utilsService.listHeaderColumnsAccountList"
                                                               [isObject]="false"
                                                               [(ngModel)]="detail.creditAccount"
                                                               (ngModelChange)="calcular(detail, 110,'creditAccount', mCPayment, mCPaymentDetails, mCPaymentDetailTaxs)"
                                                               (focusInput)="actionFocus(2, i)"
                                                               [isOutTable]="false"
                                                    >
                                                    </combo-box>
                                                </td>
                                                <td class="cell-Table">
                                                    <input type="number"
                                                           style="text-align: right"
                                                           class="input-Cell input-curency"
                                                           id="{{'amountOriginal_DT'+i}}"
                                                           name="{{'amountOriginal_DT'+i}}"
                                                           ebCurrencyMask
                                                           [systemOptions]="account?.systemOption"
                                                           [type] = "getAmountOriginalType()"
                                                           [(ngModel)]="detail.amountOriginal"
                                                           (ngModelChange)="calcular(detail,110,'amountOriginal', mCPayment, mCPaymentDetails, mCPaymentDetailTaxs)"
                                                           (focus)="actionFocus(3, i)"
                                                    >
                                                </td>
                                                <td *ngIf="mCPayment.currencyID !==currencyCode" class="cell-Table"><input
                                                    style="text-align: right"
                                                    type="number" class="input-Cell input-curency"
                                                    name="{{'amount_DT'+i}}"
                                                    id="{{'amount_DT'+i}}"
                                                    ebCurrencyMask
                                                    [systemOptions]="account?.systemOption"
                                                    [type] = "7"
                                                    [(ngModel)]="detail.amount"
                                                    (ngModelChange)="calcular(detail,110,'amount', mCPayment, mCPaymentDetails, mCPaymentDetailTaxs)"
                                                    (focus)="actionFocus(4, i)"
                                                >
                                                </td>
                                                <td class="cell-Table">
                                                    <combo-box style=""
                                                               nameIp="{{'comboboxaccountingObject_DT'+i}}"
                                                               idIp="{{'comboboxaccountingObject_DT'+i}}"
                                                               [dataList]="accountingObjectData"
                                                               [showIconPlus]="true"
                                                               [nameCategory]="nameCategory"
                                                               [listColumns]="utilsService.listColumnsAccountingObjects"
                                                               displayMember="accountingObjectCode"
                                                               valueName="id"
                                                               [headerColumns]="utilsService.listHeaderColumnsAccountingObject"
                                                               [isObject]="true"
                                                               [(ngModel)]="detail.accountingObject"
                                                               (click)="saveDetails(i)"
                                                               (focusInput)="actionFocus(5, i)"
                                                               [isOutTable]="false"
                                                    ></combo-box>
                                                </td>
                                                <td class="cell-Table">
                                                    <combo-box idIp="comboboxBankAccountDetailID{{i}}"
                                                               nameIp="comboboxBankAccountDetailID{{i}}"
                                                               [showIconPlus]="true"
                                                               [nameCategory]="CategoryName.TAI_KHOAN_NGAN_HANG"
                                                               [dataList]="bankAccountDetails"
                                                               [isOutTable]="true"
                                                               [listColumns]="utilsService.listColumnsBank"
                                                               displayMember="bankAccount"
                                                               valueName="id"
                                                               [headerColumns]="utilsService.listHeaderColumnsBank"
                                                               [isObject]="true"
                                                               [(ngModel)]="detail.bankAccountDetails"
                                                               (click)="saveDetails(i)"
                                                               (focusInput)="actionFocus(6, i)"
                                                               [isOutTable]="false"
                                                    >
                                                    </combo-box>
                                                </td>
                                                <td class="cell-Table">
                                                    <combo-box
                                                               nameIp="{{'comboboxexpenseItem_DT'+i}}"
                                                               idIp="{{'comboboxexpenseItem_DT'+i}}"
                                                               [showIconPlus]="true"
                                                               [nameCategory]="CategoryName.KHOAN_MUC_CHI_PHI"
                                                               [dataList]="expenseItems"
                                                               [listColumns]="utilsService.listColumnsExpenseItem"
                                                               displayMember="expenseItemCode"
                                                               valueName="id"
                                                               [headerColumns]="utilsService.listHeaderColumnsExpenseItem"
                                                               [isObject]="true"
                                                               [(ngModel)]="detail.expenseItem"
                                                               (click)="saveDetails(i)"
                                                               (focusInput)="actionFocus(7, i)"
                                                               [isOutTable]="false"
                                                               [noGetValueParentNode]="true"
                                                    ></combo-box>
                                                </td>
                                                <td class="cell-Table">
                                                    <combo-box style="" idIp="budgetItem_DT{{i}}"
                                                               nameIp="budgetItem_DT{{i}}"
                                                               [showIconPlus]="true"
                                                               [nameCategory]="CategoryName.MUC_THU_CHI"
                                                               [dataList]="budgetItems"
                                                               [listColumns]="utilsService.listColumnsBudgetItem"
                                                               displayMember="budgetItemCode"
                                                               valueName="id"
                                                               [headerColumns]="utilsService.listHeaderColumnsBudgetItem"
                                                               [isObject]="true"
                                                               [(ngModel)]="detail.budgetItem"
                                                               (click)="saveDetails(i)"
                                                               (focusInput)="actionFocus(8, i)"
                                                               [isOutTable]="false"
                                                               [noGetValueParentNode]="true"
                                                               >
                                                    </combo-box>
                                                </td>
                                                <td class="cell-Table">
                                                    <combo-box
                                                               nameIp="{{'comboboxorganizationUnit_DT'+i}}"
                                                               idIp="{{'comboboxorganizationUnit_DT'+i}}"
                                                               [showIconPlus]="true"
                                                               [nameCategory]="CategoryName.PHONG_BAN"
                                                               [dataList]="organizationUnits"
                                                               [listColumns]="utilsService.listColumnsOrganizationUnit"
                                                               displayMember="organizationUnitCode"
                                                               valueName="id"
                                                               [headerColumns]="utilsService.listHeaderColumnsOrganizationUnit"
                                                               [isObject]="true"
                                                               [(ngModel)]="detail.organizationUnit"
                                                               (click)="saveDetails(i)"
                                                               (focusInput)="actionFocus(9, i)"
                                                               [isOutTable]="false"
                                                               [noGetValueParentNode]="true"
                                                    ></combo-box>
                                                </td>
                                                <td class="cell-Table">
                                                    <combo-box
                                                               nameIp="{{'comboboxcostSet_DT'+i}}"
                                                               idIp="{{'comboboxcostSet_DT'+i}}"
                                                               [showIconPlus]="true"
                                                               [nameCategory]="CategoryName.DOI_TUONG_TAP_HOP_CHI_PHI"
                                                               [dataList]="costSets"
                                                               [listColumns]="utilsService.listColumnsCostSet"
                                                               displayMember="costSetCode"
                                                               valueName="id"
                                                               [headerColumns]="utilsService.listHeaderColumnsCostSet"
                                                               [isObject]="true"
                                                               [(ngModel)]="detail.costSet"
                                                               (click)="saveDetails(i)"
                                                               (focusInput)="actionFocus(10, i)"
                                                               [isOutTable]="false"
                                                               [noGetValueParentNode]="true"
                                                    ></combo-box>
                                                </td>
                                                <!--<td class="cell-Table">
                                                    <combo-box
                                                        idIp="{{'comboboxcontractID_DT'+i}}"
                                                        nameIp="{{'comboboxcontractID_DT'+i}}"
                                                        [dataList]="eMContracts"
                                                        [listColumns]="isSoTaiChinh?utilsService.listColumnsEMContractFBook:utilsService.listColumnsEMContractMBook"
                                                        displayMember="{{isSoTaiChinh?'noFBook':'noMBook'}}"
                                                        valueName="id"
                                                        [headerColumns]="utilsService.listHeaderColumnsEMContract"
                                                        [isObject]="false"
                                                        [(ngModel)]="detail.contractID"
                                                        >
                                                    </combo-box>
                                                </td>-->
                                                <td class="cell-Table">
                                                    <combo-box
                                                               idIp="comboboxstatisticsCode_DT{{i}}"
                                                               nameIp="comboboxstatisticsCode_DT{{i}}"
                                                               [showIconPlus]="true"
                                                               [nameCategory]="CategoryName.MA_THONG_KE"
                                                               [dataList]="statisticCodes"
                                                               [listColumns]="['statisticsCode', 'statisticsCodeName']"
                                                               displayMember="statisticsCode"
                                                               valueName="id"
                                                               [headerColumns]="['Mã thống kê', 'Tên mã thống kê']"
                                                               [isObject]="true"
                                                               [(ngModel)]="detail.statisticsCode"
                                                               (click)="saveDetails(i)"
                                                               (focusInput)="actionFocus(11, i)"
                                                               [isOutTable]="false"
                                                               [noGetValueParentNode]="true"
                                                    ></combo-box>
                                                </td>
                                                <td class="cell-Table" [hidden]="true" *ngIf="mCPayment.currencyID!==currencyCode"><input
                                                    style="text-align: right"
                                                    type="number" class="input-Cell"
                                                    name="{{'description_DT'+i}}"
                                                    [(ngModel)]="detail.cashOutExchangeRateFB"></td>
                                                <td class="cell-Table" [hidden]="true" *ngIf="mCPayment.currencyID!==currencyCode"><input
                                                    style="text-align: right"
                                                    type="number" class="input-Cell"
                                                    name="{{'description_DT'+i}}"
                                                    [(ngModel)]="detail.cashOutAmountFB"></td>
                                                <td class="cell-Table" [hidden]="true" *ngIf="mCPayment.currencyID!==currencyCode"><input
                                                    style="text-align: right"
                                                    type="number" class="input-Cell"
                                                    name="{{'description_DT'+i}}"
                                                    [(ngModel)]="detail.cashOutDifferAmountFB"></td>
                                                <td class="cell-Table" [hidden]="true" *ngIf="mCPayment.currencyID!==currencyCode"><input
                                                    type="text" class="input-Cell"
                                                    name="{{'description_DT'+i}}"
                                                    [(ngModel)]="detail.cashOutDifferAccountFB"></td>
                                            </tr>
                                            <tr *ngIf="statusVoucher === 0" (click)="AddnewRow(0)">
                                                <td class="cell-Table description"><input type="text" class="input-Cell"
                                                                                          id="description_DT"
                                                                              [title]="translate.instant('ebwebApp.purchaseOrder.addNewLine')"
                                                                              value="{{'ebwebApp.purchaseOrder.addNewLine' | translate}}"
                                                                              readonly></td>
                                                <td class="cell-Table"><input type="text" id="debitAccountList" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" id="creditAccount" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" id="amountOriginal_DT" class="input-Cell" readonly></td>
                                                <td *ngIf="mCPayment.currencyID !==currencyCode" class="cell-Table"><input id="amount_DT" type="text" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" id="comboboxaccountingObject_DT" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" id="comboboxBankAccountDetailID" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" id="comboboxexpenseItem_DT" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" id="budgetItem_DT" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" id="comboboxorganizationUnit_DT" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" id="comboboxcostSet_DT" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" id="comboboxstatisticsCode_DT" class="input-Cell" readonly></td>
                                                <td [hidden]="true" *ngIf="mCPayment.currencyID !==currencyCode" class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                <td [hidden]="true" *ngIf="mCPayment.currencyID !==currencyCode" class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                <td [hidden]="true" *ngIf="mCPayment.currencyID !==currencyCode" class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                <td [hidden]="true" *ngIf="mCPayment.currencyID !==currencyCode" class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                            </tr>
                                            <tr *ngFor="let l of newArr(9 - mCPaymentDetails.length)">
                                                <td class="cell-Table description"><input type="text" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                <td *ngIf="mCPayment.currencyID !==currencyCode" style="text-align: right" class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                <td [hidden]="true" *ngIf="mCPayment.currencyID !==currencyCode" style="text-align: right" class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                <td [hidden]="true" *ngIf="mCPayment.currencyID !==currencyCode" style="text-align: right" class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                <td [hidden]="true" *ngIf="mCPayment.currencyID !==currencyCode" style="text-align: right" class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                <td [hidden]="true" *ngIf="mCPayment.currencyID !==currencyCode" style="text-align: right" class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                            </tr>
                                            </tbody>
                                            <tfoot [class.disable]="true">
                                            <tr>
                                                <td class="cell-Table color-tfoot jsgrid-align-left" colspan="3"><input type="text" readonly
                                                                                          class="input-Cell"
                                                                                          value="{{'ebwebApp.purchaseOrder.countLine'| translate}} : {{mCPaymentDetails?.length}}"></td>
                                                <td class="cell-Table color-tfoot jsgrid-align-right">
                                                    <input type="text" name="totalAmountOriginal_footer"
                                                           class="input-Cell"
                                                           readonly
                                                           ebCurrencyMask
                                                           [systemOptions]="account?.systemOption"
                                                           [type]="getAmountOriginalType()"
                                                           [ngModel]="sum('amountOriginal')"
                                                           ></td>
                                                <td *ngIf="mCPayment.currencyID !==currencyCode" class="cell-Table color-tfoot jsgrid-align-right">
                                                    <input type="text" name="totalAmount_footer" class="input-Cell"
                                                           readonly
                                                           ebCurrencyMask
                                                           [systemOptions]="account?.systemOption"
                                                           [type]="7"
                                                           [ngModel]="sum('amount')"
                                                    ></td>
                                                <td class="cell-Table color-tfoot" colspan="7"> </td>
                                                <td [hidden]="true" *ngIf="mCPayment.currencyID !==currencyCode" class="cell-Table color-tfoot" colspan="4"> </td>
                                            </tr>
                                            </tfoot>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </ng-template>
                    </ngb-tab>
                    <ngb-tab>
                        <ng-template ngbTabTitle><span jhiTranslate="ebwebApp.mCPayment.home.tax">Thuế</span>
                        </ng-template>
                        <ng-template ngbTabContent>
                            <div class="tab-content">
                                <div class="frm-main frm-padding tab-pane fade in active show" id="home-tax"
                                     style="background: #cbdcf0">
                                    <div id="table-scroll-tax" class="table-scroll">
                                        <table id="main-table-tax" class="main-table">
                                            <thead>
                                            <tr>
                                                <th scope="col" jhiTranslate="ebwebApp.mCPaymentDetailTax.description">Diễn giải</th>
                                                <th scope="col" jhiTranslate="ebwebApp.mCPaymentDetailTax.vATAccount">TK Thuế GTGT</th>
                                                <th scope="col" jhiTranslate="ebwebApp.mCPaymentDetailTax.vATRate">Thuế suất</th>
                                                <th scope="col" jhiTranslate="ebwebApp.mCPaymentDetailTax.vATAmount">Tiền thuế GTGT</th>
                                                <th [hidden]="true" jhiTranslate="ebwebApp.mCPaymentDetailTax.vATAmountOriginal">Tiền thuế GTGT NT</th>
                                                <!--                                                    <th>Tiền thuế GTGT NT</th>-->
                                                <th scope="col" jhiTranslate="ebwebApp.mCPaymentDetailTax.pretaxAmount">Giá tính thuế</th>
                                                <th [hidden]="true" jhiTranslate="ebwebApp.mCPaymentDetailTax.pretaxAmountOriginal">Giá tính thuế NT</th>
                                                <th scope="col" jhiTranslate="ebwebApp.mBCreditCard.accountingObjectCode">
                                                </th>
                                                <th scope="col" jhiTranslate="ebwebApp.mBCreditCard.accountingObjectName">
                                                </th>
                                                <th scope="col" jhiTranslate="ebwebApp.mBCreditCard.taxCode">
                                                </th>
                                                <th scope="col" jhiTranslate="ebwebApp.mCPaymentDetailTax.invoiceTemplate">Mẫu số HĐ</th>
                                                <th scope="col" jhiTranslate="ebwebApp.mCPaymentDetailTax.invoiceSeries">Ký hiệu HĐ</th>
                                                <th scope="col" jhiTranslate="ebwebApp.mCPaymentDetailTax.invoiceNo">Số HĐ</th>
                                                <th scope="col" jhiTranslate="ebwebApp.mCPaymentDetailTax.invoiceDate">Ngày HĐ</th>
                                                <th *ngIf="taxCalculationMethod !== 1" scope="col" jhiTranslate="ebwebApp.pPDiscountReturnDetails.goodsServicePurchaseID">GoodsServicePurchase</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr oncontextmenu="return false;"
                                                (contextmenu)="onRightClick($event, mCPaymentDetailTaxs, detail, true, true, 1)"
                                                *ngFor="let detail of mCPaymentDetailTaxs; let i = index"
                                                (keydown.control.delete)="KeyPress(detail,'ctr + delete',1)"
                                                (keydown.control.c)="KeyPress(detail,'ctr + c',1)"
                                                (keydown.control.insert)="KeyPress(detail,'ctr + insert', 1)"
                                            >
                                                <td class="cell-Table description"><input type="text" class="input-Cell"
                                                                                          [(ngModel)]="detail.description"
                                                                                          [title]="detail.description"
                                                                                          (focus)="actionFocus(0, i)"
                                                                                          name="{{'description_Tax'+i}}"
                                                                                          id="{{'description_Tax'+i}}">
                                                </td>
                                                <td class="cell-Table jsgrid-align-center">
                                                    <combo-box style=""
                                                               nameIp="{{'vATAccount_DTT'+i}}"
                                                               idIp="{{'vATAccount_DTT'+i}}"
                                                               [dataList]="vatAccountList"
                                                               [isRequired]="true"
                                                               [hideRequiredWhenValueTrue]="true"
                                                               [listColumns]="utilsService.listColumnsAccountList"
                                                               displayMember="accountNumber"
                                                               valueName="accountNumber"
                                                               [headerColumns]="utilsService.listHeaderColumnsAccountList"
                                                               [isObject]="false"
                                                               [(ngModel)]="detail.vATAccount"
                                                               (ngModelChange)="vATAccountChange()"
                                                               (focusInput)="actionFocus(1, i)"
                                                               [isOutTable]="false"
                                                    ></combo-box>
                                                </td>
                                                <td class="cell-Table">
                                                    <select class="form-control form-control-sm"
                                                            style="border: none; background: transparent"
                                                            name="{{'vATRate_DTax'+i}}"
                                                            id="{{'vATRate_DTax'+i}}"
                                                            [(ngModel)]="detail.vATRate"
                                                            (change)="calcular(detail,110,'vATRate',mCPayment,mCPaymentDetails,mCPaymentDetailTaxs)"
                                                            (focus)="actionFocus(2, i)"
                                                    >
                                                        <option [ngValue]="0">0%</option>
                                                        <option [ngValue]="1">5%</option>
                                                        <option [ngValue]="2">10%</option>
                                                        <option [ngValue]="3">Không chịu thuế</option>
                                                        <option [ngValue]="4">Không tính thuế</option>
                                                    </select>
                                                </td>
                                                <td [hidden]="true" class="cell-Table"> <!--Vatamount nguyên tệ-->
                                                    <input type="number" class="input-Cell input-curency"
                                                           name="{{'vATAmountOriginal_Tax'+i}}"
                                                           id="{{'vATAmountOriginal_Tax'+i}}"
                                                           style="text-align: right"
                                                           [(ngModel)]="detail.vATAmountOriginal"
                                                           (focus)="actionFocus(3, i)">
                                                </td>
                                                <td class="cell-Table"> <!-- VATamount quy đổi-->
                                                    <input type="number" class="input-Cell input-curency"
                                                           name="{{'vATAmount_Tax'+i}}"
                                                           id="{{'vATAmount_Tax'+i}}"
                                                           style="text-align: right"
                                                           ebCurrencyMask
                                                           [systemOptions]="account?.systemOption"
                                                           [type] = "7"
                                                           [(ngModel)]="detail.vATAmount"
                                                           (ngModelChange)="calcular(detail,110,'vATAmount',mCPayment,mCPaymentDetails,mCPaymentDetailTaxs)"
                                                           (focus)="actionFocus(4, i)">
                                                </td>
                                                <td [hidden]="true" class="cell-Table"> <!--giá tính nguyên tệ-->
                                                    <input type="number" class="input-Cell input-curency"
                                                           name="{{'pretaxAmountOriginal_Tax'+i}}"
                                                           id="{{'pretaxAmountOriginal_Tax'+i}}"
                                                           style="text-align: right"
                                                           [(ngModel)]="detail.pretaxAmountOriginal"
                                                           (focus)="actionFocus(5, i)">
                                                </td>
                                                <td class="cell-Table"><!--Giá tính quy đổi-->
                                                    <input type="number" class="input-Cell input-curency"
                                                           name="{{'pretaxAmount_Tax'+i}}"
                                                           id="{{'pretaxAmount_Tax'+i}}"
                                                           style="text-align: right"
                                                           ebCurrencyMask
                                                           [systemOptions]="account?.systemOption"
                                                           [type] = "7"
                                                           [(ngModel)]="detail.pretaxAmount"
                                                           (ngModelChange)="calcular(detail,110,'pretaxAmount',mCPayment,mCPaymentDetails,mCPaymentDetailTaxs)"
                                                           (focus)="actionFocus(6, i)"
                                                    >
                                                </td>
                                                <td class="cell-Table">
                                                    <combo-box style=""
                                                               nameIp="{{'comboboxaccountingObject_DTTax'+i}}"
                                                               idIp="{{'comboboxaccountingObject_DTTax'+i}}"
                                                               [dataList]="accountingObjectData"
                                                               [showIconPlus]="true"
                                                               [nameCategory]="nameCategory"
                                                               [listColumns]="utilsService.listColumnsAccountingObjects"
                                                               displayMember="accountingObjectCode"
                                                               valueName="id"
                                                               [headerColumns]="utilsService.listHeaderColumnsAccountingObject"
                                                               [isObject]="true"
                                                               [(ngModel)]="detail.accountingObject"
                                                               (ngModelChange)="selectChangeAccountingObjectTax(i)"
                                                               (focusInput)="actionFocus(7, i)"
                                                               [isOutTable]="false"
                                                    ></combo-box>
                                                </td>
                                                <td class="cell-Table"><input type="text" class="input-Cell"
                                                                              name="accountingObjectName{{i}}"
                                                                              id="accountingObjectName{{i}}"
                                                                              (focus)="actionFocus(8, i)"
                                                                              [(ngModel)]="detail.accountingObjectName"></td>
                                                <td class="cell-Table"><input type="text" class="input-Cell"
                                                                              name="taxCode{{i}}"
                                                                              id="taxCode{{i}}"
                                                                              (focus)="actionFocus(9, i)"
                                                                              [(ngModel)]="detail.taxCode"></td>
                                                <td class="cell-Table">
                                                    <combo-box nameIp="{{'invoiceTemplate_Tax'+i}}"
                                                               idIp="{{'invoiceTemplate_Tax'+i}}"
                                                               [dataList]="invoiceTypes"
                                                               [headerColumns]="['Mã loại hóa đơn', 'Tên loại hóa đơn']"
                                                               [listColumns]="['invoiceTypeCode', 'invoiceTypeName']"
                                                               displayMember="invoiceTypeCode"
                                                               valueName="invoiceTypeCode"
                                                               [isObject]="false"
                                                               [(ngModel)]="detail.invoiceTemplate"
                                                               [getValueDisplay]="true"
                                                               (focusInput)="actionFocus(10, i)"
                                                               [isOutTable]="false"
                                                    ></combo-box>
                                                </td>
                                                <td class="cell-Table"><input type="text" class="input-Cell"
                                                                              name="{{'invoiceSeries_Tax'+i}}"
                                                                              id="{{'invoiceSeries_Tax'+i}}"
                                                                              (focus)="actionFocus(11, i)"
                                                                              [(ngModel)]="detail.invoiceSeries"></td>
                                                <td class="cell-Table"><input type="text" class="input-Cell"
                                                                              name="{{'invoiceNo_Tax'+i}}"
                                                                              id="{{'invoiceNo_Tax'+i}}"
                                                                              (focus)="actionFocus(12, i)"
                                                                              [(ngModel)]="detail.invoiceNo"></td>
                                                <td class="cell-Table">
                                                    <eb-date-picker nameIp="{{'invoiceDate_Tax'+i}}"
                                                                    idIp="{{'invoiceDate_Tax'+i}}"
                                                                    [(ngModel)]="detail.invoiceDate"
                                                                    [isInTable]="true"
                                                                    [format]="'YYYY-MM-DD'"
                                                                    (focusout)="actionFocus(13, i)"
                                                    ></eb-date-picker>
                                                </td>
                                                <td *ngIf="taxCalculationMethod !== 1" class="cell-Table jsgrid-align-center">
                                                    <combo-box style=""
                                                               nameIp="goodsServicePurchaseId{{i}}"
                                                               idIp="goodsServicePurchaseId{{i}}"
                                                               [dataList]="goodsServicePurchases"
                                                               [listColumns]="utilsService.listColumnsGoodsServicePurchase"
                                                               displayMember="goodsServicePurchaseCode"
                                                               valueName="id"
                                                               [headerColumns]="utilsService.listHeaderColumnsGoodsServicePurchase"
                                                               [isObject]="false"
                                                               [(ngModel)]="detail.goodsServicePurchaseID"
                                                               (focusInput)="actionFocus(14, i)"
                                                               [isOutTable]="false"
                                                    ></combo-box>
                                                </td>
                                            </tr>
                                            <tr *ngIf="statusVoucher === 0" (click)="AddnewRow(1)">
                                                <td class="cell-Table description"><input type="text" class="input-Cell"
                                                                                          id="description_Tax"
                                                                                          [title]="translate.instant('ebwebApp.purchaseOrder.addNewLine')"
                                                                                          value="{{'ebwebApp.purchaseOrder.addNewLine' | translate}}" readonly></td>
                                                <td class="cell-Table"><input type="text"  id="vATAccount_DTT" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" id="vATRate_DTax" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" id="vATAmount_Tax" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" id="pretaxAmount_Tax" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" id="comboboxaccountingObject_DTTax" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" id="accountingObjectName" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" id="taxCode" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" id="invoiceTemplate_Tax" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" id="invoiceSeries_Tax" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" id="invoiceNo_Tax" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" id="invoiceDate_Tax" class="input-Cell" readonly></td>
                                                <td *ngIf="taxCalculationMethod !== 1" id="goodsServicePurchaseId" class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                            </tr>
                                            <tr *ngFor="let l of newArr(9 - mCPaymentDetailTaxs?.length)">
                                                <td class="cell-Table description"><input type="text" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                <td *ngIf="taxCalculationMethod !== 1" class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                            </tr>
                                            </tbody>
                                            <tfoot [class.disable]="true">
                                            <tr>
                                                <td class="cell-Table color-tfoot jsgrid-align-left" colspan="3"><input type="text" readonly
                                                                                          class="input-Cell"
                                                                                          value="{{'ebwebApp.purchaseOrder.countLine'| translate}} : {{mCPaymentDetailTaxs?.length}}"></td>
                                                <td class="cell-Table color-tfoot jsgrid-align-right">
                                                    <input type="text" name="quantitySum" class="countRow input-Cell"
                                                           readonly
                                                           ebCurrencyMask
                                                           [systemOptions]="account?.systemOption"
                                                           [type] = "7"
                                                           [ngModel]="getTotalVATAmount()"
                                                    ></td>
                                                <td class="cell-Table color-tfoot jsgrid-align-right">
                                                    <input type="text" class="countRow input-Cell"
                                                           name="sumPretaxAmount"
                                                           readonly
                                                           ebCurrencyMask
                                                           [systemOptions]="account?.systemOption"
                                                           [type] = "7"
                                                           [ngModel]="getTotalPretaxAmount()"
                                                    ></td>
                                                <td class="cell-Table color-tfoot" colspan="7"> </td>
                                                <td *ngIf="taxCalculationMethod !== 1" class="cell-Table color-tfoot"> </td>
                                            </tr>
                                            </tfoot>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </ng-template>
                    </ngb-tab>
                    <ngb-tab  id ="refdoc">
                        <ng-template ngbTabTitle><span jhiTranslate="ebwebApp.saBill.refDoc"></span></ng-template>
                        <ng-template ngbTabContent>
                            <div class="tab-content">
                                <div class="frm-main frm-padding tab-pane fade in active show" id="home-ref2"
                                     style="background: #cbdcf0">
                                    <div id="table-scroll-ref2" class="table-scroll">
                                        <table id="main-table-ref2" class="main-table">
                                            <thead>
                                            <tr>
                                                <th scope="col" jhiTranslate="global.commonInfo.vDate">Ngày chứng từ</th>
                                                <th scope="col" jhiTranslate="global.commonInfo.postedDate">Ngày hạch toán</th>
                                                <th scope="col" jhiTranslate="global.commonInfo.noFBook">Số chứng từ</th>
                                                <th scope="col" jhiTranslate="global.commonInfo.reason">Diễn giải</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr *ngFor="let viewVoucher of viewVouchersSelected; let i = index"
                                                oncontextmenu="return false;"
                                                (contextmenu)="onRightClick($event, viewVouchersSelected, viewVoucher, false, true, 2)"
                                                >
                                                <td class="jsgrid-cell jsgrid-align-center">{{viewVoucher.date}}</td>
                                                <td class="jsgrid-cell jsgrid-align-center">{{viewVoucher.postedDate}}</td>
                                                <td class="jsgrid-cell jsgrid-align-left line-h pd-l-r-5"
                                                    (click)="utilsService.viewRefVoucher(viewVoucher)"
                                                    style="color:blue; text-decoration: underline;">{{viewVoucher.no}}
                                                </td>
                                                <td class="jsgrid-cell">{{viewVoucher.reason}}</td>
                                            </tr>
                                            <tr *ngFor="let l of newArr(9 - viewVouchersSelected?.length)">
                                                <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                            </tr>
                                            </tbody>
                                            <tfoot [class.disable]="true">
                                            <tr>
                                                <td class="cell-Table color-tfoot jsgrid-align-left" colspan="4"><input type="text" readonly
                                                                                                                        class="input-Cell"
                                                                                                                        value="{{'ebwebApp.purchaseOrder.countLine'| translate}} : {{viewVouchersSelected?.length}}"></td>
                                            </tr>
                                            </tfoot>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </ng-template>
                    </ngb-tab>
                    <ngb-tab x-placement="right" id ="reference" [disabled]="statusVoucher === 1">
                        <ng-template ngbTabTitle>
                            <span jhiTranslate="ebwebApp.mBDeposit.reference"></span>
                        </ng-template>
                    </ngb-tab>
                </ngb-tabset>
                <!--Phiếu chi trả tiền nhà cung cấp-->
                <div *ngIf="mCPayment.typeID === TYPE_MC_PAYMENT_NCC">
                    <ngb-tabset class="tool-navbar">
                        <ngb-tab>
                            <ng-template ngbTabTitle><span jhiTranslate="ebwebApp.mCPayment.home.voucher">Chứng từ</span></ng-template>
                            <ng-template ngbTabContent>
                                <div class="tab-content">
                                    <div class="frm-main frm-padding tab-pane fade in active show" id="home-detail-VC"
                                         style="background: #cbdcf0">
                                        <div id="table-scroll-detail-VC" class="table-scroll">
                                            <table id="main-table-detail-VC" class="main-table">
                                                <thead>
                                                <tr>
                                                    <th scope="col" jhiTranslate="ebwebApp.pPPayVendorDetail.date"></th>
                                                    <th scope="col" jhiTranslate="ebwebApp.pPPayVendorDetail.no"></th>
                                                    <th scope="col" jhiTranslate="ebwebApp.pPPayVendorDetail.dueDate"></th>
                                                    <th scope="col" jhiTranslate="ebwebApp.pPPayVendorDetail.employeeName"></th>
                                                    <th scope="col" jhiTranslate="ebwebApp.pPPayVendorDetail.account"></th>
                                                    <th scope="col"
                                                        jhiTranslate="ebwebApp.pPPayVendorDetail.totalDebitOriginal"></th>
                                                    <th scope="col" *ngIf="mCPayment?.currencyID !==currencyCode"
                                                        jhiTranslate="ebwebApp.pPPayVendorDetail.totalDebit"></th>
                                                    <th scope="col"
                                                        jhiTranslate="ebwebApp.pPPayVendorDetail.debitAmountOriginal"></th>
                                                    <th scope="col" *ngIf="mCPayment?.currencyID !==currencyCode"
                                                        jhiTranslate="ebwebApp.pPPayVendorDetail.debitAmount"></th>
                                                    <th scope="col" jhiTranslate="ebwebApp.pPPayVendorDetail.amountOriginal"></th>
                                                    <th scope="col" *ngIf="mCPayment?.currencyID !==currencyCode"
                                                        jhiTranslate="ebwebApp.pPPayVendorDetail.amount"></th>
                                                    <th scope="col" jhiTranslate="ebwebApp.pPPayVendorDetail.discountRate"></th>
                                                    <th scope="col"
                                                        jhiTranslate="ebwebApp.pPPayVendorDetail.discountAmountOriginal"></th>
                                                    <th scope="col" *ngIf="mCPayment?.currencyID !==currencyCode"
                                                        jhiTranslate="ebwebApp.pPPayVendorDetail.discountAmount"></th>
                                                    <th scope="col" jhiTranslate="ebwebApp.pPPayVendorDetail.discountAccount"></th>
                                                </tr>
                                                </thead>
                                                <tbody>
                                                <tr *ngFor="let paymentDetailVendor of mCPaymentDetailVendors;">
                                                    <td class="jsgrid-cell jsgrid-align-center" style="width: 150px">
                                                        {{paymentDetailVendor.date| date:'dd/MM/yyyy'}}
                                                    </td>
                                                    <td (click)="viewVoucher(paymentDetailVendor)" class="jsgrid-cell" style="width: 150px"><a style="color:blue; text-decoration: underline;">
                                                        {{isSoTaiChinh ? paymentDetailVendor.noFBook : paymentDetailVendor.noMBook}}
                                                    </a></td>
                                                    <td class="jsgrid-cell jsgrid-align-center" style="width: 150px">{{paymentDetailVendor.dueDate| date:'dd/MM/yyyy'}}</td>
                                                    <td class="jsgrid-cell"
                                                        style="width: 150px">{{getEmployeeByID(paymentDetailVendor.employeeID)}}</td>
                                                    <td class="jsgrid-cell"
                                                        style="width: 150px">{{paymentDetailVendor.debitAccount}}</td>
                                                    <td class="jsgrid-cell jsgrid-align-right"
                                                        style="width: 150px">
                                                        <input type="number"
                                                               class="input-Cell jsgrid-align-right"
                                                               [class.noEdit]="true"
                                                               ebCurrencyMask
                                                               [systemOptions]="account?.systemOption"
                                                               [type]="getAmountOriginalType()"
                                                               [(ngModel)]="paymentDetailVendor.payableAmountOriginal"/>
                                                    </td>
                                                    <td class="jsgrid-cell jsgrid-align-right"
                                                        style="width: 150px"
                                                        *ngIf="mCPayment?.currencyID !==currencyCode">
                                                        <input type="number"
                                                               class="input-Cell jsgrid-align-right"
                                                               [class.noEdit]="true"
                                                               ebCurrencyMask
                                                               [systemOptions]="account?.systemOption"
                                                               [type]="DDSo_TienVND"
                                                               [(ngModel)]="paymentDetailVendor.payableAmount"/>
                                                    </td>
                                                    <td class="jsgrid-cell jsgrid-align-right"
                                                        style="width: 150px">
                                                        <input
                                                            type="number"
                                                            class="input-Cell jsgrid-align-right"
                                                            [class.noEdit]="true"
                                                            ebCurrencyMask
                                                            [systemOptions]="account?.systemOption"
                                                            [type]="getAmountOriginalType()"
                                                            [(ngModel)]="paymentDetailVendor.remainingAmountOriginal"/>
                                                    </td>
                                                    <td class="jsgrid-cell jsgrid-align-right"
                                                        style="width: 150px"
                                                        *ngIf="mCPayment?.currencyID !==currencyCode"><input
                                                        type="number"
                                                        class="input-Cell jsgrid-align-right"
                                                        [class.noEdit]="true"
                                                        ebCurrencyMask
                                                        [systemOptions]="account?.systemOption"
                                                        [type]="DDSo_TienVND"
                                                        [(ngModel)]="paymentDetailVendor.remainingAmount"/>
                                                    </td>
                                                    <td class="jsgrid-cell jsgrid-align-right"
                                                        style="width: 150px">
                                                        <input type="number"
                                                               [class.noEdit]="true"
                                                               class="input-Cell jsgrid-align-right"
                                                               ebCurrencyMask
                                                               [systemOptions]="account?.systemOption"
                                                               [type]="getAmountOriginalType()"
                                                               [(ngModel)]="paymentDetailVendor.amountOriginal"
                                                               />
                                                    </td>
                                                    <td class="jsgrid-cell jsgrid-align-right"
                                                        style="width: 150px" *ngIf="mCPayment?.currencyID !==currencyCode">
                                                        <input type="number"
                                                               class="input-Cell jsgrid-align-right"
                                                               [class.noEdit]="true"
                                                               ebCurrencyMask
                                                               [systemOptions]="account?.systemOption"
                                                               [type]="DDSo_TienVND"
                                                               [(ngModel)]="paymentDetailVendor.amount"/>
                                                    </td>
                                                    <td class="jsgrid-cell jsgrid-align-right"
                                                        style="width: 150px">
                                                        <input type="number"
                                                               class="input-Cell jsgrid-align-right"
                                                               ebCurrencyMask
                                                               [class.noEdit]="true"
                                                               [systemOptions]="account?.systemOption"
                                                               [type]="5"
                                                               [(ngModel)]="paymentDetailVendor.discountRate"
                                                               max="100"/>
                                                    </td>
                                                    <td class="jsgrid-cell jsgrid-align-right"
                                                        style="width: 150px"><input type="number"
                                                                                    class="input-Cell jsgrid-align-right"
                                                                                    ebCurrencyMask
                                                                                    [class.noEdit]="true"
                                                                                    [systemOptions]="account?.systemOption"
                                                                                    [type]="getAmountOriginalType()"
                                                                                    [(ngModel)]="paymentDetailVendor.discountAmountOriginal"/>
                                                    </td>
                                                    <td class="jsgrid-cell jsgrid-align-right"
                                                        style="width: 150px" *ngIf="mCPayment?.currencyID !==currencyCode">
                                                        <input type="number"
                                                               class="input-Cell jsgrid-align-right"
                                                               [class.noEdit]="true"
                                                               ebCurrencyMask
                                                               [systemOptions]="account?.systemOption"
                                                               [type]="DDSo_TienVND"
                                                               [(ngModel)]="paymentDetailVendor.discountAmount"/>
                                                    </td>
                                                    <td class="jsgrid-cell jsgrid-align-right"
                                                        style="width: 150px">
                                                        {{paymentDetailVendor.discountAccount}}
                                                    </td>
                                                </tr>
                                                <tr *ngFor="let l of newArr(10 - mCPaymentDetailVendors?.length)">
                                                    <td class="cell-Table jsgrid-align-center" style="width: 150px">&nbsp;</td>
                                                    <td class="cell-Table jsgrid-align-right" style="width: 150px"></td>
                                                    <td class="cell-Table jsgrid-align-right" style="width: 150px"></td>
                                                    <td class="cell-Table jsgrid-align-right" style="width: 150px" *ngIf="mCPayment?.currencyID !==currencyCode"></td>
                                                    <td class="cell-Table jsgrid-align-right" style="width: 150px"></td>
                                                    <td class="cell-Table jsgrid-align-right" style="width: 150px" *ngIf="mCPayment?.currencyID !==currencyCode"></td>
                                                    <td class="cell-Table jsgrid-align-right" style="width: 150px"></td>
                                                    <td class="cell-Table jsgrid-align-right" style="width: 150px"></td>
                                                    <td class="cell-Table jsgrid-align-right" style="width: 150px" *ngIf="mCPayment?.currencyID !==currencyCode"></td>
                                                    <td class="cell-Table jsgrid-align-right" style="width: 150px"></td>
                                                    <td class="cell-Table jsgrid-align-right" style="width: 150px"></td>
                                                    <td class="cell-Table jsgrid-align-right" style="width: 150px"></td>
                                                    <td class="cell-Table jsgrid-align-right" style="width: 150px"></td>
                                                    <td class="cell-Table jsgrid-align-right" style="width: 150px" *ngIf="mCPayment?.currencyID !==currencyCode"></td>
                                                    <td class="cell-Table jsgrid-align-right" style="width: 150px"></td>
                                                </tr>
                                                </tbody>
                                                <tfoot>
                                                <tr>
                                                    <td class="cell-Table color-tfoot" style="width: 150px"><input type="text" readonly
                                                                                                       class="input-Cell"
                                                                                                       value="{{'ebwebApp.purchaseOrder.countLine'| translate}} : {{mCPaymentDetailVendors?.length}}">
                                                    </td>
                                                    <td class="cell-Table color-tfoot" colspan="5" style="width: 150px"><input type="text" class="input-Cell"
                                                                                                       readonly></td>
                                                    <td class="cell-Table color-tfoot" style="width: 150px"
                                                        *ngIf="mCPayment?.currencyID !==currencyCode"><input type="text" class="countRow input-Cell"
                                                                                                               readonly>
                                                    </td>
                                                    <td class="cell-Table color-tfoot"
                                                        style="width: 150px">
                                                        <input type="text"
                                                               class="input-Cell jsgrid-align-right"
                                                               readonly
                                                               name="amountSum"
                                                               ebCurrencyMask
                                                               [systemOptions]="account?.systemOption"
                                                               [type]="getAmountOriginalType()"
                                                               [ngModel]="summCPaymentDetailVendors('remainingAmountOriginal')">
                                                    </td>
                                                    <td class="cell-Table color-tfoot"
                                                        style="width: 150px"
                                                        *ngIf="mCPayment?.currencyID !==currencyCode">
                                                        <input type="text"
                                                               class="input-Cell jsgrid-align-right"
                                                               readonly
                                                               name="amountSum"
                                                               ebCurrencyMask
                                                               [systemOptions]="account?.systemOption"
                                                               [type]="DDSo_TienVND"
                                                               [ngModel]="summCPaymentDetailVendors('remainingAmount')">
                                                    </td>
                                                    <td class="cell-Table color-tfoot"
                                                        style="width: 150px">
                                                        <input type="text"
                                                               class="input-Cell jsgrid-align-right"
                                                               readonly
                                                               name="amountSum"
                                                               ebCurrencyMask
                                                               [systemOptions]="account?.systemOption"
                                                               [type]="getAmountOriginalType()"
                                                               [ngModel]="summCPaymentDetailVendors('amountOriginal')">
                                                    </td>
                                                    <td class="cell-Table color-tfoot"
                                                        style="width: 150px" *ngIf="mCPayment?.currencyID !==currencyCode">
                                                        <input type="text"
                                                               class="input-Cell jsgrid-align-right"
                                                               readonly
                                                               name="amountSum"
                                                               ebCurrencyMask
                                                               [systemOptions]="account?.systemOption"
                                                               [type]="DDSo_TienVND"
                                                               [ngModel]="summCPaymentDetailVendors('amount')">
                                                    </td>
                                                    <td class="cell-Table color-tfoot"
                                                        style="width: 150px"><input type="text" class="countRow input-Cell"
                                                                                    readonly></td>
                                                    <td class="cell-Table color-tfoot"
                                                        style="width: 150px">
                                                        <input type="text"
                                                               class="input-Cell jsgrid-align-right"
                                                               readonly
                                                               name="amountSum"
                                                               ebCurrencyMask
                                                               [systemOptions]="account?.systemOption"
                                                               [type]="getAmountOriginalType()"
                                                               [ngModel]="summCPaymentDetailVendors('discountAmountOriginal')">
                                                    </td>
                                                    <td class="cell-Table color-tfoot"
                                                        style="width: 150px" *ngIf="mCPayment?.currencyID !==currencyCode">
                                                        <input type="text"
                                                               class="input-Cell jsgrid-align-right"
                                                               readonly
                                                               name="amountSum"
                                                               ebCurrencyMask
                                                               [systemOptions]="account?.systemOption"
                                                               [type]="DDSo_TienVND"
                                                               [ngModel]="summCPaymentDetailVendors('discountAmount')">
                                                    </td>
                                                    <td class="cell-Table color-tfoot"
                                                        style="width: 150px"><input type="text" class="input-Cell"
                                                                                    readonly>
                                                    </td>
                                                </tr>
                                                </tfoot>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </ng-template>
                        </ngb-tab>
                        <ngb-tab>
                            <ng-template ngbTabTitle><span jhiTranslate="ebwebApp.mCPayment.home.detail">Chi tiết</span>
                            </ng-template>
                            <ng-template ngbTabContent>
                                <div class="tab-content">
                                    <div class="frm-main frm-padding tab-pane fade in active show" id="home-detail-NCC"
                                         style="background: #cbdcf0">
                                        <div id="table-scroll-detail-NCC" class="table-scroll">
                                            <table id="main-table-detail-NCC" class="main-table">
                                                <thead>
                                                <tr>
                                                    <th scope="col" jhiTranslate="ebwebApp.mCPaymentDetails.description">Diễn giải</th>
                                                    <th scope="col" jhiTranslate="ebwebApp.mCPaymentDetails.debitAccount">TK Nợ</th>
                                                    <th scope="col" jhiTranslate="ebwebApp.mCPaymentDetails.creditAccount">TK Có</th>
                                                    <th scope="col" jhiTranslate="ebwebApp.mCPaymentDetails.amountOriginal">Số tiền</th>
                                                    <th scope="col" *ngIf="mCPayment.currencyID!==currencyCode" jhiTranslate="ebwebApp.mCPaymentDetails.amount">Thành tiền QĐ</th>
                                                    <th scope="col" jhiTranslate="ebwebApp.mCPaymentDetails.accountingObject">Đối tượng</th>
                                                    <th scope="col" jhiTranslate="ebwebApp.mCPaymentDetails.bankAccountDetails">Tài khoản ngân hàng</th>
                                                    <th scope="col" jhiTranslate="ebwebApp.mCPaymentDetails.expenseItem">Khoản mục CP</th>
                                                    <th scope="col" jhiTranslate="ebwebApp.mCPaymentDetails.budgetItem">Mục thu chi</th>
                                                    <th scope="col" jhiTranslate="ebwebApp.mCPaymentDetails.departmentID">Phòng ban</th>
                                                    <th scope="col" jhiTranslate="ebwebApp.mCPaymentDetails.costSet">Đối tượng THCP</th>
<!--                                                    <th scope="col" jhiTranslate="ebwebApp.mCPaymentDetails.eMContractID">Hợp đồng</th>-->
                                                    <th scope="col" jhiTranslate="ebwebApp.mCPaymentDetails.statisticsCode">Mã thống kê</th>
                                                    <th scope="col" [hidden]="true" *ngIf="mCPayment.currencyID!==currencyCode" jhiTranslate="ebwebApp.mCPaymentDetails.cashOutExchangeRateFB">Tỷ giá xuất quỹ</th>
                                                    <th scope="col" [hidden]="true" *ngIf="mCPayment.currencyID!==currencyCode" jhiTranslate="ebwebApp.mCPaymentDetails.cashOutAmountFB">QĐ theo tỷ giá xuất quỹ</th>
                                                    <th scope="col" [hidden]="true" *ngIf="mCPayment.currencyID!==currencyCode" jhiTranslate="ebwebApp.mCPaymentDetails.cashOutDifferAmountFB">Chênh lệch</th>
                                                    <th scope="col" [hidden]="true" *ngIf="mCPayment.currencyID!==currencyCode" jhiTranslate="ebwebApp.mCPaymentDetails.cashOutDifferAccountFB">TK xử lý chênh lệch</th>
                                                </tr>
                                                </thead>
                                                <tbody>
                                                <tr oncontextmenu="return false;"
                                                    (contextmenu)="onRightClick($event, mCPaymentDetails, detail, true, true, 0)"
                                                    *ngFor="let detail of mCPaymentDetails; let i = index"
                                                    (keydown.control.delete)="KeyPress(detail, 'ctr + delete',0)"
                                                    (keydown.control.c)="KeyPress(detail,'ctr + c', 0)"
                                                    (keydown.control.insert)="KeyPress(detail,'ctr + insert', 0)"
                                                >
                                                    <td class="cell-Table description" [title]="detail.description"><input type="text" class="input-Cell"
                                                                                              name="{{'description_DT'+i}}"
                                                                                              [(ngModel)]="detail.description"></td>
                                                    <td class="cell-Table jsgrid-align-center">
                                                        <combo-box id="debitAccountListNCC{{i}}"
                                                                   name="debitAccountListNCC{{i}}"
                                                                   [isRequired]="true"
                                                                   [dataList]="debitAccountList"
                                                                   [listColumns]="utilsService.listColumnsAccountList"
                                                                   displayMember="accountNumber"
                                                                   valueName="accountNumber"
                                                                   [headerColumns]="utilsService.listHeaderColumnsAccountList"
                                                                   [isObject]="false"
                                                                   [(ngModel)]="detail.debitAccount"
                                                                   (ngModelChange)="calcular(detail, 110,'debitAccount', mCPayment, mCPaymentDetails, mCPaymentDetailTaxs)"
                                                                   [isOutTable]="false"
                                                        >
                                                        </combo-box>
                                                    </td>
                                                    <td class="cell-Table jsgrid-align-center">
                                                        <combo-box id="creditAccountncc{{i}}"
                                                                   name="creditAccountncc{{i}}"
                                                                   [isRequired]="true"
                                                                   [dataList]="creditAccountList"
                                                                   [listColumns]="utilsService.listColumnsAccountList"
                                                                   displayMember="accountNumber"
                                                                   valueName="accountNumber"
                                                                   [headerColumns]="utilsService.listHeaderColumnsAccountList"
                                                                   [isObject]="false"
                                                                   [(ngModel)]="detail.creditAccount"
                                                                   (ngModelChange)="calcular(detail, 110,'creditAccount', mCPayment, mCPaymentDetails, mCPaymentDetailTaxs)"
                                                                   [isOutTable]="false"
                                                        >
                                                        </combo-box>
                                                    </td>
                                                    <td class="cell-Table">
                                                        <input type="number"
                                                               style="text-align: right"
                                                               class="input-Cell input-curency"
                                                               id="{{'amountOriginal_DTNCC'+i}}"
                                                               name="{{'amountOriginal_DTNCC'+i}}"
                                                               ebCurrencyMask
                                                               [class.noEdit]="true"
                                                               [systemOptions]="account?.systemOption"
                                                               [type] = "getAmountOriginalType()"
                                                               [(ngModel)]="detail.amountOriginal"
                                                               (ngModelChange)="calcular(detail,110,'amountOriginal', mCPayment, mCPaymentDetails, mCPaymentDetailTaxs)">
                                                    </td>
                                                    <td *ngIf="mCPayment.currencyID !==currencyCode" class="cell-Table"><input
                                                        style="text-align: right"
                                                        type="number" class="input-Cell input-curency"
                                                        name="{{'amountOriginal_DT'+i}}"
                                                        ebCurrencyMask
                                                        [class.noEdit]="true"
                                                        [systemOptions]="account?.systemOption"
                                                        [type] = "7"
                                                        [(ngModel)]="detail.amount"
                                                        (ngModelChange)="calcular(detail,110,'amount', mCPayment, mCPaymentDetails, mCPaymentDetailTaxs)">
                                                    </td>
                                                    <td class="cell-Table">
                                                        <combo-box style=""
                                                                   name="{{'comboboxaccountingObject_DT'+i}}"
                                                                   [dataList]="accountingObjects"
                                                                   [nameCategory]="utilsService.DOI_TUONG"
                                                                   [listColumns]="utilsService.listColumnsAccountingObjects"
                                                                   displayMember="accountingObjectCode"
                                                                   valueName="id"
                                                                   [headerColumns]="utilsService.listHeaderColumnsAccountingObject"
                                                                   [isObject]="true"
                                                                   [(ngModel)]="detail.accountingObject"
                                                                   [isOutTable]="false"
                                                        ></combo-box>
                                                    </td>
                                                    <td class="cell-Table">
                                                        <combo-box  id="field_bankAccountDetailIDNCC{{i}}"
                                                                    name="comboboxBankAccountDetailIDNCC{{i}}"
                                                                    [dataList]="bankAccountDetails"
                                                                    [isOutTable]="true"
                                                                    [listColumns]="utilsService.listColumnsBank"
                                                                    displayMember="bankAccount"
                                                                    valueName="id"
                                                                    [headerColumns]="utilsService.listHeaderColumnsBank"
                                                                    [isObject]="true"
                                                                    [(ngModel)]="detail.bankAccountDetails"
                                                                    [isOutTable]="false"
                                                        >
                                                        </combo-box>
                                                    </td>
                                                    <td class="cell-Table">
                                                        <combo-box
                                                            name="{{'comboboxexpenseItem_DT'+i}}"
                                                            [dataList]="expenseItems"
                                                            [listColumns]="utilsService.listColumnsExpenseItem"
                                                            displayMember="expenseItemCode"
                                                            valueName="id"
                                                            [headerColumns]="utilsService.listHeaderColumnsExpenseItem"
                                                            [isObject]="true"
                                                            [(ngModel)]="detail.expenseItem"
                                                            [isOutTable]="false"
                                                        ></combo-box>
                                                    </td>
                                                    <td class="cell-Table">
                                                        <combo-box style="" id="budgetItem_DTNCC{{i}}"
                                                                   name="budgetItem_DTNCC{{i}}"
                                                                   [dataList]="budgetItems"
                                                                   [listColumns]="utilsService.listColumnsBudgetItem"
                                                                   displayMember="budgetItemCode"
                                                                   valueName="id"
                                                                   [headerColumns]="utilsService.listHeaderColumnsBudgetItem"
                                                                   [isObject]="true"
                                                                   [(ngModel)]="detail.budgetItem"
                                                                   [isOutTable]="false"
                                                        >
                                                        </combo-box>
                                                    </td>
                                                    <td class="cell-Table">
                                                        <combo-box
                                                            name="{{'comboboxorganizationUnit_DTNCC'+i}}"
                                                            id="{{'comboboxorganizationUnit_DTNCC'+i}}"
                                                            [dataList]="organizationUnits"
                                                            [listColumns]="utilsService.listColumnsOrganizationUnit"
                                                            displayMember="organizationUnitCode"
                                                            valueName="id"
                                                            [headerColumns]="utilsService.listHeaderColumnsOrganizationUnit"
                                                            [isObject]="true"
                                                            [(ngModel)]="detail.organizationUnit"
                                                            [isOutTable]="false"
                                                        ></combo-box>
                                                    </td>
                                                    <td class="cell-Table">
                                                        <combo-box
                                                            name="{{'comboboxcostSet_DT'+i}}"
                                                            [dataList]="costSets"
                                                            [listColumns]="utilsService.listColumnsCostSet"
                                                            displayMember="costSetCode"
                                                            valueName="id"
                                                            [headerColumns]="utilsService.listHeaderColumnsCostSet"
                                                            [isObject]="true"
                                                            [(ngModel)]="detail.costSet"
                                                            [isOutTable]="false"
                                                        ></combo-box>
                                                    </td>
                                                    <!--<td class="cell-Table">
                                                        <combo-box
                                                            idIp="{{'comboboxcontractID_DT'+i}}"
                                                            nameIp="{{'comboboxcontractID_DT'+i}}"
                                                            [dataList]="eMContracts"
                                                            [listColumns]="isSoTaiChinh?utilsService.listColumnsEMContractFBook:utilsService.listColumnsEMContractMBook"
                                                            displayMember="{{isSoTaiChinh?'noFBook':'noMBook'}}"
                                                            valueName="id"
                                                            [headerColumns]="utilsService.listHeaderColumnsEMContract"
                                                            [isObject]="false"
                                                            [(ngModel)]="detail.contractID"
                                                        >
                                                        </combo-box>
                                                    </td>-->
                                                    <td class="cell-Table">
                                                        <combo-box
                                                            name="comboboxstatisticsCode_DT"
                                                            [dataList]="statisticCodes"
                                                            [listColumns]="['statisticsCode', 'statisticsCodeName']"
                                                            displayMember="statisticsCode"
                                                            valueName="id"
                                                            [headerColumns]="['Mã thống kê', 'Tên mã thống kê']"
                                                            [isObject]="true"
                                                            [(ngModel)]="detail.statisticsCode"
                                                            [isOutTable]="false"
                                                        ></combo-box>
                                                    </td>
                                                    <td class="cell-Table" [hidden]="true" *ngIf="mCPayment.currencyID!==currencyCode"><input
                                                        style="text-align: right"
                                                        type="number" class="input-Cell"
                                                        name="{{'description_DT'+i}}"
                                                        [(ngModel)]="detail.cashOutExchangeRateFB"></td>
                                                    <td class="cell-Table" [hidden]="true" *ngIf="mCPayment.currencyID!==currencyCode"><input
                                                        style="text-align: right"
                                                        type="number" class="input-Cell"
                                                        name="{{'description_DT'+i}}"
                                                        [(ngModel)]="detail.cashOutAmountFB"></td>
                                                    <td class="cell-Table" [hidden]="true" *ngIf="mCPayment.currencyID!==currencyCode"><input
                                                        style="text-align: right"
                                                        type="number" class="input-Cell"
                                                        name="{{'description_DT'+i}}"
                                                        [(ngModel)]="detail.cashOutDifferAmountFB"></td>
                                                    <td class="cell-Table" [hidden]="true" *ngIf="mCPayment.currencyID!==currencyCode"><input
                                                        type="text" class="input-Cell"
                                                        name="{{'description_DT'+i}}"
                                                        [(ngModel)]="detail.cashOutDifferAccountFB"></td>
                                                </tr>
                                                <tr *ngIf="statusVoucher === 0" (click)="AddnewRow(0)">
                                                    <td class="cell-Table description"><input type="text" class="input-Cell"
                                                                                              [title]="translate.instant('ebwebApp.purchaseOrder.addNewLine')"
                                                                                              value="{{'ebwebApp.purchaseOrder.addNewLine' | translate}}"
                                                                                              readonly></td>
                                                    <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                    <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                    <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                    <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                    <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                    <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                    <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                    <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                    <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                    <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                    <td *ngIf="mCPayment.currencyID !==currencyCode" class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                    <td [hidden]="true" *ngIf="mCPayment.currencyID !==currencyCode" class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                    <td [hidden]="true" *ngIf="mCPayment.currencyID !==currencyCode" class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                    <td [hidden]="true" *ngIf="mCPayment.currencyID !==currencyCode" class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                    <td [hidden]="true" *ngIf="mCPayment.currencyID !==currencyCode" class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                </tr>
                                                <tr *ngFor="let l of newArr(9 - mCPaymentDetails.length)">
                                                    <td class="cell-Table description"><input type="text" class="input-Cell" readonly></td>
                                                    <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                    <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                    <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                    <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                    <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                    <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                    <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                    <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                    <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                    <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                    <td *ngIf="mCPayment.currencyID !==currencyCode" style="text-align: right" class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                    <td [hidden]="true" *ngIf="mCPayment.currencyID !==currencyCode" style="text-align: right" class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                    <td [hidden]="true" *ngIf="mCPayment.currencyID !==currencyCode" style="text-align: right" class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                    <td [hidden]="true" *ngIf="mCPayment.currencyID !==currencyCode" style="text-align: right" class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                    <td [hidden]="true" *ngIf="mCPayment.currencyID !==currencyCode" style="text-align: right" class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                </tr>
                                                </tbody>
                                                <tfoot [class.disable]="true">
                                                <tr>
                                                    <td class="cell-Table color-tfoot jsgrid-align-left" colspan="3"><input type="text" readonly
                                                                                                                            class="input-Cell"
                                                                                                                            value="{{'ebwebApp.purchaseOrder.countLine'| translate}} : {{mCPaymentDetails?.length}}"></td>
                                                    <td class="cell-Table color-tfoot jsgrid-align-right">
                                                        <input type="text" name="totalAmountOriginal_footer" class="input-Cell"
                                                               readonly
                                                               ebCurrencyMask
                                                               [systemOptions]="account?.systemOption"
                                                               [type] = "getAmountOriginalType()"
                                                               [ngModel]="sum('amountOriginal')"
                                                               ></td>
                                                    <td *ngIf="mCPayment.currencyID !==currencyCode" class="cell-Table color-tfoot jsgrid-align-right">
                                                        <input type="text" name="totalAmount_footer" class="input-Cell"
                                                               readonly
                                                               ebCurrencyMask
                                                               [systemOptions]="account?.systemOption"
                                                               [type] = "7"
                                                               [ngModel]="sum('amount')"
                                                                ></td>
                                                    <td class="cell-Table color-tfoot" colspan="7"> </td>
                                                    <td [hidden]="true" *ngIf="mCPayment.currencyID !==currencyCode" class="cell-Table color-tfoot" colspan="4"> </td>
                                                </tr>
                                                </tfoot>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </ng-template>
                        </ngb-tab>
                    </ngb-tabset>
                </div>
                <!--Phiếu chi trả tiền nhà cung cấp-->
                <div class="row justify-content-end no-gutters" style="padding-top: 10px;padding-right: 15px">
                    <div class="form-group row justify-content-end no-gutters">
                        <label class="col-sm-4 col-form-label pd-r-0"
                               jhiTranslate="ebwebApp.mCPayment.totalAmount"
                               style="padding-left: 0px;padding-right: 0px;text-align: right;"
                               for="field_totalAmountOriginal1">Total Amount</label>
                        <div class="col-sm-4 pd-l-0 pd-r-5 jsgrid-align-right"
                             style="padding-right: 0px;margin-right: 5px;">
                            <input type="number" class="noEdit form-control form-control-sm myreadonlytrue"
                                   name="totalAmount" id="field_totalAmountOriginal1"
                                   readonly
                                   ebCurrencyMask
                                   [title]="mCPayment?.totalAmountOriginal"
                                   [systemOptions]="account?.systemOption"
                                   [type]="getAmountOriginalType()"
                                   [(ngModel)]="mCPayment.totalAmountOriginal"/>
                        </div>
                        <div class="col-sm-4 pd-l-0 jsgrid-align-right last-div-2-1"
                             style="padding-left: 0px;"> <!--*ngIf=" mCPayment.currencyID!==currencyCode"-->
                            <input type="number" class="noEdit form-control form-control-sm myreadonlytrue"
                                   name="totalAmountOriginal" id="field_totalAmount"
                                   readonly
                                   ebCurrencyMask
                                   [title]="mCPayment?.totalAmount"
                                   [systemOptions]="account?.systemOption"
                                   [type]="7"
                                   [(ngModel)]="mCPayment.totalAmount"
                            />
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
<!-- Footer -->
    <footer>
    </footer>
    <eb-context-menu [contextMenu]="contextMenu" [eventHandlingHere]="true" [useCopyRow]="true"></eb-context-menu>
</div>
<!------------------->
<ng-template #content let-modal>
    <div class="modal-body">
        <form>
            <div class="form-group">
                <label jhiTranslate="ebwebApp.saBill.saveMessage">Dữ liệu đã bị thay đổi, Bạn có muốn lưu lại?</label>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-outline-success" (click)="saveContent()" jhiTranslate="entity.action.save">Save</button>
        <button type="button" class="btn btn-outline-dark" (click)="close()" jhiTranslate="entity.action.noSave">close</button>
        <button type="button" class="btn btn-outline-dark" (click)="closeContent()" jhiTranslate="entity.action.close">close</button>
    </div>
</ng-template>
<ng-template #contentAmount let-modal>
    <div class="modal-body">
        <form>
            <div class="form-group">
                <label>Tiền thuế hạch toán và chi tiết chưa khớp nhau. Bạn có muốn lưu chứng từ {{no}} không?</label>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-outline-success" (click)="saveModalComponentAmount()" jhiTranslate="entity.action.save">Save</button>
        <button type="button" class="btn btn-outline-dark" (click)="closeModalComponentAmount()" jhiTranslate="entity.action.noSave">close</button>
    </div>
</ng-template>




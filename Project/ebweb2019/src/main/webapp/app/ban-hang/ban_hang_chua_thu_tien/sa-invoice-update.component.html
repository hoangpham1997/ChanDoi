<div class="container-fluid" (click)="disableContextMenu()">
    <div class="margin-tp-5 margin-0">
        <div class="">
            <div class="itemw">
                <div class="menu-tool-bar he" style="line-height: 16px;">
                    <div class="gr-tool-bar2">
                        <!--Phiếu thu add by Hautv-->
                        <button *ngIf="fromMCReceipt" (click)="previousEditMCReceipt()" class="aprev button-navigation"
                                [class.disable]="isEdit || rowNumberMCReceipt===countMCReceipt || countMCReceipt == 1">
                            <i class="mdi mdi-arrow-left"></i>
                        </button>
                        <button *ngIf="fromMCReceipt" (click)="nextEditMCReceipt()" class="anext button-navigation"
                                [class.disable]="isEdit || rowNumberMCReceipt ===1 || countMCReceipt == 1"><i
                            class="mdi mdi-arrow-right"></i></button>
                        <!--Phiếu thu-->

                        <!--Báo có Add by Namnh-->
                        <button *ngIf="fromMBDeposit" (click)="previousEditMBDeposit()" class="aprev button-navigation"
                                [class.disable]="isEdit || rowNumberMBDeposit===countMBDeposit || countMBDeposit == 1">
                            <i class="mdi mdi-arrow-left"></i>
                        </button>
                        <button *ngIf="fromMBDeposit" (click)="nextEditMBDeposit()" class="anext button-navigation"
                                [class.disable]="isEdit || rowNumberMBDeposit ===1 || countMBDeposit == 1"><i
                            class="mdi mdi-arrow-right"></i></button>
                        <!--Báo có Add by Namnh-->

                        <!--Xuất kho by huypq-->
                        <button *ngIf="!fromMCReceipt && isFromOutWard" class="aprev button-navigation" (click)="move(1)"
                                [disabled]="rsRowNum >= rsTotalItems || isEdit"><i class="mdi mdi-arrow-left"></i></button>
                        <button *ngIf="!fromMCReceipt && isFromOutWard" class="anext button-navigation" (click)="move(-1)"
                                [disabled]="rsRowNum <= 1 || isEdit">
                            <i class="mdi mdi-arrow-right"></i>
                        </button>
                        <!--Xuất kho by huypq-->

                        <button *ebHasSomeAuthority="['ROLE_ADMIN', ROLE_BanHang]"
                                [hidden]="fromMCReceipt || isFromOutWard || fromMBDeposit" class="aprev button-navigation" (click)="move(1)"
                                [disabled]="rowNum >= totalItems || isEdit || isViewFromRef || isViewFromEInvoice"><i class="mdi mdi-arrow-left"></i></button>
                        <button *ebHasSomeAuthority="['ROLE_ADMIN', ROLE_BanHang]"
                                [hidden]="fromMCReceipt || isFromOutWard || fromMBDeposit" class="anext button-navigation" (click)="move(-1)"
                                [disabled]="rowNum <= 1 || isEdit || isViewFromRef || isViewFromEInvoice">
                            <i class="mdi mdi-arrow-right"></i>
                        </button>
                        <button *ebHasSomeAuthority="['ROLE_ADMIN', ROLE_Them]"
                                title="{{'ebwebApp.outWard.tooltipAdd' | translate}}"
                                [disabled]="isEdit" (click)="addNew($event)" class="button-navigation">
                            <i class="mdi mdi-plus"></i>
                            <span jhiTranslate="ebwebApp.common.add">thêm</span></button>
                        <button *ebHasSomeAuthority="['ROLE_ADMIN', ROLE_Sua]"
                                title="{{'ebwebApp.outWard.tooltipEdit' | translate}}"
                                [disabled]="isEdit || this.sAInvoice.recorded" (click)="edit()" class="button-navigation">
                            <i class="mdi mdi-rename-box"></i>
                            <span jhiTranslate="ebwebApp.common.update"> sua</span></button>
                        <button *ebHasSomeAuthority="['ROLE_ADMIN', ROLE_Them, ROLE_Sua]"
                                (click)="save(true)" [disabled]="!isEdit"
                                title="{{'ebwebApp.outWard.tooltipSave' | translate}}" class="button-navigation">
                            <i class="mdi mdi-briefcase-download"></i>
                            <span jhiTranslate="ebwebApp.common.save">Lưu</span></button>
                        <button *ebHasSomeAuthority="['ROLE_ADMIN', ROLE_Them]"
                                title="{{'ebwebApp.outWard.tooltipSaveAndAdd' | translate}}"
                                [disabled]="!isEdit" (click)="saveAndNew()" class="button-navigation">
                            <i class="mdi mdi-plus"></i>
                            <span jhiTranslate="ebwebApp.purchaseOrder.saveAndAdd">Lưu & thêm</span>
                        </button>
                        <button *ebHasSomeAuthority="['ROLE_ADMIN', ROLE_GhiSo]"
                                [hidden]="!this.sAInvoice.recorded" title="{{'ebwebApp.outWard.tooltipUnRecord' | translate}}"
                                [disabled]="checkCloseBook(account, sAInvoice.postedDate)"
                                (click)="unrecord()"
                                class="button-navigation"><i class="mdi mdi-pencil"></i>
                            <span jhiTranslate="ebwebApp.mBDeposit.home.unrecord">bỏ ghi sổ</span></button>
                        <button *ebHasSomeAuthority="['ROLE_ADMIN', ROLE_GhiSo]"
                                [hidden]="this.sAInvoice.recorded" title="{{'ebwebApp.outWard.tooltipRecord' | translate}}"
                                (click)="record()" [disabled]="!this.sAInvoice || !this.sAInvoice.id || this.isEdit || checkCloseBook(account, sAInvoice.postedDate)"
                                class="button-navigation"><i class="mdi mdi-pencil"></i>
                            <span jhiTranslate="ebwebApp.common.carrying">ghi sổ</span></button>
                        <button *ebHasSomeAuthority="['ROLE_ADMIN', ROLE_Them]"
                                [disabled]="isEdit || !sAInvoice.id" (click)="copyAndNew()" class="button-navigation"
                                title="{{'ebwebApp.outWard.tooltipCopy&Add' | translate}}"><i
                            class="mdi mdi-plus"></i> <span jhiTranslate="ebwebApp.common.coppyAndAddNew">Sao chép
            &amp; Thêm mới</span></button>
                        <button class="button-navigation" *ebHasSomeAuthority="['ROLE_ADMIN', ROLE_Xoa]"
                                [disabled]="(!(sAInvoice && sAInvoice.id) || sAInvoice?.recorded || this.isEdit || checkCloseBook(account, sAInvoice.postedDate))"
                                (click)="delete()" title="{{'ebwebApp.outWard.tooltipDrop' | translate}}"><i
                            class="mdi mdi-delete-forever"></i>
                            <span jhiTranslate="ebwebApp.purchaseOrder.delete">Xóa</span>
                        </button>
                        <div ngbDropdown class="d-inline-block"
                             *ebHasSomeAuthority="['ROLE_ADMIN', ROLE_In]">
                            <button id="dropdownBasic1" ngbDropdownToggle [class.disableDiv]="isEdit" class="button-navigation"
                                    style="background: transparent;border: none; color: #f0f0f0"><i class="mdi mdi-printer"></i><span
                                jhiTranslate="ebwebApp.mBTellerPaper.print"></span>
                            </button>
                            <div ngbDropdownMenu aria-labelledby="dropdownBasic1" style="padding: 0 !important;">
                                <button ngbDropdownItem class="custom-dropdown" *ngIf="saBill.isAttachList && sAInvoice.isBill"  (click)="exportPdf(false, 15)"><span
                                    jhiTranslate="ebwebApp.sAInvoice.GoodsAndService"></span></button>
                                <button ngbDropdownItem class="custom-dropdown" (click)="exportPdf(false, 1)"><span
                                    jhiTranslate="global.reportName.chungTuKeToan"></span></button>
                                <button ngbDropdownItem class="custom-dropdown" *ngIf="sAInvoice.currencyID != currencyCode" (click)="exportPdf(false, 3)"><span
                                    jhiTranslate="global.reportName.chungTuKeToanQD"></span></button>
                                <button *ngIf="sAInvoice.typeID === 322"  ngbDropdownItem class="custom-dropdown"  (click)="exportPdf(false, 4)"><span
                                    jhiTranslate="ebwebApp.mBDeposit.creditNote"></span></button>
                                <button ngbDropdownItem class="custom-dropdown" *ngIf="sAInvoice.isBill"  (click)="exportPdf(false, 11)"><span
                                    jhiTranslate="ebwebApp.sAInvoice.saleInvoice"></span></button>
                                <button ngbDropdownItem class="custom-dropdown" *ngIf="sAInvoice.isBill" (click)="exportPdf(false, 10)"><span
                                    jhiTranslate="ebwebApp.sAInvoice.vatInvoice"></span></button>
                                <button *ngIf="sAInvoice.isDeliveryVoucher"ngbDropdownItem class="custom-dropdown" (click)="exportPdf(false, 12)"><span
                                    jhiTranslate="ebwebApp.outWard.billOutWrad"></span></button>
                                <button *ngIf="sAInvoice.typeID === 321" ngbDropdownItem class="custom-dropdown" (click)="exportPdf(false, 13)"><span
                                    jhiTranslate="ebwebApp.mCReceipt.print.mCReceipt"></span></button>
                                <button *ngIf="sAInvoice.typeID === 321" ngbDropdownItem class="custom-dropdown" (click)="exportPdf(false, 14)"><span
                                    jhiTranslate="ebwebApp.mCReceipt.print.mCReceiptA5"></span></button>
                                <button *ngIf="sAInvoice.isDeliveryVoucher" ngbDropdownItem class="custom-dropdown" (click)="exportPdf(false, 16)"><span
                                    jhiTranslate="ebwebApp.mCReceipt.print.billOutWradA5"></span></button>
                                <button ngbDropdownItem class="custom-dropdown" (click)="exportPdf(false, 0)"><span
                                    jhiTranslate="global.reportName.sAInvoicePXK"></span></button>
                            </div>
                        </div>
                        <div ngbDropdown class="d-inline-block">
                            <button id="dropdownBasic2" ngbDropdownToggle class="button-navigation"
                                    style="background: transparent;border: none; color: #f0f0f0"><i
                                class="mdi mdi-plus-circle"></i><span
                                jhiTranslate="ebwebApp.saReturn.form"></span>
                            </button>
                            <div ngbDropdownMenu aria-labelledby="dropdownBasic2" style="padding: 0 !important;">
                                <button ngbDropdownItem class="custom-dropdown" [class.selected]="!isMoreForm" [class.active]="!isMoreForm" (click)="isMoreForm = false"><span
                                    jhiTranslate="ebwebApp.saReturn.basicForm"></span></button>
                                <button ngbDropdownItem class="custom-dropdown" [class.selected]="isMoreForm" [class.active]="isMoreForm" (click)="isMoreForm = true"><span
                                    jhiTranslate="ebwebApp.saReturn.moreForm"></span></button>
                            </div>
                        </div>
                        <button (click)="closeForm()" class="button-navigation"
                                title="{{'ebwebApp.outWard.tooltipBack' | translate}}"><i
                            class="mdi mdi-window-close"></i> <span
                            jhiTranslate="ebwebApp.common.close"> đóng </span></button>
                    </div>
                </div>
                <div class="tool-navbar">
                    <div class="row">
                        <div class="col-lg-5">
                            <div class="line-btn" style="margin-bottom: 4px">
                                <div class="lbtn-action">
                                    <ul class="nav nav-tabs">
                                        <li [ngClass]="val === 1 ? 'active' : ''" (click)="changeActive(1)">
                                            <a [ngClass]="val === 1 ? 'active text-white': 'text-black'" data-toggle="tab">
                                                <span jhiTranslate="ebwebApp.sAInvoice.voucher"></span>
                                            </a>
                                        </li>
                                        <li *ngIf="option1" [ngClass]="val === 2 ? 'active' : ''" (click)="changeActive(2)">
                                            <a data-toggle="tab" [ngClass]="val === 2 ? 'active text-white': 'text-black'">
                                                <span jhiTranslate="ebwebApp.sAInvoice.rsOutwardBill"></span>
                                            </a>
                                        </li>
                                        <li *ngIf="sAInvoice.typeID === 321" [ngClass]="val === 4 ? 'active' : ''"
                                            (click)="changeActive(4)">
                                            <a data-toggle="tab" [ngClass]="val === 4 ? 'active text-white': 'text-black'">
                                                <span jhiTranslate="ebwebApp.sAInvoice.Reciept"></span>
                                            </a>
                                        </li>
                                        <li *ngIf="sAInvoice.typeID === 322" [ngClass]="val === 5 ? 'active' : ''"
                                            (click)="changeActive(5)">
                                            <a data-toggle="tab" [ngClass]="val === 5 ? 'active text-white': 'text-black'">
                                                <span jhiTranslate="ebwebApp.sAInvoice.Deposit"></span>
                                            </a>
                                        </li>
                                        <li *ngIf="option2" [ngClass]="val === 3 ? 'active' : ''" (click)="changeActive(3)">
                                            <a data-toggle="tab" [ngClass]="val === 3 ? 'active text-white': 'text-black'">
                                                <span jhiTranslate="ebwebApp.common.bill" name="bill"></span>
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-7">
                            <div class="row" style="justify-content: flex-end;">
                                <label class="form-check-label common-label" for="field_typeID"
                                       jhiTranslate="ebwebApp.sAInvoice.typePayment"></label>
                                <div class="col-lg-auto">
                                    <select name="exported" id="field_typeID" class="form-control form-control-sm common-select" style="max-width: 100% !important;"
                                            [(ngModel)]="sAInvoice.typeID"
                                            [class.disable]="!isEdit" (ngModelChange)="changeTypePayment()">
                                        <option [ngValue]="320" jhiTranslate="global.paymentMethod.non"></option>
                                        <option [ngValue]="321" selected jhiTranslate="global.paymentMethod.cash"></option>
                                        <option [ngValue]="322" jhiTranslate="global.paymentMethod.transfer"></option>
                                    </select>
                                </div>
                                <label class="form-check-label common-label" for="field_exported"
                                       jhiTranslate="ebwebApp.sAInvoice.sell"
                                ></label>
                                <div class="col-lg-auto">
                                    <select name="exported" id="field_exported" class="form-control form-control-sm common-select" style="max-width: 100% !important;"
                                            [(ngModel)]="sAInvoice.exported"
                                            [class.disable]="!isEdit" (ngModelChange)="changeTypeSell()">
                                        <option [ngValue]="false" selected jhiTranslate="ebwebApp.pPInvoice.domestic">Trong nước
                                        </option>
                                        <option [ngValue]="true" jhiTranslate="ebwebApp.sAInvoice.export">Nhập khẩu</option>
                                    </select>
                                </div>
                                <div class="col-lg-auto">
                                    <div class="custom-control custom-checkbox" (click)="checkEditKPXK()" style="padding-top: 6px">
                                        <input class="custom-control-input" type="checkbox" id="inlineCheckbox2" value="option1"
                                               name="option1"
                                               [(ngModel)]="option1" [class.eb-read-only]="!isEditKPXK" (ngModelChange)="changeTabXK()"
                                        >
                                        <label class="custom-control-label" for="inlineCheckbox2" style="font-size: 14px;" [class.eb-read-only]="!isEditKPXK"
                                               jhiTranslate="ebwebApp.sAInvoice.checkRsOutwardBill">Kiêm phiế xuất
                                            kho</label>
                                    </div>
                                </div>
                                <div class="col-lg-auto">
                                    <div class="custom-control custom-checkbox" (click)="checkEditIsBill()" style="padding-top: 6px">
                                        <input class="custom-control-input" type="checkbox" name="isBill1" id="inlineCheckbox3"
                                               value="option2" [(ngModel)]="option2" [class.eb-read-only]="sAInvoice.isExportInvoice || !isEditInvoice"
                                               (ngModelChange)="changeTabHD()">
                                        <label class="custom-control-label" for="inlineCheckbox3" style="font-size: 14px;" [class.eb-read-only]="sAInvoice.isExportInvoice || !isEditInvoice"
                                               jhiTranslate="ebwebApp.sAInvoice.invoiced">Lập kèm hóa đơn</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row no-gutters">
                    <div class="col-lg-9 pd-r-0 form-main-new">
                        <form>
                            <h3 jhiTranslate="ebwebApp.common.generalInformation">Thông tin chung</h3>
                            <div class="row" *ngIf="val === 1">
                                <div class="col-lg-12">
                                    <div class="form-group row no-gutters">
                                        <label class="col-sm-2 col-form-label" jhiTranslate="ebwebApp.common.object">Đối
                                            tượng</label>
                                        <div class="col-sm-3 padding pd-l-0 pr-0">
                                            <combo-box style=""
                                                       name="accountingObject"
                                                       [dataList]="accountingObjects"
                                                       [listColumns]="utilsService.listColumnsAccountingObjects"
                                                       displayMember="accountingObjectCode"
                                                       valueName="id"
                                                       [headerColumns]="utilsService.listHeaderColumnsAccountingObject"
                                                       [isObject]="true"
                                                       [(ngModel)]="sAInvoice.accountingObject"
                                                       (ngModelChange)="selectAccountingObjects()"
                                                       [showIconPlus]="true"
                                                       [nameCategory]="utilsService.KHACH_HANG"
                                                       (click)="saveParent()"
                                                       [tabindex]="23+1"
                                                       [isOutTable]="true">
                                            </combo-box>
                                        </div>
                                        <div class="col-sm-8 last-div-1-1">
                                            <input type="text" class="form-control form-control-sm" name="accountingObjectName"
                                                   [(ngModel)]="sAInvoice.accountingObjectName" maxlength="512"
                                                   (ngModelChange)="changeAccountingName()"
                                                   [tabindex]="23+2">
                                        </div>
                                    </div>
                                    <div class="form-group row no-gutters">
                                        <label class="col-sm-2 col-form-label" jhiTranslate="ebwebApp.common.address">Địa
                                            chỉ</label>
                                        <div class="col-sm-10 pd-l-0 last-div-1-0">
                                            <input type="text" class="form-control form-control-sm"
                                                   name="accountingObjectAddress"
                                                   [(ngModel)]="sAInvoice.accountingObjectAddress" maxlength="512"
                                                   [tabindex]="23+3">
                                        </div>
                                    </div>
                                    <div class="form-group row no-gutters">
                                        <label class="col-sm-2 col-form-label" jhiTranslate="ebwebApp.common.taxCode">Mã số
                                            thuế</label>
                                        <div class="col-sm-3 pd-l-0 pr-0">
                                            <input type="text" class="form-control form-control-sm" name="textCode"
                                                   [(ngModel)]="sAInvoice.companyTaxCode" maxlength="50"
                                                   [tabindex]="23+4">
                                        </div>
                                        <label class="col-sm-2 col-form-label"
                                               jhiTranslate="ebwebApp.sAInvoice.contactName">Người nhận hàng</label>
                                        <div class="col-sm-6 pd-l-0 last-div-2-1">
                                            <input type="text" class="form-control form-control-sm" name="contactName"
                                                   [(ngModel)]="sAInvoice.contactName" maxlength="512"
                                                   [tabindex]="23+5">
                                        </div>
                                    </div>
                                    <div class="form-group row no-gutters">
                                        <label class="col-sm-2 col-form-label" jhiTranslate="ebwebApp.sAInvoice.reason">Diễn
                                            giải</label>
                                        <div class="col-sm-10 pd-l-0 last-div-1-0">
                                            <input type="text" class="form-control form-control-sm" name="reasonQ"
                                                   maxlength="512" [(ngModel)]="sAInvoice.reason" (change)="changeReason()"
                                                   [tabindex]="23+6">
                                        </div>
                                    </div>
                                    <div class="form-group row no-gutters">
                                        <label class="col-sm-2 col-form-label"
                                               jhiTranslate="ebwebApp.sAInvoice.employeeID">
                                            Nhân viên thực hiện</label>
                                        <combo-box style="" class="col-sm-3 pd-l-0 pr-0"
                                                   name="employee"
                                                   [dataList]="employees"
                                                   [listColumns]="utilsService.listColumnsEmployees"
                                                   displayMember="accountingObjectCode"
                                                   valueName="id"
                                                   [headerColumns]="utilsService.listHeaderColumnsEmployees"
                                                   [isObject]="false"
                                                   [(ngModel)]="sAInvoice.employeeID"
                                                   [showIconPlus]="true"
                                                   [nameCategory]="utilsService.NHAN_VIEN"
                                                   (click)="saveParent()"
                                                   [tabindex]="23+11"
                                                   [isOutTable]="true">
                                        </combo-box>
                                        <label class="col-sm-2 col-form-label-custom"
                                               jhiTranslate="ebwebApp.sAInvoice.paymentClauseID">
                                            Điều khoản TT</label>
                                        <combo-box style="" class="col-sm-2 pd-l-0 pr-0" id="paymentClause"
                                                   name="paymentClause"
                                                   [dataList]="paymentClauses"
                                                   [listColumns]="utilsService.listColumnsPaymentClause"
                                                   displayMember="paymentClauseCode"
                                                   valueName="id"
                                                   [headerColumns]="utilsService.listHeaderPaymentClause"
                                                   [isObject]="true"
                                                   [(ngModel)]="paymentClause"
                                                   (ngModelChange)="selectChangePaymentClause()"
                                                   [tabindex]="23+12"
                                                   [isOutTable]="true">
                                        </combo-box>
                                        <label class="col-sm-2 col-form-label">
                                            <span jhiTranslate="ebwebApp.saReturn.dueDate"></span>
                                        </label>
                                        <div class="col-sm-2 last-div-3-2-custom">
                                            <eb-date-picker [(ngModel)]="sAInvoice.dueDate"
                                                            name="field_dueDate"
                                                            [tabindex]="23+13"></eb-date-picker>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row" *ngIf="val === 2">
                                <div class="col-lg-12">
                                    <div class="form-group row no-gutters">
                                        <label class="col-sm-2 col-form-label" jhiTranslate="ebwebApp.common.object">Đối
                                            tượng</label>
                                        <div class="col-sm-3 padding pd-l-0 pr-0">
                                            <combo-box style=""
                                                       name="accountingObject"
                                                       [dataList]="accountingObjects"
                                                       [listColumns]="utilsService.listColumnsAccountingObjects"
                                                       displayMember="accountingObjectCode"
                                                       valueName="id"
                                                       [headerColumns]="utilsService.listHeaderColumnsAccountingObject"
                                                       [isObject]="true"
                                                       [(ngModel)]="sAInvoice.accountingObject"
                                                       (ngModelChange)="selectAccountingObjects()"
                                                       [showIconPlus]="true"
                                                       [nameCategory]="utilsService.KHACH_HANG"
                                                       (click)="saveParent()"
                                                       [tabindex]="23+1"
                                                       [isOutTable]="true">
                                            </combo-box>
                                        </div>
                                        <div class="col-sm-8 pl-10 last-div-1-1">
                                            <input type="text" class="form-control form-control-sm" name="accountingObjectName"
                                                   [(ngModel)]="sAInvoice.accountingObjectName" maxlength="512"
                                                   [tabindex]="23+2">
                                        </div>
                                    </div>
                                    <div class="form-group row no-gutters">
                                        <label class="col-sm-2 col-form-label" jhiTranslate="ebwebApp.common.address">Địa
                                            chỉ</label>
                                        <div class="col-sm-10 pd-l-0 last-div-1-0">
                                            <input type="text" class="form-control form-control-sm"
                                                   name="accountingObjectAddress"
                                                   [(ngModel)]="sAInvoice.accountingObjectAddress" maxlength="512"
                                                   [tabindex]="23+3">
                                        </div>
                                    </div>
                                    <div class="form-group row no-gutters">
                                        <label class="col-sm-2 col-form-label" jhiTranslate="ebwebApp.common.taxCode">Mã số
                                            thuế</label>
                                        <div class="col-sm-3 pd-l-0 pr-0">
                                            <input type="text" class="form-control form-control-sm" name="textCode"
                                                   [(ngModel)]="sAInvoice.companyTaxCode" maxlength="50"
                                                   [tabindex]="23+4">
                                        </div>
                                        <label class="col-sm-2 col-form-label"
                                               jhiTranslate="ebwebApp.sAInvoice.contactName">Người nhận hàng</label>
                                        <div class="col-sm-6 pd-l-0 last-div-2-1">
                                            <input type="text" class="form-control form-control-sm" name="contactName"
                                                   [(ngModel)]="sAInvoice.contactName" maxlength="512"
                                                   [tabindex]="23+5">
                                        </div>
                                    </div>
                                    <div class="form-group row no-gutters">
                                        <label class="col-sm-2 col-form-label"
                                               jhiTranslate="ebwebApp.sAInvoice.reasonForExport">Diễn
                                            giải</label>
                                        <div class="col-sm-10 pd-l-0 last-div-1-0">
                                            <input type="text" class="form-control form-control-sm" name="reason"
                                                   maxlength="512" [(ngModel)]="rsInwardOutward.reason" (change)="changeReasonXK()"
                                                   [tabindex]="23+6">
                                        </div>
                                    </div>
                                    <div class="form-group row no-gutters">
                                        <label class="col-sm-2 col-form-label"
                                               jhiTranslate="ebwebApp.sAInvoice.numberAttach">kèm theo</label>
                                        <div class="col-sm-10 pd-l-0 last-div-1-0">
                                            <input type="text" class="form-control form-control-sm" name="numberAttach"
                                                   [(ngModel)]="rsInwardOutward.numberAttach"
                                                   [tabindex]="23+7">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row" *ngIf="val === 3">
                                <div class="col-lg-12">
                                    <div class="form-group row no-gutters">
                                        <label class="col-sm-2 col-form-label" jhiTranslate="ebwebApp.common.object">Đối
                                            tượng</label>
                                        <combo-box class="col-sm-3 pd-l-0 pr-0" id="field_creditCardx"
                                                   name="accountingObject"
                                                   [dataList]="accountingObjects"
                                                   [listColumns]="utilsService.listColumnsAccountingObjects"
                                                   displayMember="accountingObjectCode"
                                                   valueName="id"
                                                   [headerColumns]="utilsService.listHeaderColumnsAccountingObject"
                                                   [isObject]="true"
                                                   [isOutTable]="true"
                                                   [(ngModel)]="sAInvoice.accountingObject"
                                                   (ngModelChange)="selectAccountingObjects()"
                                                   [showIconPlus]="true"
                                                   [nameCategory]="utilsService.KHACH_HANG"
                                                   (click)="saveParent()"
                                                   [tabindex]="23+1">
                                        </combo-box>
                                        <div class="col-sm-8 pl-10 last-div-1-1">
                                            <input type="text" class="form-control form-control-sm" name="accountingObjectName"
                                                   [(ngModel)]="sAInvoice.accountingObjectName" maxlength="512"
                                                   [tabindex]="23+2">
                                        </div>
                                    </div>
                                    <div class="form-group row no-gutters">
                                        <label class="col-sm-2 col-form-label" jhiTranslate="ebwebApp.common.address">Địa
                                            chỉ</label>
                                        <div class="col-sm-10 pd-l-0 last-div-1-0">
                                            <input type="text" class="form-control form-control-sm"
                                                   name="accountingObjectAddress" maxlength="512"
                                                   [(ngModel)]="sAInvoice.accountingObjectAddress"
                                                   [tabindex]="23+3">
                                        </div>
                                    </div>
                                    <div class="form-group row no-gutters">
                                        <label class="col-sm-2 col-form-label" jhiTranslate="ebwebApp.common.taxCode">Mã số
                                            thuế</label>
                                        <div class="col-sm-3 pd-l-0 pr-0">
                                            <input type="text" class="form-control form-control-sm" name="textCode"
                                                   maxlength="50" [(ngModel)]="sAInvoice.companyTaxCode"
                                                   [tabindex]="23+4">
                                        </div>
                                        <label class="col-sm-2 col-form-label">Số tài khoản</label>
                                        <div class="col-sm-2 pd-l-0">
                                            <combo-box style="" class="col-sm-4 pl-0" id="accountingObjectBankAccount1"
                                                       name="accountingObjectBankAccount"
                                                       [dataList]="bankAccountDetails"
                                                       [listColumns]="utilsService.listColumnsAccountingObjectBankAccount"
                                                       [isOutTable]="true"
                                                       displayMember="bankAccount"
                                                       valueName="id"
                                                       [headerColumns]="['Tải khoản','Ngân hàng']"
                                                       [isObject]="true"
                                                       [(ngModel)]="accountingObjectBankAccount"
                                                       (ngModelChange)="selectAccountingObjectBankAccount()"
                                                       [tabindex]="23+5">
                                            </combo-box>
                                        </div>
                                        <label class="col-sm-2 col-form-label"
                                               for="accountingObjectBankName">Tên ngân hàng</label>
                                        <div class="col-sm-2 last-div-3-2">
                                            <input type="text" class="form-control form-control-sm"
                                                   name="accountingObjectBankName"
                                                   id="accountingObjectBankName"
                                                   [(ngModel)]="saBill.accountingObjectBankName"
                                                   maxlength="512"
                                                   [tabindex]="23+6"/>
                                        </div>
                                    </div>
                                    <div class="form-group row no-gutters">
                                        <label class="col-sm-2 col-form-label"
                                               jhiTranslate="ebwebApp.sAInvoice.contactName">Người liên hệ</label>
                                        <div class="col-sm-3 pd-l-0 pr-0">
                                            <input type="text" class="form-control form-control-sm" name="contactName"
                                                   maxlength="512" [(ngModel)]="sAInvoice.contactName"
                                                   [tabindex]="23+7">
                                        </div>
                                        <label class="col-sm-2 col-form-label-custom"
                                               jhiTranslate="ebwebApp.sAInvoice.paymentClauseID">
                                            Điều khoản TT</label>
                                        <div class="col-sm-2 pd-l-0">
                                            <combo-box style="" class="col-sm-12 pl-0" id="paymentClause2"
                                                       name="paymentClause"
                                                       [dataList]="paymentClauses"
                                                       [listColumns]="utilsService.listColumnsPaymentClause"
                                                       [isOutTable]="true"
                                                       displayMember="paymentClauseCode"
                                                       valueName="id"
                                                       [headerColumns]="utilsService.listHeaderPaymentClause"
                                                       [isObject]="true"
                                                       [(ngModel)]="paymentClause"
                                                       (ngModelChange)="selectChangePaymentClause()"
                                                       [tabindex]="23+8">
                                            </combo-box>
                                        </div>
                                        <label class="col-sm-2 col-form-label">
                                            <span jhiTranslate="ebwebApp.saReturn.dueDate"></span>
                                        </label>
                                        <div class="col-sm-2 pd-l-0 last-div-3-2-custom">
                                            <eb-date-picker [(ngModel)]="sAInvoice.dueDate"
                                                            name="field_dueDate1"
                                                            [tabindex]="23+9"></eb-date-picker>
                                        </div>
                                    </div>
                                    <div class="form-group row no-gutters">
                                        <label class="col-sm-2 col-form-label" jhiTranslate="ebwebApp.sAInvoice.reason">Diễn
                                            giải</label>
                                        <div class="col-sm-10 padding pd-l-0 last-div-1-0">
                                            <input type="text" class="form-control form-control-sm" name="reason"
                                                   maxlength="512"
                                                   [(ngModel)]="saBill.reason"
                                                   (change)="changeReasonBill()"
                                                   [tabindex]="23+10">
                                        </div>
                                    </div>
                                    <div class="form-group row no-gutters">
                                        <label class="col-sm-2 col-form-label"
                                               jhiTranslate="ebwebApp.saBill.printWith"
                                               for="field_printWith1">printWith</label>
                                        <div class="col-sm-3 pd-l-0 form-inline">
                                            <div class="custom-control custom-checkbox">
                                                <input type="checkbox" class="custom-control-input noSetDisable" id="field_printWith1" name="printWith"
                                                       [(ngModel)]="sAInvoice.isAttachList"
                                                       (ngModelChange)="changeIsAttachList()"
                                                       [disabled]="!isEdit"
                                                       [tabindex]="23+11">
                                                <label class="custom-control-label" for="field_printWith1"></label>
                                            </div>
                                            <label class="col-form-label" style="padding-left: 8px; padding-right: 8px"
                                                   jhiTranslate="ebwebApp.saBill.no"
                                                   for="field_no1">no</label>
                                            <input type="text" class="form-control form-control-sm noSetDisable" name="no"
                                                   id="field_no1" [disabled]="!sAInvoice.isAttachList || !isEdit" style="width: calc(100% - 57px)"
                                                   [(ngModel)]="sAInvoice.listNo" maxlength="512"
                                                   [tabindex]="23+12"/>
                                        </div>
                                        <label class="col-sm-2 col-form-label"
                                               jhiTranslate="ebwebApp.saBill.date"></label>
                                        <div class="col-sm-2" style="padding-right: 1px;">
                                            <eb-date-picker [(ngModel)]="sAInvoice.listDate" name="field_date" class="noSetDisable"
                                                            [class.myreadonlytrue]="!sAInvoice.isAttachList"
                                                            [disabled]="!isEdit"
                                                            [tabindex]="23+13"></eb-date-picker>
                                        </div>
                                        <label class="col-sm-2 col-form-label"
                                               jhiTranslate="ebwebApp.saBill.listCommonNameInventory"
                                               for="field_listCommonNameInventory1">istCommonNameInventory</label>
                                        <div class="col-sm-4 pd-l-0 last-div-3-2">
                                            <input type="text" class="form-control form-control-sm noSetDisable" name="istCommonNameInventory"
                                                   id="field_listCommonNameInventory1" [disabled]="!sAInvoice.isAttachList || !isEdit"
                                                   [(ngModel)]="sAInvoice.listCommonNameInventory" maxlength="512"
                                                   [tabindex]="23+14"/>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row" *ngIf="val === 4">
                                <div class="col-lg-12">
                                    <div class="form-group row no-gutters">
                                        <label class="col-sm-2 col-form-label"
                                               jhiTranslate="ebwebApp.mCReceipt.accountingObject"
                                               for="field_accountingObject4">Accounting Object</label>
                                        <div class="col-sm-3 pd-l-0">
                                            <combo-box id="field_accountingObject4"
                                                       name="accountingObject4"
                                                       [dataList]="accountingObjects"
                                                       [isOutTable]="true"
                                                       [listColumns]="utilsService.listColumnsAccountingObjects"
                                                       displayMember="accountingObjectCode"
                                                       valueName="id"
                                                       [headerColumns]="utilsService.listHeaderColumnsAccountingObject"
                                                       [isObject]="true"
                                                       [(ngModel)]="sAInvoice.accountingObject"
                                                       (ngModelChange)="selectAccountingObjects()"
                                                       [showIconPlus]="true"
                                                       [nameCategory]="utilsService.KHACH_HANG"
                                                       [tabindex]="23+1">
                                            </combo-box>
                                        </div>
                                        <div class="col-sm-7 pd-l-0 last-div-1-1">
                                            <input type="text" class="form-control form-control-sm"
                                                   name="accountingObjectName"
                                                   [(ngModel)]="sAInvoice.accountingObjectName" maxlength="512"
                                                   [tabindex]="23+2"/>
                                        </div>
                                    </div>
                                    <div class="form-group row no-gutters">
                                        <label class="col-sm-2 col-form-label"
                                               jhiTranslate="ebwebApp.mCReceipt.accountingObjectAddress"
                                               for="field_accountingObjectAddress4">Accounting Object Address</label>
                                        <div class="col-sm-10 pd-l-0 last-div-1-0">
                                            <input type="text" class="form-control form-control-sm"
                                                   name="accountingObjectAddress4"
                                                   id="field_accountingObjectAddress4"
                                                   [(ngModel)]="sAInvoice.accountingObjectAddress"
                                                   maxlength="512"
                                                   [tabindex]="23+3">
                                        </div>
                                    </div>
                                    <div class="form-group row no-gutters">
                                        <label class="col-sm-2 col-form-label"
                                               jhiTranslate="ebwebApp.mCReceipt.taxCode">Mã số thuế</label>
                                        <div class="col-sm-3 pd-l-0">
                                            <input type="text" class="form-control form-control-sm" name="taxCode4"
                                                   [(ngModel)]="sAInvoice.companyTaxCode"
                                                   [tabindex]="23+4">
                                        </div>
                                        <label class="col-sm-2 col-form-label"
                                               jhiTranslate="ebwebApp.mCReceipt.payers"
                                               for="field_payers4">Payers</label>
                                        <div class="col-sm-5 pd-l-0 last-div-2-1">
                                            <input type="text" class="form-control form-control-sm" name="payers4"
                                                   id="field_payers4"
                                                   [(ngModel)]="mCReceipt.payers" maxlength="512"
                                                   [tabindex]="23+5"/>
                                        </div>
                                    </div>
                                    <div class="form-group row no-gutters">
                                        <label class="col-sm-2 col-form-label"
                                               jhiTranslate="ebwebApp.mCReceipt.reason"
                                               for="field_reason4">Diễn giải</label>
                                        <div class="col-sm-3 pd-l-0 pd-r-10">
                                            <combo-box style="" id="field_reason4"
                                                       name="comboboxreason4"
                                                       [dataList]="autoPrinciples"
                                                       [isOutTable]="true"
                                                       [listColumns]="utilsService.listColumnsAutoPrinciple"
                                                       displayMember="autoPrincipleName"
                                                       valueName="autoPrincipleName"
                                                       [headerColumns]="utilsService.listHeaderColumnsAutoPrinciple"
                                                       [isObject]="true"
                                                       [(ngModel)]="autoPrinciple"
                                                       (ngModelChange)="selectAutoPrinciple()"
                                                       [tabindex]="23+6">
                                            </combo-box>
                                        </div>
                                        <div class="col-sm-7 pd-l-0 last-div-1-1">
                                            <input type="text" class="form-control form-control-sm" name="reason"
                                                   id="field_reason"
                                                   [(ngModel)]="mCReceipt.reason"
                                                   (change)="changeReasonPT()"
                                                   maxlength="512"
                                                   [tabindex]="23+7"/>
                                        </div>
                                    </div>
                                    <div class="form-group row no-gutters">
                                        <label class="col-sm-2 col-form-label"
                                               jhiTranslate="ebwebApp.sAInvoice.employeeID" for="field_employeeID4">Nhân
                                            viên thực hiện</label>
                                        <div class="col-sm-3 pd-l-0">
                                            <combo-box style="" id="field_employeeID4"
                                                       name="comboboxEmployees4"
                                                       [dataList]="employees"
                                                       [isOutTable]="true"
                                                       [nameCategory]="utilsService.NHAN_VIEN"
                                                       [showIconPlus]="true"
                                                       [listColumns]="utilsService.listColumnsEmployees"
                                                       displayMember="accountingObjectCode"
                                                       valueName="id"
                                                       [headerColumns]="utilsService.listHeaderColumnsEmployees"
                                                       [isObject]="false"
                                                       [(ngModel)]="sAInvoice.employeeID"
                                                       (click)="saveParent()"
                                                       [tabindex]="23+8"
                                            ></combo-box>
                                        </div>
                                        <label class="col-sm-2 col-form-label"
                                               jhiTranslate="ebwebApp.mCReceipt.numberAttach" for="number_attach4">Kèm
                                            theo</label>
                                        <div class="col-sm-5 pd-l-0 last-div-2-1">
                                            <input type="text" class="form-control form-control-sm"
                                                   id="number_attach4"
                                                   [(ngModel)]="mCReceipt.numberAttach"
                                                   name="numberAttach"
                                                   [tabindex]="23+9"
                                            />
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row" *ngIf="val === 5">
                                <div class="col-lg-12">
                                    <div class="form-group row no-gutters">
                                        <label class="col-sm-2 col-form-label" for="field_accountingObject5"
                                               jhiTranslate="ebwebApp.mBDeposit.accountingObjectID"></label>
                                        <div class="col-sm-3 pd-l-0">
                                            <combo-box id="field_accountingObject5"
                                                       name="accountingObject5"
                                                       [dataList]="accountingObjects"
                                                       [listColumns]="utilsService.listColumnsAccountingObjects"
                                                       displayMember="accountingObjectCode"
                                                       valueName="id"
                                                       [headerColumns]="utilsService.listHeaderColumnsAccountingObject"
                                                       [isObject]="true"
                                                       [isOutTable]="true"
                                                       [(ngModel)]="sAInvoice.accountingObject"
                                                       (ngModelChange)="selectAccountingObjects()"
                                                       [showIconPlus]="true"
                                                       [nameCategory]="utilsService.KHACH_HANG"
                                                       (click)="saveParent()"
                                                       [tabindex]="23+1">
                                            </combo-box>
                                        </div>
                                        <div class="col-sm-7 pd-l-0 last-div-1-1">
                                            <input type="text" class="form-control form-control-sm"
                                                   name="accountingObjectName5"
                                                   [(ngModel)]="sAInvoice.accountingObjectName"
                                                   maxlength="512"
                                                   [tabindex]="23+2"/>
                                        </div>
                                    </div>
                                    <div class="form-group row no-gutters">
                                        <label class="col-sm-2 col-form-label"
                                               jhiTranslate="ebwebApp.mBDeposit.accountingObjectAddress"></label>
                                        <div class="col-sm-10 pd-l-0 last-div-1-0">
                                            <input type="text" class="form-control form-control-sm"
                                                   name="accountingObjectAddress5"
                                                   [(ngModel)]="sAInvoice.accountingObjectAddress"
                                                   maxlength="512"
                                                   [tabindex]="23+3"/>
                                        </div>
                                    </div>
                                    <div class="form-group row no-gutters">
                                        <label class="col-sm-2 col-form-label" for="field_bankAccountDetailID5"
                                               jhiTranslate="ebwebApp.mBDeposit.bankAccountDetailID"></label>
                                        <div class="col-sm-3 pd-l-0">
                                            <combo-box style="" id="field_bankAccountDetailID5"
                                                       name="comboboxBankAccountDetailID5"
                                                       [dataList]="bankAccountDetails"
                                                       [isOutTable]="true"
                                                       [nameCategory]="utilsService.TAI_KHOAN_NGAN_HANG"
                                                       [showIconPlus]="true"
                                                       [listColumns]="utilsService.listColumnsBank"
                                                       displayMember="bankAccount"
                                                       valueName="id"
                                                       [headerColumns]="utilsService.listHeaderColumnsBank"
                                                       [isObject]="false"
                                                       [(ngModel)]="mBDeposit.bankAccountDetailID"
                                                       (ngModelChange)="selectChangeBank()"
                                                       (click)="saveParent()"
                                                       [tabindex]="23+4">
                                            </combo-box>
                                        </div>
                                        <div class="col-sm-7 pd-l-0 last-div-1-1">
                                            <input type="text" class="form-control form-control-sm"
                                                   name="bankName5"
                                                   [(ngModel)]="mBDeposit.bankName"
                                                   maxlength="512"
                                                   [tabindex]="23+5"/>
                                        </div>
                                    </div>
                                    <div class="form-group row no-gutters">
                                        <label class="col-sm-2 col-form-label" for="field_reason5"
                                               jhiTranslate="ebwebApp.mBDeposit.reason"></label>
                                        <div class="col-sm-3 pd-l-0">
                                            <combo-box style="" id="field_reason5"
                                                       name="comboboxreason"
                                                       [dataList]="autoPrinciples"
                                                       [isOutTable]="true"
                                                       [listColumns]="utilsService.listColumnsAutoPrinciple"
                                                       displayMember="autoPrincipleName"
                                                       valueName="autoPrincipleName"
                                                       [headerColumns]="utilsService.listHeaderColumnsAutoPrinciple"
                                                       [isObject]="true"
                                                       [(ngModel)]="autoPrinciple"
                                                       (ngModelChange)="selectAutoPrinciple()"
                                                       [tabindex]="23+6">
                                            </combo-box>
                                        </div>
                                        <div class="col-sm-7 pd-l-0 last-div-1-1">
                                            <input type="text" class="form-control form-control-sm"
                                                   name="reason5"
                                                   [(ngModel)]="mBDeposit.reason"
                                                   (change)="changeReasonBC()"
                                                   maxlength="512"
                                                   [tabindex]="23+7"/>
                                        </div>
                                    </div>
                                    <div class="form-group row no-gutters">
                                        <label class="col-sm-2 col-form-label" style="padding-right: 0px"
                                               for="field_employees5" jhiTranslate="ebwebApp.sAInvoice.employeeID"></label>
                                        <div class="col-sm-3 pd-l-0">
                                            <combo-box style="" id="field_employees5"
                                                       name="comboboxemployeeID"
                                                       [dataList]="employees"
                                                       [isOutTable]="true"
                                                       [nameCategory]="utilsService.NHAN_VIEN"
                                                       [showIconPlus]="true"
                                                       [listColumns]="utilsService.listColumnsEmployees"
                                                       displayMember="accountingObjectCode"
                                                       valueName="id"
                                                       [headerColumns]="utilsService.listHeaderColumnsEmployees"
                                                       [isObject]="false"
                                                       [(ngModel)]="sAInvoice.employeeID"
                                                       (click)="saveParent()"
                                                       [tabindex]="23+8"
                                            ></combo-box>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="col-lg-4 pd-only-l-10 form-main-new">
                        <form style="padding-bottom: 8px" *ngIf="val !== 3">
                            <h3 jhiTranslate="ebwebApp.common.license">Chứng từ</h3>
                            <div class="row">
                                <div class="col-lg-12">
                                    <div class="form-group row no-gutters">
                                        <label class="col-sm-4 col-form-label" jhiTranslate="ebwebApp.sAInvoice.noFBook">Số
                                            chứng từ</label>
                                        <div class="col-sm-8 pd-l-0 last-div-1-0">
                                            <input *ngIf="val === 1" type="text" class="form-control form-control-sm" name="noFBook1"
                                                   [(ngModel)]="noBookVoucher" required (ngModelChange)="checknoFBook()"
                                                   [tabindex]="23+15">
                                            <input *ngIf="val === 2" type="text" class="form-control form-control-sm" name="noFBook2"
                                                   [(ngModel)]="noBookRSI" required (ngModelChange)="checknoFBook()"
                                                   [tabindex]="23+15">
                                            <input *ngIf="val === 4" type="text" class="form-control form-control-sm" name="noFBook4"
                                                   [(ngModel)]="noMCReceipt" required (ngModelChange)="checknoFBook()"
                                                   [tabindex]="23+15">
                                            <input *ngIf="val === 5" type="text" class="form-control form-control-sm" name="noFBook5"
                                                   [(ngModel)]="noMBDeposit" required (ngModelChange)="checknoFBook()"
                                                   [tabindex]="23+15">
                                        </div>
                                    </div>
                                    <div class="form-group row no-gutters">
                                        <label class="col-sm-4 col-form-label"
                                               jhiTranslate="ebwebApp.mBDeposit.date"></label>
                                        <div class="col-sm-8 last-div-1-0">
                                            <eb-date-picker [(ngModel)]="sAInvoice.date" name="field_date"
                                                            [isRequired]="true" (ngModelChange)="changeDate()"
                                                            [tabindex]="23+16"></eb-date-picker>
                                        </div>
                                    </div>
                                    <div class="form-group row no-gutters">
                                        <label class="col-sm-4 col-form-label"
                                               jhiTranslate="ebwebApp.mBDeposit.postedDate"></label>
                                        <div class="col-sm-8 last-div-1-0">
                                            <eb-date-picker [(ngModel)]="sAInvoice.postedDate" name="field_postedDate"
                                                            [isRequired]="true"
                                                            [tabindex]="23+17"></eb-date-picker>
                                        </div>
                                    </div>
                                    <div class="form-group row no-gutters">
                                        <label class="col-sm-4 col-form-label"
                                               jhiTranslate="ebwebApp.sAInvoice.currencyID">Loại
                                            tiền</label>
                                        <div class="col-sm-3 pd-l-0">
                                            <combo-box id="currency2"
                                                       name="currency2"
                                                       [dataList]="currencys"
                                                       [listColumns]="utilsService.listColumnsCurrency"
                                                       [isOutTable]="true"
                                                       displayMember="currencyCode"
                                                       valueName="currencyCode"
                                                       [headerColumns]="utilsService.listHeaderColumnsCurrency"
                                                       [isObject]="false"
                                                       [(ngModel)]="sAInvoice.currencyID"
                                                       [isRequired]="true"
                                                       (ngModelChange)="selectCurrencyObjects()"
                                                       [tabindex]="23+18">
                                            </combo-box>
                                        </div>
                                        <label class="col-sm-2 col-form-label"
                                               jhiTranslate="ebwebApp.sAInvoice.exchangeRate">Tỷ giá</label>
                                        <div class="col-sm-3 pd-l-0 last-div-2-1">
                                            <input type="text" class="form-control form-control-sm text-right noSetDisable"
                                                   name="exchangeRate"
                                                   [(ngModel)]="sAInvoice.exchangeRate" ebCurrencyMask
                                                   [systemOptions]="account?.systemOption" [type]="4"
                                                   (ngModelChange)="changeExchangeRate()"
                                                   [disabled]="sAInvoice.currencyID === currencyCode || !isEdit"
                                                   [tabindex]="23+19">
                                        </div>
                                    </div>
                                    <div class="form-group row no-gutters" *ngIf="authoritiesNoMBook">
                                        <label class="col-sm-4 col-form-label"
                                               jhiTranslate="ebwebApp.sAInvoice.typeLedger">Vào
                                            sổ</label>
                                        <div class="col-sm-8 pd-l-0 last-div-1-0">
                                            <select class="form-control" name="typeLedger" id="typeLedger"
                                                    [(ngModel)]="sAInvoice.typeLedger"
                                                    [tabindex]="23+20"
                                                    (keydown.tab)="sAInvoiceDetails.length === 0 ? addNewRow() : null">
                                                <option [value]="0" *ngIf="!sessionWork"
                                                        jhiTranslate="ebwebApp.mBDeposit.financialBook">Sổ tài chính
                                                </option>
                                                <option [value]="1" *ngIf="sessionWork"
                                                        jhiTranslate="ebwebApp.mBDeposit.managementBook">Sổ quản trị
                                                </option>
                                                <option [value]="2"
                                                        jhiTranslate="ebwebApp.mBDeposit.bothBooks">Cả 2 sổ
                                                </option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                        <form *ngIf="val === 3">
                            <h3 jhiTranslate="ebwebApp.saBill.invoice.title">Hóa đơn</h3>
                            <div class="row">
                                <div class="col-lg-12">
                                    <div class="form-group row no-gutters">
                                        <label class="col-sm-4 col-form-label"
                                               jhiTranslate="ebwebApp.saBill.invoice.template"></label>
                                        <div class="col-sm-8 pd-l-0 last-div-1-0">
                                            <combo-box id="field_template"
                                                       name="template"
                                                       [dataList]="templates"
                                                       [isOutTable]="true"
                                                       [listColumns]="['invoiceFormName', 'invoiceTemplate', 'invoiceSeries']"
                                                       displayMember="invoiceTemplate"
                                                       valueName="invoiceTypeID"
                                                       [headerColumns]="['Hình thức HĐ','Mẫu số HĐ', 'Ký hiệu HĐ']"
                                                       [isObject]="true"
                                                       [(ngModel)]="template"
                                                       [isRequired]="true"
                                                       (ngModelChange)="selectTemplate()"
                                                       [tabindex]="23+15"
                                            ></combo-box>
                                        </div>
                                    </div>
                                    <div class="form-group row no-gutters">
                                        <label class="col-sm-4 col-form-label"
                                               jhiTranslate="ebwebApp.saBill.invoice.series"></label>
                                        <div class="col-sm-8 pd-l-0 last-div-1-0">
                                            <input type="text" [(ngModel)]="sAInvoice.invoiceSeries" readonly
                                                   class="form-control form-control-sm" name="invoiceSeries"
                                                   [tabindex]="23+16">
                                        </div>
                                    </div>
                                    <div class="form-group row no-gutters">
                                        <label class="col-sm-4 col-form-label"
                                               jhiTranslate="ebwebApp.saBill.invoice.no"></label>
                                        <div class="col-sm-8 pd-l-0 last-div-1-0">
                                            <input type="text" [(ngModel)]="sAInvoice.invoiceNo" ebNumeric
                                                   class="form-control form-control-sm noSetDisable" name="invoiceNo" maxlength="7"
                                                   autocomplete="off" style="background-color: white!important;"
                                                   [class.myreadonlytrue]="!isRequiredInvoiceNo && sAInvoice.invoiceForm === 0"
                                                   [disabled]="!this.isEdit"
                                                   (blur)="checkInvoiceNo()"
                                                   [required]="checkRequiredInvoiceNo()"
                                                   [tabindex]="23+17">
                                        </div>
                                    </div>
                                    <div class="form-group row no-gutters">
                                        <label class="col-sm-4 col-form-label"
                                               jhiTranslate="ebwebApp.saBill.invoice.date"></label>
                                        <div class="col-sm-7 last-div-1-0">
                                            <eb-date-picker [(ngModel)]="saBill.refDateTime" name="field_date"
                                                            [isRequired]="sAInvoice.isBill"
                                                            [isTime]="true"
                                                            [isSecond]="true"
                                                            (ngModelChange)="setInvoiceDate()"
                                                            [tabindex]="23+18"></eb-date-picker>
                                        </div>
                                    </div>
                                    <div class="form-group row no-gutters">
                                        <label class="col-sm-4 col-form-label"
                                               jhiTranslate="ebwebApp.saBill.invoice.paymentMethod"></label>
                                        <div class="col-sm-8 pd-l-0 last-div-1-0">
                                            <combo-box
                                                [dataList]="paymentMethod"
                                                [listColumns]="['data']"
                                                displayMember="data"
                                                valueName="data"
                                                [headerColumns]="['Dữ liệu']"
                                                [isObject]="false"
                                                [(ngModel)]="sAInvoice.paymentMethod"
                                                id="field_paymentMethod"
                                                name="paymentMethod"
                                                [isOutTable]="true"
                                                [getValueDisplay]="true"
                                                [isRequired]="true"
                                                [tabindex]="23+19"
                                                (keydown.tab)="sAInvoiceDetails.length === 0 ? addNewRow() : null"
                                            ></combo-box>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
                <div class="position" >
                    <div class="col-lg-12">
                        <div class="row">
                            <label class="col-sm-5 form-check-label text-right creat-from"
                                   jhiTranslate="ebwebApp.sAInvoice.getFrom">Lập từ</label>
                            <div class="col-lg-7">
                                <combo-box name="accountingObjectT" id="accountingObjectT"
                                           [dataList]="sAInvoice.isDeliveryVoucher ?
                               [{ name: ' ', value: 0},
                                { name: translateService.instant('ebwebApp.sAInvoice.SAQuote'), value: 300},
                                { name: translateService.instant('ebwebApp.sAInvoice.PPInvoice'), value: 210},
                                { name: translateService.instant('ebwebApp.sAInvoice.SAOrder'), value: 310}] :
                                [{ name: ' ', value: 0},
                                { name: translateService.instant('ebwebApp.sAInvoice.SAQuote'), value: 300},
                                { name: translateService.instant('ebwebApp.sAInvoice.PPInvoice'), value: 210},
                                { name: translateService.instant('ebwebApp.sAInvoice.SAOrder'), value: 310},
                                { name: translateService.instant('ebwebApp.sAInvoice.RSOutward'), value: 410}]"
                                           [listColumns]="utilsService.listColumnsCreateFromScene"
                                           [headerColumns]="[]"
                                           [hiddenHeader]="true"
                                           [onSelectedCallback]="true"
                                           displayMember="name"
                                           valueName="value"
                                           [(ngModel)]="createFrom"
                                           [isOutTable]="true"
                                           (ngModelChange)="onChangeCreateFrom()"
                                ></combo-box>
                            </div>
                        </div>
                    </div>
                </div>
                <ngb-tabset class="tool-navbar" (tabChange)="beforeChange($event)">
                    <ngb-tab>
                        <ng-template ngbTabTitle>
                            <span jhiTranslate="ebwebApp.mBDepositDetails.detail.title">Hàng tiền</span>
                        </ng-template>
                        <ng-template ngbTabContent>
                            <div class="tab-content">
                                <div class="frm-main frm-padding tab-pane fade in active show" id="home-detail"
                                     style="background: #cbdcf0">
                                    <div id="table-scroll-detail" class="table-scroll">
                                        <table id="main-table-detail" class="main-table"
                                               (keydown.arrowDown)="moveArrowDown($event,25)"
                                               (keydown.arrowUp)="moveArrowUp($event,25)">
                                            <thead>
                                            <tr>
                                                <th scope="col" jhiTranslate="ebwebApp.saBill.materialGoodsID">Mã hàng</th>
                                                <th scope="col" jhiTranslate="ebwebApp.saBill.materialGoodsName">Tên hàng</th>
                                                <th scope="col" jhiTranslate="ebwebApp.saBill.isPromotion">Là hàng KM</th>
                                                <th scope="col" jhiTranslate="ebwebApp.sAInvoiceDetails.repositoryID"
                                                    *ngIf="sAInvoice.isDeliveryVoucher">Kho
                                                </th>
                                                <th scope="col" jhiTranslate="ebwebApp.sAInvoiceDetails.debitAccount">TK Nợ</th>
                                                <th scope="col" jhiTranslate="ebwebApp.sAInvoiceDetails.creditAccount">TK Có
                                                </th>
                                                <th scope="col"
                                                    jhiTranslate="ebwebApp.sAInvoiceDetails.accountingObjectID"></th>
                                                <th scope="col" jhiTranslate="ebwebApp.saBill.unit">Đơn vị tính</th>
                                                <th scope="col" jhiTranslate="ebwebApp.saBill.quantity">Số lượng</th>
                                                <th scope="col" jhiTranslate="ebwebApp.saBill.unitPriceOriginal">Đơn giá</th>
                                                <th scope="col" jhiTranslate="ebwebApp.saBill.unitPrice"
                                                    *ngIf="sAInvoice.currencyID !== currencyCode">Đơn giá QĐ
                                                </th>
                                                <th scope="col" jhiTranslate="ebwebApp.saBill.mainUnit" *ngIf="isMoreForm">ĐVT
                                                    chính
                                                </th>
                                                <th scope="col" jhiTranslate="ebwebApp.saBill.mainConvertRate"
                                                    *ngIf="isMoreForm">Tỷ lệ chuyển đổi
                                                </th>
                                                <th scope="col" jhiTranslate="ebwebApp.saBill.formula" *ngIf="isMoreForm">Phép
                                                    tính
                                                </th>
                                                <th scope="col" jhiTranslate="ebwebApp.saBill.mainQuantity" *ngIf="isMoreForm">
                                                    Số lượng theo ĐVC
                                                </th>
                                                <th scope="col" jhiTranslate="ebwebApp.saBill.mainUnitPrice" *ngIf="isMoreForm">
                                                    Đơn giá theo ĐVC
                                                </th>
                                                <th scope="col" jhiTranslate="ebwebApp.saBill.amountOriginal">Thành tiền</th>
                                                <th scope="col" jhiTranslate="ebwebApp.saBill.amount"
                                                    *ngIf="sAInvoice.currencyID !== currencyCode">Thành tiền QĐ
                                                </th>
                                                <th scope="col" jhiTranslate="ebwebApp.saBill.discountRate">Tỷ lệ CK</th>
                                                <th scope="col" jhiTranslate="ebwebApp.saBill.discountAmountOriginal">Tiền CK
                                                </th>
                                                <th scope="col" jhiTranslate="ebwebApp.saBill.discountAmount"
                                                    *ngIf="sAInvoice.currencyID !== currencyCode">Tiền CK QĐ
                                                </th>
                                                <th scope="col" jhiTranslate="ebwebApp.sAInvoiceDetails.discountAccount">TK
                                                    chiết khấu
                                                </th>
                                                <th scope="col" jhiTranslate="ebwebApp.sAInvoiceDetails.sAOrderNo">Số đơn hàng
                                                </th>
                                                <th scope="col" jhiTranslate="ebwebApp.saBill.lotNo">Số lô</th>
                                                <th scope="col" jhiTranslate="ebwebApp.saBill.expiredDate">Hạn dùng</th>

                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr
                                                oncontextmenu="return false;"
                                                *ngFor="let detail of sAInvoiceDetails; let i=index;"
                                                (contextmenu)="onrightClick($event, sAInvoiceDetails, detail, true, true, true)"
                                                (keydown.control.insert)="addNewRow(true)"
                                                (keydown.control.delete)="keyPress(detail)"
                                                (keydown.control.c)="copyRow(detail)"
                                                (keydown.control.q)="viewMaterialGoodsSpecification(detail)"
                                                (click)="currentRow = i">
                                                <td class="cell-Table" title="{{detail.materialGoods?.materialGoodsCode}}">
                                                    <combo-box idIp="materialGoods{{i}}"
                                                               nameIp="materialGoods{{i}}"
                                                               [nameCategory]="utilsService.VAT_TU_HANG_HOA"
                                                               [showIconPlus]="true"
                                                               [dataList]="materialGoodss"
                                                               [listColumns]="utilsService.listColumnsMaterialGoods"
                                                               displayMember="materialGoodsCode"
                                                               valueName="id"
                                                               [headerColumns]="utilsService.listHeaderColumnsMaterialGoods"
                                                               [isObject]="true"
                                                               [isRequired]="true"
                                                               [(ngModel)]="detail.materialGoods"
                                                               [account]="account"
                                                               [isOutTable]="false"
                                                               (ngModelChange)="selectChangeMaterialGoods(detail)"
                                                               (click)="saveDetails(i)"
                                                               (focusInput)="actionFocus(0, i, 'materialGoods')"
                                                               [tabindex]="23+20 + (25 * i) + 1">
                                                    </combo-box>
                                                </td>
                                                <td class="cell-Table" title="{{detail.description}}">
                                                    <input type="text" class="input-Cell"
                                                           id="description{{i}}"
                                                           name="{{'description' + i}}"
                                                           [(ngModel)]="detail.description"
                                                           (focus)="actionFocus(1, i, 'description')"
                                                           [tabindex]="23+20 + (25 * i) + 2">
                                                </td>
                                                <td class="cell-Table text-center">
                                                    <div class="custom-control custom-checkbox">
                                                        <input type="checkbox" class="custom-control-input"
                                                               id="isPromotion{{i}}"
                                                               [(ngModel)]="detail.isPromotion"
                                                               (focus)="actionFocus(2, i, 'isPromotion')"
                                                               [tabindex]="23+20 + (25 * i) + 3">
                                                        <label class="custom-control-label"
                                                               for="isPromotion{{i}}"></label>
                                                    </div>
                                                </td>
                                                <td class="cell-Table" *ngIf="sAInvoice.isDeliveryVoucher">
                                                    <combo-box idIp="repository{{i}}"
                                                               nameIp="repository{{i}}"
                                                               [dataList]="repositories"
                                                               [listColumns]="utilsService.listColumnsRepository"
                                                               displayMember="repositoryCode"
                                                               valueName="id"
                                                               [headerColumns]="utilsService.listHeaderColumnsRepository"
                                                               [isObject]="false"
                                                               [isOutTable]="false"
                                                               [isRequired]="detail.materialGoods?.materialGoodsType !== VAT_TU_DV && detail.materialGoods?.materialGoodsType !== VAT_TU_KHAC
                                                   && sAInvoice.isDeliveryVoucher"
                                                               [isReadOnly]="detail.materialGoods?.materialGoodsType === VAT_TU_DV || detail.materialGoods?.materialGoodsType === VAT_TU_KHAC"
                                                               [(ngModel)]="detail.repositoryID"
                                                               [nameCategory]="utilsService.KHO"
                                                               [showIconPlus]="true"
                                                               (ngModelChange)="onSelectRepository(detail)"
                                                               (click)="saveDetails(i)"
                                                               (focusInput)="actionFocus(3, i, 'repository')"
                                                               [tabindex]="23+20 + (25 * i) + 4">
                                                    </combo-box>
                                                </td>
                                                <td class="cell-Table jsgrid-align-center">
                                                    <combo-box idIp="debitAccount{{i}}"
                                                               nameIp="debitAccount{{i}}"
                                                               [dataList]="debitAccountList"
                                                               [listColumns]="utilsService.listColumnsAccountList"
                                                               displayMember="accountNumber"
                                                               valueName="accountNumber"
                                                               [headerColumns]="utilsService.listHeaderColumnsAccountList"
                                                               [isObject]="false"
                                                               [isRequired]="true"
                                                               [isOutTable]="false"
                                                               [(ngModel)]="detail.debitAccount"
                                                               (ngModelChange)="changeDebitAccount(detail)"
                                                               (focusInput)="actionFocus(4, i, 'debitAccount')"
                                                               [tabindex]="23+20 + (25 * i) + 5">
                                                    </combo-box>
                                                </td>
                                                <td class="cell-Table jsgrid-align-center">
                                                    <combo-box idIp="creditAccount{{i}}"
                                                               nameIp="creditAccount{{i}}"
                                                               [dataList]="creditAccountList"
                                                               [listColumns]="utilsService.listColumnsAccountDefaults"
                                                               displayMember="accountNumber"
                                                               valueName="accountNumber"
                                                               [headerColumns]="utilsService.listHeaderColumnsAccountDefaults"
                                                               [isObject]="false"
                                                               [isRequired]="true"
                                                               [isOutTable]="false"
                                                               [(ngModel)]="detail.creditAccount"
                                                               (focusInput)="actionFocus(5, i, 'creditAccount')"
                                                               [tabindex]="23+20 + (25 * i) + 6">
                                                    </combo-box>
                                                </td>
                                                <td class="cell-Table">
                                                    <combo-box idIp="accountingObjects{{i}}"
                                                               nameIp="accountingObjects{{i}}"
                                                               [dataList]="accountingObjects"
                                                               [listColumns]="utilsService.listColumnsAccountingObjects"
                                                               displayMember="accountingObjectCode"
                                                               valueName="id"
                                                               [headerColumns]="utilsService.listHeaderColumnsAccountingObject"
                                                               [isObject]="true"
                                                               [isOutTable]="false"
                                                               [(ngModel)]="detail.accountingObject"
                                                               (ngModelChange)="selectChangeAccountingObjectsHD(detail)"
                                                               [showIconPlus]="true"
                                                               [nameCategory]="utilsService.KHACH_HANG"
                                                               (click)="saveDetails(i)"
                                                               (focusInput)="actionFocus(6, i, 'accountingObjects')"
                                                               [tabindex]="23+20 + (25 * i) + 7">
                                                    </combo-box>
                                                </td>
                                                <td class="cell-Table">
                                                    <combo-box idIp="unit{{i}}"
                                                               nameIp="unit{{i}}"
                                                               [dataList]="detail.units"
                                                               [listColumns]="['unitName', 'convertRate']"
                                                               displayMember="unitName"
                                                               valueName="id"
                                                               [isOutTable]="false"
                                                               [headerColumns]="['Đơn vị tính','Đơn vị chuyển đổi']"
                                                               [isObject]="true"
                                                               [(ngModel)]="detail.unit"
                                                               (ngModelChange)="selectUnit(detail)"
                                                               (focusInput)="actionFocus(7, i, 'unit')"
                                                               [tabindex]="23+20 + (25 * i) + 8"
                                                    ></combo-box>
                                                </td>
                                                <td class="cell-Table">
                                                    <input type="number" class="input-Cell text-right"
                                                           id="quantity{{i}}"
                                                           name="{{'quantity' + i}}"
                                                           [(ngModel)]="detail.quantity"
                                                           (ngModelChange)="changeQuantity(detail)"
                                                           (focus)="actionFocus(8, i, 'quantity')"
                                                           ebCurrencyMask [systemOptions]="account?.systemOption" [type]="3"
                                                           [tabindex]="23+20 + (25 * i) + 9">
                                                </td>
                                                <td class="cell-Table">
                                                    <combo-box
                                                        idIp="unitPriceOriginal{{i}}"
                                                        nameIp="unitPriceOriginal{{i}}"
                                                        [dataList]="detail.unitPriceOriginals"
                                                        [listColumns]="['unitPriceOriginal']"
                                                        displayMember="unitPriceOriginal"
                                                        valueName="unitPriceOriginal"
                                                        [headerColumns]="['Đơn giá']"
                                                        [isObject]="false"
                                                        [(ngModel)]="detail.unitPriceOriginal"
                                                        [isOutTable]="false"
                                                        (ngModelChange)="changeUnitPriceOriginal(detail)"
                                                        name="unitPriceOriginal"
                                                        [getValueDisplay]="true"
                                                        [valueIsNumber]="true"
                                                        [account]="account"
                                                        [systemOptions]="account?.systemOption"
                                                        [type]="sAInvoice.currencyID !== currencyCode ? 2 : 1"
                                                        (focusInput)="actionFocus(9, i, 'unitPriceOriginal')"
                                                        [tabindex]="23+20 + (25 * i) + 10"
                                                    ></combo-box>
                                                </td>
                                                <td class="cell-Table" *ngIf="sAInvoice.currencyID !== currencyCode">
                                                    <input type="number" class="input-Cell text-right"
                                                           id="unitPrice{{i}}"
                                                           name="{{'unitPrice' + i}}"
                                                           [(ngModel)]="detail.unitPrice"
                                                           ebCurrencyMask [systemOptions]="account?.systemOption"
                                                           (focus)="actionFocus(10, i, 'unitPrice')"
                                                           [type]="1" [tabindex]="23+20 + (25 * i) + 11">
                                                </td>
                                                <td class="cell-Table cell-div" *ngIf="isMoreForm">
                                                    {{detail.mainUnit?.unitName}}
                                                </td>
                                                <td class="cell-Table" *ngIf="isMoreForm">
                                                    <input type="text" class="input-Cell text-right"
                                                           id="mainConvertRate{{i}}"
                                                           name="{{'mainConvertRate' + i}}"
                                                           [(ngModel)]="detail.mainConvertRate"
                                                           ebCurrencyMask [systemOptions]="account?.systemOption" [type]="5"
                                                           (ngModelChange)="changeMainConvertRate(detail)"
                                                           (focus)="actionFocus(11, i, 'mainConvertRate')"
                                                           [tabindex]="23+20 + (25 * i) + 12">
                                                </td>
                                                <td class="cell-Table" *ngIf="isMoreForm">
                                                    <input type="text" class="input-Cell"
                                                           name="{{'formula' + i}}"
                                                           [(ngModel)]="detail.formula" readonly
                                                           [tabindex]="23+20 + (25 * i) + 13">
                                                </td>
                                                <td class="cell-Table" *ngIf="isMoreForm">
                                                    <input type="number" class="input-Cell text-right"
                                                           id="mainQuantity{{i}}"
                                                           name="{{'mainQuantity' + i}}"
                                                           [(ngModel)]="detail.mainQuantity"
                                                           ebCurrencyMask [systemOptions]="account?.systemOption" [type]="3"
                                                           (ngModelChange)="changeMainQuantity(detail)"
                                                           (focus)="actionFocus(12, i, 'mainQuantity')"
                                                           [tabindex]="23+20 + (25 * i) + 14">
                                                </td>
                                                <td class="cell-Table" *ngIf="isMoreForm">
                                                    <input type="number" class="input-Cell text-right"
                                                           id="mainUnitPrice{{i}}"
                                                           name="{{'mainUnitPrice' + i}}"
                                                           [(ngModel)]="detail.mainUnitPrice"
                                                           ebCurrencyMask [systemOptions]="account?.systemOption"
                                                           (focus)="actionFocus(13, i, 'mainUnitPrice')"
                                                           [type]="1" [tabindex]="23+20 + (25 * i) + 15">
                                                </td>
                                                <td class="cell-Table">
                                                    <input type="number" class="input-Cell text-right"
                                                           id="amountOriginal{{i}}"
                                                           name="{{'amountOriginal' + i}}"
                                                           [(ngModel)]="detail.amountOriginal"
                                                           ebCurrencyMask [systemOptions]="account?.systemOption"
                                                           [type]="sAInvoice.currencyID !== currencyCode ? 8 : 7"
                                                           (ngModelChange)="changeAmountOriginal(detail)"
                                                           (focus)="actionFocus(14, i, 'amountOriginal')"
                                                           [tabindex]="23+20 + (25 * i) + 15">
                                                </td>
                                                <td class="cell-Table" *ngIf="sAInvoice.currencyID !== currencyCode">
                                                    <input type="number" class="input-Cell text-right"
                                                           id="amount{{i}}"
                                                           name="{{'amount' + i}}"
                                                           [(ngModel)]="detail.amount"
                                                           ebCurrencyMask [systemOptions]="account?.systemOption"
                                                           [type]="7" (ngModelChange)="sumAllList()"
                                                           (focus)="actionFocus(15, i, 'amount')"
                                                           [tabindex]="23+20 + (25 * i) + 17">
                                                </td>
                                                <td class="cell-Table">
                                                    <input type="number" class="input-Cell text-right"
                                                           id="discountRate{{i}}"
                                                           [(ngModel)]="detail.discountRate"
                                                           (ngModelChange)="changeDiscountRate(detail)"
                                                           ebCurrencyMask [systemOptions]="account?.systemOption" [type]="5"
                                                           (focus)="actionFocus(16, i, 'discountRate')"
                                                           [tabindex]="23+20 + (25 * i) + 18">
                                                </td>
                                                <td class="cell-Table">
                                                    <input type="number" class="input-Cell text-right"
                                                           id="discountAmountOriginal{{i}}"
                                                           name="{{'discountAmountOriginal' + i}}"
                                                           [(ngModel)]="detail.discountAmountOriginal"
                                                           ebCurrencyMask [systemOptions]="account?.systemOption"
                                                           [type]="sAInvoice.currencyID !== currencyCode ? 8 : 7"
                                                           (ngModelChange)="changeDiscountAmountOriginal(detail)"
                                                           (focus)="actionFocus(17, i, 'discountAmountOriginal')"
                                                           [tabindex]="23+20 + (25 * i) + 19">
                                                </td>
                                                <td class="cell-Table" *ngIf="sAInvoice.currencyID !== currencyCode">
                                                    <input type="number" class="input-Cell text-right"
                                                           id="discountAmount{{i}}"
                                                           name="{{'discountAmount' + i}}"
                                                           [(ngModel)]="detail.discountAmount"
                                                           ebCurrencyMask [systemOptions]="account?.systemOption"
                                                           [type]="7"
                                                           (ngModelChange)="changeAmountOriginal(detail)"
                                                           (focus)="actionFocus(18, i, 'discountAmount')"
                                                           [tabindex]="23+20 + (25 * i) + 20">
                                                </td>
                                                <td class="cell-Table jsgrid-align-center">
                                                    <combo-box idIp="discountAccount{{i}}"
                                                               nameIp="discountAccount{{i}}"
                                                               [dataList]="discountAccountList"
                                                               [listColumns]="utilsService.listColumnsAccountList"
                                                               displayMember="accountNumber"
                                                               valueName="accountNumber"
                                                               [headerColumns]="utilsService.listHeaderColumnsAccountList"
                                                               [isObject]="false"
                                                               [isOutTable]="false"
                                                               [isRequired]="detail.discountAmountOriginal !== 0"
                                                               (focusInput)="actionFocus(19, i, 'discountAccount')"
                                                               [(ngModel)]="detail.discountAccount" [tabindex]="23+20 + (25 * i) + 21">
                                                    </combo-box>
                                                </td>
                                                <td class="cell-Table cell-div">
                                                    {{detail.sAOrderNo}}
                                                </td>
                                                <td class="cell-Table">
                                                    <combo-box idIp="lotNo{{i}}"
                                                               nameIp="lotNo{{i}}"
                                                               [dataList]="detail.lotNos"
                                                               [listColumns]="utilsService.listColumnsLotNo"
                                                               displayMember="lotNo"
                                                               valueName="lotNo"
                                                               [headerColumns]="utilsService.listHeaderColumnsLotNo"
                                                               [isObject]="false"
                                                               [(ngModel)]="detail.lotNo"
                                                               [getValueDisplay]="true"
                                                               [isOutTable]="false"
                                                               (ngModelChange)="changeLotNo(detail)"
                                                               (focusInput)="actionFocus(20, i, 'lotNo')"
                                                               [tabindex]="23+20 + (25 * i) + 22">
                                                    </combo-box>
                                                </td>
                                                <td class="cell-Table">
                                                    <eb-date-picker [(ngModel)]="detail.expiryDate" name="field_expiryDate"
                                                                    [isInTable]="true"
                                                                    [tabindex]="23+20 + (25 * i) + 23"
                                                                    (keydown.tab)="addIfLastInput(i)"></eb-date-picker>
                                                </td>
                                            </tr>
                                            <tr (click)="addNewRow()">
                                                <td class="cell-Table" *ngIf="isEdit">
                                                    <input type="text" id="materialGoods" class="input-Cell" value="Thêm dòng mới ...." readonly>
                                                </td>
                                                <td class="cell-Table" *ngIf="!isEdit"><input type="text" class="input-Cell"
                                                                                              readonly></td>
                                                <td class="cell-Table"><input id="description" type="text" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input
                                                    type="text" id="isPromotion" class="input-Cell" readonly></td>
                                                <td class="cell-Table" *ngIf="sAInvoice.isDeliveryVoucher"><input
                                                    type="text" id="repository" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input
                                                    type="text" id="debitAccount" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" id="creditAccount" class="input-Cell"
                                                                                                 readonly></td>
                                                <td class="cell-Table"><input type="text" id="accountingObjects" class="input-Cell"
                                                                                                 readonly></td>
                                                <td class="cell-Table"><input type="text" id="unit" class="input-Cell"
                                                                                                 readonly></td>
                                                <td class="cell-Table"><input type="text" id="quantity" class="input-Cell"
                                                                                                 readonly></td>
                                                <td class="cell-Table"><input type="text" id="unitPriceOriginal" class="input-Cell"
                                                                                                 readonly></td>
                                                <td class="cell-Table" *ngIf="sAInvoice.currencyID !== currencyCode"><input type="text" id="unitPrice" class="input-Cell" readonly></td>
                                                <td class="cell-Table" *ngIf="isMoreForm"><input type="text" class="input-Cell" readonly></td>
                                                <td class="cell-Table" *ngIf="isMoreForm"><input type="text" id="mainConvertRate" class="input-Cell" readonly></td>
                                                <td class="cell-Table" *ngIf="isMoreForm"><input type="text" class="input-Cell" readonly></td>
                                                <td class="cell-Table" *ngIf="isMoreForm"><input type="text" id="mainQuantity" class="input-Cell" readonly></td>
                                                <td class="cell-Table" *ngIf="isMoreForm"><input type="text" id="mainUnitPrice" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" id="amountOriginal" class="input-Cell" readonly></td>
                                                <td class="cell-Table" *ngIf="sAInvoice.currencyID !== currencyCode"><input type="text" id="amount" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" id="discountRate" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" id="discountAmountOriginal" class="input-Cell" readonly></td>
                                                <td class="cell-Table" *ngIf="sAInvoice.currencyID !== currencyCode"><input type="text" id="discountAmount" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" id="discountAccount" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" id="lotNo" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                            </tr>
                                            <tr *ngFor="let bill of newArr(10 - sAInvoiceDetails.length);">
                                                <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                <td class="cell-Table" *ngIf="sAInvoice.currencyID !== currencyCode"><input
                                                    type="text" class="input-Cell" readonly></td>
                                                <td class="cell-Table" *ngIf="sAInvoice.currencyID !== currencyCode"><input
                                                    type="text" class="input-Cell" readonly></td>
                                                <td class="cell-Table" *ngIf="sAInvoice.currencyID !== currencyCode"><input
                                                    type="text" class="input-Cell" readonly></td>
                                                <td class="cell-Table" *ngIf="sAInvoice.isDeliveryVoucher"><input type="text"
                                                                                                                  class="input-Cell"
                                                                                                                  readonly></td>
                                                <td class="cell-Table" *ngIf="isMoreForm"><input type="text" class="input-Cell"
                                                                                                 readonly></td>
                                                <td class="cell-Table" *ngIf="isMoreForm"><input type="text" class="input-Cell"
                                                                                                 readonly></td>
                                                <td class="cell-Table" *ngIf="isMoreForm"><input type="text" class="input-Cell"
                                                                                                 readonly></td>
                                                <td class="cell-Table" *ngIf="isMoreForm"><input type="text" class="input-Cell"
                                                                                                 readonly></td>
                                                <td class="cell-Table" *ngIf="isMoreForm"><input type="text" class="input-Cell"
                                                                                                 readonly></td>
                                                <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                            </tr>
                                            </tbody>
                                            <tfoot>
                                            <tr>
                                                <td class="cell-Table countRow">
                                                    <input type="text" readonly
                                                           class="input-Cell"
                                                           value="{{'ebwebApp.purchaseOrder.countLine'| translate}} : {{sAInvoiceDetails.length}}">
                                                </td>
                                                <td class="cell-Table countRow text-right"></td>
                                                <td class="cell-Table countRow text-right"></td>
                                                <td class="cell-Table countRow text-right"
                                                    *ngIf="sAInvoice.isDeliveryVoucher"></td>
                                                <td class="cell-Table countRow text-right"></td>
                                                <td class="cell-Table countRow text-right"></td>
                                                <td class="cell-Table countRow text-right"></td>
                                                <td class="cell-Table countRow text-right"></td>
                                                <td class="cell-Table countRow text-right"><input type="text"
                                                                                                  class="input-Cell text-right noEdit"
                                                                                                  [ngModel]="sum('quantity')"
                                                                                                  ebCurrencyMask
                                                                                                  [systemOptions]="account?.systemOption"
                                                                                                  [type]="3"></td>
                                                <td class="cell-Table countRow text-right"></td>
                                                <td class="cell-Table countRow text-right"
                                                    *ngIf="sAInvoice.currencyID !== currencyCode"></td>
                                                <td class="cell-Table countRow text-right" *ngIf="isMoreForm"></td>
                                                <td class="cell-Table countRow text-right" *ngIf="isMoreForm"></td>
                                                <td class="cell-Table countRow text-right" *ngIf="isMoreForm"></td>
                                                <td class="cell-Table countRow text-right" *ngIf="isMoreForm"><input type="text"
                                                                                                                     class="input-Cell text-right noEdit"
                                                                                                                     [ngModel]="sum('mainQuantity')"
                                                                                                                     ebCurrencyMask
                                                                                                                     [systemOptions]="account?.systemOption"
                                                                                                                     [type]="3">
                                                </td>
                                                <td class="cell-Table countRow text-right" *ngIf="isMoreForm"></td>
                                                <td class="cell-Table countRow text-right">
                                                    <input type="text" class="input-Cell text-right noEdit"
                                                           [ngModel]="sum('amountOriginal')"
                                                           ebCurrencyMask [systemOptions]="account?.systemOption"
                                                           [type]="sAInvoice.currencyID !== currencyCode ? 8 : 7"></td>
                                                <td class="cell-Table countRow text-right"
                                                    *ngIf="sAInvoice.currencyID !== currencyCode">
                                                    <input type="text" class="input-Cell text-right noEdit"
                                                           [ngModel]="sum('amount')"
                                                           ebCurrencyMask [systemOptions]="account?.systemOption"
                                                           [type]="7"></td>
                                                <td class="cell-Table countRow text-right"></td>
                                                <td class="cell-Table countRow text-right">
                                                    <input type="text" class="input-Cell text-right noEdit"
                                                           [ngModel]="sum('discountAmountOriginal')"
                                                           ebCurrencyMask [systemOptions]="account?.systemOption"
                                                           [type]="sAInvoice.currencyID !== currencyCode ? 8 : 7"></td>
                                                <td class="cell-Table countRow text-right"
                                                    *ngIf="sAInvoice.currencyID !== currencyCode">
                                                    <input type="text" class="input-Cell text-right noEdit"
                                                           [ngModel]="sum('discountAmount')"
                                                           ebCurrencyMask [systemOptions]="account?.systemOption"
                                                           [type]="7"></td>
                                                <td class="cell-Table countRow text-right"></td>
                                                <td class="cell-Table countRow text-right"></td>
                                                <td class="cell-Table countRow text-right"></td>
                                                <td class="cell-Table countRow text-right"></td>
                                            </tr>
                                            </tfoot>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </ng-template>
                    </ngb-tab>
                    <ngb-tab>
                        <ng-template ngbTabTitle><span jhiTranslate="ebwebApp.common.tax">Thuế</span></ng-template>
                        <ng-template ngbTabContent>
                            <div class="tab-content">
                                <div class="frm-main frm-padding tab-pane fade in active show" id="home-tax">
                                    <div id="table-scroll-tax" class="table-scroll">
                                        <table id="main-table-tax" class="main-table"
                                               (keydown.arrowDown)="moveArrowDown($event,19)"
                                               (keydown.arrowUp)="moveArrowUp($event,19)">
                                            <thead>
                                            <tr>
                                                <th scope="col"
                                                    jhiTranslate="ebwebApp.pPDiscountReturnDetails.materialGoodsID"></th>
                                                <th scope="col" jhiTranslate="ebwebApp.pPDiscountReturnDetails.explainTax"></th>
                                                <th scope="col"
                                                    jhiTranslate="ebwebApp.pPDiscountReturnDetails.debitAccount"></th>
                                                <th scope="col"
                                                    jhiTranslate="ebwebApp.pPDiscountReturnDetails.creditAccount"></th>
                                                <th scope="col"
                                                    jhiTranslate="ebwebApp.sAInvoiceDetails.accountingObjectID"></th>
                                                <th *ngIf="sAInvoice?.exported" scope="col"
                                                    jhiTranslate="ebwebApp.sAInvoiceDetails.exportTaxPrice">
                                                </th>
                                                <th *ngIf="sAInvoice?.exported" scope="col"
                                                    jhiTranslate="ebwebApp.sAInvoiceDetails.exportTaxTaxRate"></th>
                                                <th *ngIf="sAInvoice?.exported" scope="col"
                                                    jhiTranslate="ebwebApp.sAInvoiceDetails.exportTaxAmount"></th>
                                                <th *ngIf="sAInvoice?.exported" scope="col"
                                                    jhiTranslate="ebwebApp.sAInvoiceDetails.exportTaxAmountAccount"></th>
                                                <th *ngIf="sAInvoice?.exported" scope="col"
                                                    jhiTranslate="ebwebApp.sAInvoiceDetails.exportTaxAccountCorresponding"></th>
                                                <th *ngIf="!hiddenVAT" scope="col" jhiTranslate="ebwebApp.pPDiscountReturnDetails.vatRate"></th>
                                                <th *ngIf="!hiddenVAT" scope="col"
                                                    jhiTranslate="ebwebApp.pPDiscountReturnDetails.vatAmountOriginal"></th>
                                                <th *ngIf="sAInvoice.currencyID !== currencyCode && !hiddenVAT" scope="col"
                                                    jhiTranslate="ebwebApp.pPDiscountReturnDetails.vatAmount">
                                                </th>
                                                <th *ngIf="!hiddenVAT" scope="col" jhiTranslate="ebwebApp.pPDiscountReturnDetails.vatAccount"></th>
                                                <th *ngIf="!hiddenVAT" scope="col"
                                                    jhiTranslate="ebwebApp.pPDiscountReturnDetails.deductionDebitAccount"></th>
                                                <th scope="col" jhiTranslate="ebwebApp.sAInvoiceDetails.repositoryAccount"
                                                    *ngIf="sAInvoice.isDeliveryVoucher"></th>
                                                <th scope="col" jhiTranslate="ebwebApp.sAInvoiceDetails.costAccount"
                                                    *ngIf="sAInvoice.isDeliveryVoucher"></th>
                                                <th scope="col" jhiTranslate="ebwebApp.sAInvoiceDetails.oWPrice"
                                                    *ngIf="sAInvoice.isDeliveryVoucher"></th>
                                                <th scope="col" jhiTranslate="ebwebApp.sAInvoiceDetails.oWAmount"
                                                    *ngIf="sAInvoice.isDeliveryVoucher"></th>
                                                <th *ngIf="hiddenVAT" scope="col" jhiTranslate="ebwebApp.sAInvoiceDetails.careerGroupID"></th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr
                                                oncontextmenu="return false;"
                                                *ngFor="let detail of sAInvoiceDetails; let i = index;"
                                                (contextmenu)="onrightClick($event, sAInvoiceDetails, detail, true, true,  true)"
                                                (keydown.control.insert)="addNewRow(true)"
                                                (keydown.control.delete)="keyPress(detail)"
                                                (keydown.control.c)="copyRow(detail)"
                                                (keydown.control.q)="viewMaterialGoodsSpecification(detail)"
                                                (click)="currentRow = i">
                                                <td class="cell-Table description" title="{{detail.materialGoods?.materialGoodsCode}}">
                                                    <combo-box idIp="materialGoods2{{i}}"
                                                               nameIp="materialGoods2{{i}}"
                                                               [nameCategory]="utilsService.VAT_TU_HANG_HOA"
                                                               [showIconPlus]="true"
                                                               [dataList]="materialGoodss"
                                                               [listColumns]="utilsService.listColumnsMaterialGoods"
                                                               displayMember="materialGoodsCode"
                                                               valueName="id"
                                                               [headerColumns]="utilsService.listHeaderColumnsMaterialGoods"
                                                               [isObject]="true"
                                                               [isRequired]="true"
                                                               [(ngModel)]="detail.materialGoods"
                                                               [account]="account"
                                                               [isOutTable]="false"
                                                               (ngModelChange)="selectChangeMaterialGoods(detail)"
                                                               (click)="saveDetails(i)"
                                                               (focusInput)="actionFocus(0, i, 'materialGoods2')"
                                                               [tabindex]="23+20 + (19 * i * 2) + 1">
                                                    </combo-box>
                                                </td>
                                                <td class="cell-Table" title="{{detail.vATDescription}}">
                                                    <input type="text" class="input-Cell"
                                                           id="vATDescription{{i}}"
                                                           name="{{'description01' + i}}"
                                                           [(ngModel)]="detail.vATDescription"
                                                           (focus)="actionFocus(1, i, 'vATDescription')"
                                                           [tabindex]="23+20 + (19 * i * 2) + 2">
                                                </td>
                                                <td class="cell-Table jsgrid-align-center">
                                                    <combo-box idIp="debitAccount2{{i}}"
                                                               nameIp="debitAccount2{{i}}"
                                                               [dataList]="debitAccountList"
                                                               [listColumns]="utilsService.listColumnsAccountList"
                                                               displayMember="accountNumber"
                                                               valueName="accountNumber"
                                                               [headerColumns]="utilsService.listHeaderColumnsAccountList"
                                                               [isObject]="false"
                                                               [isRequired]="true"
                                                               [isOutTable]="false"
                                                               [(ngModel)]="detail.debitAccount"
                                                               (ngModelChange)="changeDebitAccount(detail)"
                                                               (focusInput)="actionFocus(2, i, 'debitAccount2')"
                                                               [tabindex]="23+20 + (19 * i * 2) + 3">
                                                    </combo-box>
                                                </td>
                                                <td class="cell-Table jsgrid-align-center">
                                                    <combo-box idIp="creditAccount2{{i}}"
                                                               nameIp="creditAccount2{{i}}"
                                                               [dataList]="creditAccountList"
                                                               [listColumns]="utilsService.listColumnsAccountDefaults"
                                                               displayMember="accountNumber"
                                                               valueName="accountNumber"
                                                               [headerColumns]="utilsService.listHeaderColumnsAccountDefaults"
                                                               [isObject]="false"
                                                               [isRequired]="true"
                                                               [isOutTable]="false"
                                                               [(ngModel)]="detail.creditAccount"
                                                               (focusInput)="actionFocus(3, i, 'creditAccount2')"
                                                               [tabindex]="23+20 + (19 * i * 2) + 4">
                                                    </combo-box>
                                                </td>
                                                <td class="cell-Table">
                                                    <combo-box idIp="accountingObjects2{{i}}"
                                                               nameIp="accountingObjects{{i}}"
                                                               [dataList]="accountingObjects"
                                                               [listColumns]="utilsService.listColumnsAccountingObjects"
                                                               displayMember="accountingObjectCode"
                                                               valueName="id"
                                                               [headerColumns]="utilsService.listHeaderColumnsAccountingObject"
                                                               [isObject]="true"
                                                               [(ngModel)]="detail.accountingObject"
                                                               (ngModelChange)="selectChangeAccountingObjectsHD(detail)"
                                                               [nameCategory]="utilsService.KHACH_HANG"
                                                               [showIconPlus]="true"
                                                               [isOutTable]="false"
                                                               (click)="saveDetails(i)"
                                                               (focusInput)="actionFocus(4, i, 'accountingObjects2')"
                                                               [tabindex]="23+20 + (19 * i * 2) + 5">
                                                    </combo-box>
                                                </td>
                                                <td class="cell-Table" *ngIf="sAInvoice.exported">
                                                    <input type="number" class="input-Cell text-right"
                                                           id="exportTaxPrice{{i}}"
                                                           name="{{'exportTaxPrice' + i}}"
                                                           ebCurrencyMask [systemOptions]="account?.systemOption"
                                                           [type]="7"
                                                           [(ngModel)]="detail.exportTaxPrice"
                                                           (ngModelChange)="changeExportTaxTaxRate(detail)"
                                                           (focus)="actionFocus(5, i, 'exportTaxPrice')"
                                                           [tabindex]="23+20 + (19 * i * 2) + 6">
                                                </td>
                                                <td class="cell-Table" *ngIf="sAInvoice.exported">
                                                    <input type="number" class="input-Cell text-right"
                                                           id="exportTaxTaxRate{{i}}"
                                                           name="{{'exportTaxTaxRate' + i}}"
                                                           ebCurrencyMask [systemOptions]="account?.systemOption"
                                                           [type]="5"
                                                           [(ngModel)]="detail.exportTaxTaxRate"
                                                           (ngModelChange)="changeExportTaxTaxRate(detail)"
                                                           (focus)="actionFocus(6, i, 'exportTaxTaxRate')"
                                                           [tabindex]="23+20 + (19 * i * 2) + 7">
                                                </td>
                                                <td class="cell-Table" *ngIf="sAInvoice.exported">
                                                    <input type="number" class="input-Cell text-right"
                                                           id="exportTaxAmount{{i}}"
                                                           name="{{'exportTaxAmount' + i}}"
                                                           ebCurrencyMask [systemOptions]="account?.systemOption"
                                                           [type]="7"
                                                           [(ngModel)]="detail.exportTaxAmount"
                                                           (focus)="actionFocus(7, i, 'exportTaxAmount')"
                                                           [tabindex]="23+20 + (19 * i * 2) + 8">
                                                </td>
                                                <td class="cell-Table jsgrid-align-center" *ngIf="sAInvoice?.exported">
                                                    <combo-box idIp="exportTaxAmountAccount{{i}}"
                                                               nameIp="exportTaxAmountAccount{{i}}"
                                                               [dataList]="exportTaxAmountAccountList"
                                                               [listColumns]="utilsService.listColumnsAccountList"
                                                               displayMember="accountNumber"
                                                               valueName="accountNumber"
                                                               [headerColumns]="utilsService.listHeaderColumnsAccountList"
                                                               [isObject]="false"
                                                               [isOutTable]="false"
                                                               [isRequired]="detail.exportTaxAmount !== 0"
                                                               [(ngModel)]="detail.exportTaxAmountAccount"
                                                               (focusInput)="actionFocus(8, i, 'exportTaxAmountAccount')"
                                                               [tabindex]="23+20 + (19 * i * 2) + 9">
                                                    </combo-box>
                                                </td>
                                                <td class="cell-Table jsgrid-align-center" *ngIf="sAInvoice?.exported">
                                                    <combo-box idIp="exportTaxAccountCorresponding{{i}}"
                                                               nameIp="exportTaxAccountCorresponding{{i}}"
                                                               [dataList]="exportTaxAccountCorrespondingList"
                                                               [listColumns]="utilsService.listColumnsAccountList"
                                                               displayMember="accountNumber"
                                                               valueName="accountNumber"
                                                               [headerColumns]="utilsService.listHeaderColumnsAccountList"
                                                               [isObject]="false"
                                                               [isOutTable]="false"
                                                               [isRequired]="detail.exportTaxAmount !== 0"
                                                               [(ngModel)]="detail.exportTaxAccountCorresponding"
                                                               (focusInput)="actionFocus(9, i, 'exportTaxAccountCorresponding')"
                                                               [tabindex]="23+20 + (19 * i * 2) + 10">
                                                    </combo-box>
                                                </td>
                                                <td *ngIf="!hiddenVAT" class="cell-Table jsgrid-align-right">
                                                    <combo-box idIp="vATRate{{i}}"
                                                               nameIp="vATRate{{i}}"
                                                               [dataList]="listVAT"
                                                               [listColumns]="['name']"
                                                               displayMember="name"
                                                               valueName="data"
                                                               [headerColumns]="['Dữ liệu']"
                                                               [isObject]="false"
                                                               [(ngModel)]="detail.vATRate"
                                                               [isOutTable]="false"
                                                               (ngModelChange)="changeVatRate(detail)"
                                                               (focusInput)="actionFocus(10, i, 'vATRate')"
                                                               [tabindex]="23+20 + (19 * i * 2) + 11"
                                                    ></combo-box>
                                                </td>
                                                <td *ngIf="!hiddenVAT" class="cell-Table">
                                                    <input type="number" class="input-Cell text-right"
                                                           id="vatAmountOriginal{{i}}"
                                                           name="{{'vatAmountOriginal' + i}}"
                                                           ebCurrencyMask [systemOptions]="account?.systemOption"
                                                           [type]="sAInvoice.currencyID !== currencyCode ? 8 : 7"
                                                           [(ngModel)]="detail.vATAmountOriginal"
                                                           (ngModelChange)="changeVATAmountOriginal(detail)"
                                                           (focus)="actionFocus(11, i, 'vatAmountOriginal')"
                                                           [tabindex]="23+20 + (19 * i * 2) + 12">
                                                </td>
                                                <td class="cell-Table" *ngIf="sAInvoice.currencyID !== currencyCode && !hiddenVAT">
                                                    <input type="number" class="input-Cell text-right"
                                                           id="vatAmount{{i}}"
                                                           name="{{'vatAmount' + i}}"
                                                           ebCurrencyMask [systemOptions]="account?.systemOption"
                                                           [type]="7"
                                                           [(ngModel)]="detail.vATAmount" (ngModelChange)="sumAllList()"
                                                           (focus)="actionFocus(12, i, 'vatAmount')"
                                                           [tabindex]="23+20 + (19 * i * 2) + 13">
                                                </td>
                                                <td *ngIf="!hiddenVAT" class="cell-Table jsgrid-align-center">
                                                    <combo-box idIp="vatAccount{{i}}"
                                                               nameIp="vatAccount{{i}}"
                                                               [dataList]="vatAccountList"
                                                               [listColumns]="utilsService.listColumnsAccountList"
                                                               displayMember="accountNumber"
                                                               valueName="accountNumber"
                                                               [headerColumns]="utilsService.listHeaderColumnsAccountList"
                                                               [isObject]="false"
                                                               [isOutTable]="false"
                                                               [isRequired]="detail.vATAmountOriginal !== 0"
                                                               [(ngModel)]="detail.vATAccount"
                                                               (focusInput)="actionFocus(13, i, 'vatAccount')"
                                                               [tabindex]="23+20 + (19 * i * 2) + 14">
                                                    </combo-box>
                                                </td>
                                                <td *ngIf="!hiddenVAT" class="cell-Table jsgrid-align-center">
                                                    <combo-box idIp="deductionDebitAccount{{i}}"
                                                               nameIp="deductionDebitAccount{{i}}"
                                                               [dataList]="deductionDebitAccountList"
                                                               [listColumns]="utilsService.listColumnsAccountList"
                                                               displayMember="accountNumber"
                                                               valueName="accountNumber"
                                                               [headerColumns]="utilsService.listHeaderColumnsAccountList"
                                                               [isObject]="false"
                                                               [isOutTable]="false"
                                                               [isRequired]="detail.vATAmountOriginal !== 0"
                                                               [(ngModel)]="detail.deductionDebitAccount"
                                                               (focusInput)="actionFocus(14, i, 'deductionDebitAccount')"
                                                               [tabindex]="23+20 + (19 * i * 2) + 15"
                                                               (keydown.tab)="sAInvoice.isDeliveryVoucher ? null : addIfLastInput(i)">
                                                    </combo-box>
                                                </td>
                                                <td class="cell-Table jsgrid-align-center" *ngIf="sAInvoice.isDeliveryVoucher">
                                                    <combo-box idIp="repositoryAccount{{i}}"
                                                               nameIp="repositoryAccount{{i}}"
                                                               [dataList]="repositoryAccountList"
                                                               [listColumns]="utilsService.listColumnsAccountList"
                                                               displayMember="accountNumber"
                                                               valueName="accountNumber"
                                                               [headerColumns]="utilsService.listHeaderColumnsAccountList"
                                                               [isObject]="false"
                                                               [isOutTable]="false"
                                                               [(ngModel)]="detail.repositoryAccount"
                                                               (focusInput)="actionFocus(15, i, 'repositoryAccount')"
                                                               [isRequired]="sAInvoice.isDeliveryVoucher && detail.materialGoods?.materialGoodsType !== VAT_TU_DV && detail.materialGoods?.materialGoodsType !== VAT_TU_KHAC"
                                                               [tabindex]="23+20 + (19 * i * 2) + 16">
                                                    </combo-box>
                                                </td>
                                                <td class="cell-Table jsgrid-align-center" *ngIf="sAInvoice.isDeliveryVoucher">
                                                    <combo-box idIp="costAccount{{i}}"
                                                               nameIp="costAccount{{i}}"
                                                               [dataList]="costAccountList"
                                                               [listColumns]="utilsService.listColumnsAccountList"
                                                               displayMember="accountNumber"
                                                               valueName="accountNumber"
                                                               [headerColumns]="utilsService.listHeaderColumnsAccountList"
                                                               [isObject]="false"
                                                               [isOutTable]="false"
                                                               [(ngModel)]="detail.costAccount"
                                                               (focusInput)="actionFocus(16, i, 'costAccount')"
                                                               [isRequired]="sAInvoice.isDeliveryVoucher && detail.materialGoods?.materialGoodsType !== VAT_TU_DV && detail.materialGoods?.materialGoodsType !== VAT_TU_KHAC"
                                                               [tabindex]="23+20 + (19 * i * 2) + 17"
                                                               (keydown.tab)="isEditOWAmount ? addIfLastInput(i) : null">
                                                    </combo-box>
                                                </td>
                                                <td class="cell-Table" *ngIf="sAInvoice.isDeliveryVoucher">
                                                    <input type="number" class="input-Cell text-right"
                                                           id="oWPrice{{i}}"
                                                           name="{{'oWPrice' + i}}"
                                                           ebCurrencyMask [systemOptions]="account?.systemOption"
                                                           [type]="1"
                                                           [(ngModel)]="detail.oWPrice"
                                                           [class.myreadonlytrue]="isEditOWAmount"
                                                           (ngModelChange)="changeOWPrice(detail)"
                                                           (focus)="actionFocus(17, i, 'oWPrice')"
                                                           [tabindex]="isEditOWAmount ? 1000 : (23 + 20 + (19 * i * 2) + 18)">
                                                </td>
                                                <td class="cell-Table" *ngIf="sAInvoice.isDeliveryVoucher">
                                                    <input type="number" class="input-Cell text-right"
                                                           id="oWAmount{{i}}"
                                                           name="{{'oWAmount' + i}}"
                                                           ebCurrencyMask [systemOptions]="account?.systemOption"
                                                           [class.myreadonlytrue]="isEditOWAmount"
                                                           [type]="7"
                                                           [(ngModel)]="detail.oWAmount"
                                                           (ngModelChange)="changeOWAmount(detail)"
                                                           (focus)="actionFocus(18, i, 'oWAmount')"
                                                           [tabindex]="isEditOWAmount ? 1000 : (23 + 20 + (19 * i * 2) + 19)"
                                                           (keydown.tab)="sAInvoice.isDeliveryVoucher ? addIfLastInput(i) : null">
                                                </td>
                                                <td *ngIf="hiddenVAT" class="cell-Table">
                                                    <combo-box class="text-right"
                                                               idIp="careerGroup{{i}}"
                                                               nameIp="careerGroup{{i}}"
                                                               [dataList]="careerGroups"
                                                               [listColumns]="utilsService.listColumnsCareerGroups"
                                                               displayMember="careerGroupCode"
                                                               valueName="id"
                                                               [headerColumns]="utilsService.listHeaderColumnsCareerGroups"
                                                               [isObject]="false"
                                                               [isOutTable]="false"
                                                               [(ngModel)]="detail.careerGroupID"
                                                               (focusInput)="actionFocus(19, i, 'careerGroup')"
                                                               [tabindex]="hiddenVAT ? (23 + 20 + (19 * i * 2) + 20) : 1001"
                                                               (keydown.tab)="addIfLastInput(i)">
                                                    ></combo-box>
                                                </td>
                                            </tr>
                                            <tr (click)="addNewRow()">
                                                <td class="cell-Table" *ngIf="isEdit">
                                                    <input type="text" id="materialGoods2" class="input-Cell" value="Thêm dòng mới ...." readonly>
                                                </td>
                                                <td class="cell-Table" *ngIf="!isEdit"><input type="text" class="input-Cell"
                                                                                              readonly></td>
                                                <td class="cell-Table"><input type="text" id="vATDescription" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" id="debitAccount2"
                                                                                                          class="input-Cell"
                                                                                                          readonly></td>
                                                <td class="cell-Table"><input type="text" id="creditAccount2"
                                                                                                          class="input-Cell"
                                                                                                          readonly></td>
                                                <td class="cell-Table"><input type="text" id="accountingObjects2"
                                                                                                          class="input-Cell"
                                                                                                          readonly></td>
                                                <td class="cell-Table" *ngIf="sAInvoice?.exported"><input type="text" id="exportTaxPrice"
                                                                                                          class="input-Cell"
                                                                                                          readonly></td>
                                                <td class="cell-Table" *ngIf="sAInvoice?.exported"><input type="text" id="exportTaxTaxRate"
                                                                                                          class="input-Cell"
                                                                                                          readonly></td>
                                                <td class="cell-Table" *ngIf="sAInvoice?.exported"><input type="text" id="exportTaxAmount" class="input-Cell" readonly></td>
                                                <td class="cell-Table" *ngIf="sAInvoice?.exported"><input type="text" id="exportTaxAmountAccount" class="input-Cell" readonly></td>
                                                <td class="cell-Table" *ngIf="sAInvoice?.exported"><input type="text" id="exportTaxAccountCorresponding" class="input-Cell" readonly></td>
                                                <td class="cell-Table" *ngIf="!hiddenVAT"><input type="text" id="vATRate" class="input-Cell" readonly></td>
                                                <td class="cell-Table" *ngIf="!hiddenVAT"><input type="text" class="input-Cell" id="vatAmountOriginal" readonly></td>
                                                <td class="cell-Table" *ngIf="sAInvoice.currencyID !== currencyCode && !hiddenVAT"><input type="text" class="input-Cell" id="vatAmount" readonly></td>
                                                <td class="cell-Table" *ngIf="!hiddenVAT"><input type="text" class="input-Cell" id="vatAccount" readonly></td>
                                                <td class="cell-Table" *ngIf="!hiddenVAT"><input type="text" class="input-Cell" id="deductionDebitAccount" readonly></td>
                                                <td class="cell-Table" *ngIf="sAInvoice.isDeliveryVoucher"><input type="text" id="repositoryAccount"
                                                                                                                  class="input-Cell"
                                                                                                                  readonly></td>
                                                <td class="cell-Table" *ngIf="sAInvoice.isDeliveryVoucher"><input type="text" id="costAccount"
                                                                                                                  class="input-Cell"
                                                                                                                  readonly></td>
                                                <td class="cell-Table" *ngIf="sAInvoice.isDeliveryVoucher"><input type="text" id="oWPrice"
                                                                                                                  class="input-Cell"
                                                                                                                  readonly></td>
                                                <td class="cell-Table" *ngIf="sAInvoice.isDeliveryVoucher"><input type="text" id="oWAmount"
                                                                                                                  class="input-Cell"
                                                                                                                  readonly></td>
                                                <td *ngIf="hiddenVAT" class="cell-Table"><input type="text" id="careerGroup" class="input-Cell" readonly>
                                            </tr>
                                            <tr *ngFor="let object of newArr(10 - sAInvoiceDetails.length); let i = index">
                                                <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                <td class="cell-Table" *ngIf="sAInvoice.currencyID !== currencyCode && !hiddenVAT"><input
                                                    type="text" class="input-Cell" readonly></td>
                                                <td class="cell-Table" *ngIf="sAInvoice?.exported"><input type="text"
                                                                                                          class="input-Cell"
                                                                                                          readonly></td>
                                                <td class="cell-Table" *ngIf="sAInvoice?.exported"><input type="text"
                                                                                                          class="input-Cell"
                                                                                                          readonly></td>
                                                <td class="cell-Table" *ngIf="sAInvoice?.exported"><input type="text"
                                                                                                          class="input-Cell"
                                                                                                          readonly></td>
                                                <td class="cell-Table" *ngIf="sAInvoice?.exported"><input type="text"
                                                                                                          class="input-Cell"
                                                                                                          readonly></td>
                                                <td class="cell-Table" *ngIf="sAInvoice?.exported"><input type="text"
                                                                                                          class="input-Cell"
                                                                                                          readonly></td>
                                                <td class="cell-Table" *ngIf="!hiddenVAT"><input type="text" class="input-Cell" readonly></td>
                                                <td class="cell-Table" *ngIf="!hiddenVAT"><input type="text" class="input-Cell" readonly></td>
                                                <td class="cell-Table" *ngIf="!hiddenVAT"><input type="text" class="input-Cell" readonly></td>
                                                <td class="cell-Table" *ngIf="!hiddenVAT"><input type="text" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                <td class="cell-Table" *ngIf="sAInvoice.isDeliveryVoucher"><input type="text"
                                                                                                                  class="input-Cell"
                                                                                                                  readonly></td>
                                                <td class="cell-Table" *ngIf="sAInvoice.isDeliveryVoucher"><input type="text"
                                                                                                                  class="input-Cell"
                                                                                                                  readonly></td>
                                                <td class="cell-Table" *ngIf="sAInvoice.isDeliveryVoucher"><input type="text"
                                                                                                                  class="input-Cell"
                                                                                                                  readonly></td>
                                                <td class="cell-Table" *ngIf="sAInvoice.isDeliveryVoucher"><input type="text"
                                                                                                                  class="input-Cell"
                                                                                                                  readonly></td>
                                                <td *ngIf="hiddenVAT" class="cell-Table"><input type="text" class="input-Cell" readonly>
                                            </tr>
                                            </tbody>
                                            <tfoot>
                                            <td class="cell-Table countRow">
                                                <input type="text" readonly
                                                       class="input-Cell"
                                                       value="{{'ebwebApp.purchaseOrder.countLine'| translate}} : {{sAInvoiceDetails.length}}">
                                            </td>
                                            <td class="cell-Table countRow text-right"></td>
                                            <td class="cell-Table countRow text-right"></td>
                                            <td class="cell-Table countRow text-right"></td>
                                            <td class="cell-Table countRow text-right"></td>
                                            <td class="cell-Table countRow text-right" *ngIf="sAInvoice?.exported">
                                                <input type="text" class="input-Cell text-right noEdit"
                                                       [ngModel]="sum('exportTaxPrice')"
                                                       ebCurrencyMask [systemOptions]="account?.systemOption"
                                                       [type]="7"></td>
                                            <td class="cell-Table countRow text-right" *ngIf="sAInvoice?.exported"></td>
                                            <td class="cell-Table countRow text-right" *ngIf="sAInvoice?.exported">
                                                <input type="text" class="input-Cell text-right noEdit"
                                                       [ngModel]="sum('exportTaxAmount')"
                                                       ebCurrencyMask [systemOptions]="account?.systemOption"
                                                       [type]="7"></td>
                                            <td class="cell-Table countRow text-right" *ngIf="sAInvoice?.exported"></td>
                                            <td class="cell-Table countRow text-right" *ngIf="sAInvoice?.exported"></td>
                                            <td *ngIf="!hiddenVAT" class="cell-Table countRow text-right"></td>
                                            <td *ngIf="!hiddenVAT" class="cell-Table countRow text-right">
                                                <input type="text" class="input-Cell text-right noEdit"
                                                       [ngModel]="sum('vATAmountOriginal')"
                                                       ebCurrencyMask [systemOptions]="account?.systemOption"
                                                       [type]="sAInvoice.currencyID !== currencyCode ? 8 : 7"></td>
                                            <td class="cell-Table countRow text-right"
                                                *ngIf="sAInvoice.currencyID !== currencyCode && !hiddenVAT">
                                                <input type="text" class="input-Cell text-right noEdit"
                                                       [ngModel]="sum('vATAmount')"
                                                       ebCurrencyMask [systemOptions]="account?.systemOption"
                                                       [type]="7"></td>
                                            <td *ngIf="!hiddenVAT" class="cell-Table countRow text-right"></td>
                                            <td *ngIf="!hiddenVAT" class="cell-Table countRow text-right"></td>
                                            <td class="cell-Table countRow text-right" *ngIf="sAInvoice.isDeliveryVoucher"></td>
                                            <td class="cell-Table countRow text-right" *ngIf="sAInvoice.isDeliveryVoucher"></td>
                                            <td class="cell-Table countRow text-right" *ngIf="sAInvoice.isDeliveryVoucher"></td>
                                            <td class="cell-Table countRow text-right" *ngIf="sAInvoice.isDeliveryVoucher">
                                                <input type="text" class="input-Cell text-right noEdit"
                                                       [ngModel]="sum('oWAmount')"
                                                       ebCurrencyMask [systemOptions]="account?.systemOption"
                                                       [type]="7"></td>
                                            <td *ngIf="hiddenVAT" class="cell-Table countRow"><input type="text" class="input-Cell" readonly>
                                            </tfoot>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </ng-template>
                    </ngb-tab>
                    <ngb-tab>
                        <ng-template ngbTabTitle><span jhiTranslate="ebwebApp.common.statistical">Thống kê</span></ng-template>
                        <ng-template ngbTabContent>
                            <div class="tab-content">
                                <div class="frm-main frm-padding tab-pane fade in active show" id="home-report"
                                     style="background: #cbdcf0">
                                    <div id="table-scroll-report" class="table-scroll">
                                        <table id="main-table-report" class="main-table"
                                               (keydown.arrowDown)="moveArrowDown($event,8)"
                                               (keydown.arrowUp)="moveArrowUp($event,8)">
                                            <thead>
                                            <tr>
                                                <th scope="col" jhiTranslate="ebwebApp.saBill.materialGoodsID">Mã hàng</th>
                                                <th scope="col" jhiTranslate="ebwebApp.saBill.materialGoodsName">Tên hàng</th>
                                                <th scope="col" jhiTranslate="ebwebApp.saReturn.expenseItem">Khoản mục CP</th>
                                                <th scope="col" jhiTranslate="ebwebApp.saReturn.costSet">Đối tượng THCP</th>
                                                <!--                                        <th scope="col" jhiTranslate="ebwebApp.saReturn.contract">Hợp đồng</th>-->
                                                <th scope="col" jhiTranslate="ebwebApp.saReturn.budgetItem">Mục thu/chi</th>
                                                <th scope="col" jhiTranslate="ebwebApp.saReturn.department">Phòng ban</th>
                                                <th scope="col" jhiTranslate="ebwebApp.saReturn.statisticCode">Mã thống kê</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr
                                                oncontextmenu="return false;"
                                                (contextmenu)="onRightClick($event, sAInvoiceDetails, detail, true, true, true)"
                                                *ngFor="let detail of sAInvoiceDetails; let i = index"
                                                (keydown.control.insert)="addNewRow(true)"
                                                (keydown.control.delete)="keyPress(detail)"
                                                (keydown.control.c)="copyRow(detail)"
                                                (keydown.control.q)="viewMaterialGoodsSpecification(detail)"
                                                (click)="currentRow = i">
                                                <td class="cell-Table" title="{{detail.materialGoods?.materialGoodsCode}}">
                                                    <combo-box idIp="materialGoods3{{i}}"
                                                               nameIp="materialGoods3{{i}}"
                                                               [nameCategory]="utilsService.VAT_TU_HANG_HOA"
                                                               [showIconPlus]="true"
                                                               (click)="saveDetails(i)"
                                                               [dataList]="materialGoodss"
                                                               [listColumns]="utilsService.listColumnsMaterialGoods"
                                                               displayMember="materialGoodsCode"
                                                               valueName="id"
                                                               [headerColumns]="utilsService.listHeaderColumnsMaterialGoods"
                                                               [isObject]="true"
                                                               [isRequired]="true"
                                                               [isOutTable]="false"
                                                               [(ngModel)]="detail.materialGoods"
                                                               [account]="account"
                                                               (ngModelChange)="selectChangeMaterialGoods(detail)"
                                                               (focusInput)="actionFocus(0, i, 'materialGoods3')"
                                                               [tabindex]="23+20 + (8 * i * 3) + 1">
                                                    </combo-box>
                                                </td>
                                                <td class="cell-Table">
                                                    <input type="text" class="input-Cell"
                                                           id="description3{{i}}"
                                                           name="description02"
                                                           [(ngModel)]="detail.description"
                                                           (focus)="actionFocus(1, i, 'description3')"
                                                           [tabindex]="23+20 + (8 * i * 3) + 2">
                                                </td>
                                                <td class="cell-Table">
                                                    <combo-box idIp="expenseItem{{i}}"
                                                               nameIp="expenseItem{{i}}"
                                                               [nameCategory]="utilsService.KHOAN_MUC_CHI_PHI"
                                                               [showIconPlus]="true"
                                                               (click)="saveDetails(i)"
                                                               [dataList]="expenseItems"
                                                               [listColumns]="utilsService.listColumnsExpenseItem"
                                                               displayMember="expenseItemCode"
                                                               valueName="id"
                                                               [headerColumns]="utilsService.listHeaderColumnsExpenseItem"
                                                               [isObject]="false"
                                                               [isOutTable]="false"
                                                               [(ngModel)]="detail.expenseItemID"
                                                               (focusInput)="actionFocus(2, i, 'expenseItem')"
                                                               [tabindex]="23+20 + (8 * i * 3) + 3"
                                                    ></combo-box>
                                                </td>
                                                <td class="cell-Table">
                                                    <combo-box idIp="costSet{{i}}"
                                                               nameIp="costSet{{i}}"
                                                               [dataList]="costSets"
                                                               [listColumns]="utilsService.listColumnsCostSet"
                                                               displayMember="costSetCode"
                                                               valueName="id"
                                                               [headerColumns]="utilsService.listHeaderColumnsCostSet"
                                                               [isObject]="false"
                                                               [(ngModel)]="detail.costSetID"
                                                               [nameCategory]="utilsService.DOI_TUONG_TAP_HOP_CHI_PHI"
                                                               [showIconPlus]="true"
                                                               [isOutTable]="false"
                                                               (click)="saveDetails(i)"
                                                               (focusInput)="actionFocus(3, i, 'costSet')"
                                                               [tabindex]="23+20 + (8 * i * 3) + 4"
                                                    ></combo-box>
                                                </td>
                                                <!--                                        <td class="cell-Table">-->
                                                <!--                                            <combo-box-->
                                                <!--                                                nameIp="contract"-->
                                                <!--                                                [dataList]="emContractList"-->
                                                <!--                                                [listColumns]="sessionWork ? utilsService.listColumnsEMContractMBook : utilsService.listColumnsEMContractFBook"-->
                                                <!--                                                displayMember="{{sessionWork ? 'noMBook' : 'noFBook'}}"-->
                                                <!--                                                valueName="id"-->
                                                <!--                                                [headerColumns]="utilsService.listHeaderColumnsEMContract"-->
                                                <!--                                                [isObject]="false"-->
                                                <!--                                                [(ngModel)]="detail.contractID"-->
                                                <!--                                                [tabindex]="23+20 + (8 * i * 3) + 5">-->
                                                <!--                                            </combo-box>-->
                                                <!--                                        </td>-->
                                                <td class="cell-Table">
                                                    <combo-box idIp="budgetItem{{i}}"
                                                               nameIp="budgetItem{{i}}"
                                                               [dataList]="budgetItems"
                                                               [listColumns]="utilsService.listColumnsBudgetItem"
                                                               displayMember="budgetItemCode"
                                                               valueName="id"
                                                               [headerColumns]="utilsService.listHeaderColumnsBudgetItem"
                                                               [isObject]="false"
                                                               [(ngModel)]="detail.budgetItemID"
                                                               [nameCategory]="utilsService.MUC_THU_CHI"
                                                               [showIconPlus]="true"
                                                               [isOutTable]="false"
                                                               (click)="saveDetails(i)"
                                                               (focusInput)="actionFocus(5, i, 'budgetItem')"
                                                               [tabindex]="23+20 + (8 * i * 3) + 6">
                                                    </combo-box>
                                                </td>
                                                <td class="cell-Table">
                                                    <combo-box idIp="organizationUnit{{i}}"
                                                               nameIp="organizationUnit{{i}}"
                                                               [dataList]="organizationUnits"
                                                               [listColumns]="utilsService.listColumnsOrganizationUnit"
                                                               displayMember="organizationUnitCode"
                                                               valueName="id"
                                                               [headerColumns]="utilsService.listHeaderColumnsOrganizationUnit"
                                                               [isObject]="false"
                                                               [(ngModel)]="detail.departmentID"
                                                               [nameCategory]="utilsService.PHONG_BAN"
                                                               [showIconPlus]="true"
                                                               [isOutTable]="false"
                                                               (click)="saveDetails(i)"
                                                               (focusInput)="actionFocus(6, i, 'organizationUnit')"
                                                               [tabindex]="23+20 + (8 * i * 3) + 7"
                                                    ></combo-box>
                                                </td>
                                                <td class="cell-Table">
                                                    <combo-box idIp="statisticsCode{{i}}"
                                                               nameIp="statisticsCode{{i}}"
                                                               [dataList]="statisticCodes"
                                                               [listColumns]="['statisticsCode', 'statisticsCodeName']"
                                                               displayMember="statisticsCode"
                                                               valueName="id"
                                                               [headerColumns]="['Mã thống kê', 'Tên mã thống kê']"
                                                               [isObject]="false"
                                                               [(ngModel)]="detail.statisticsCodeID"
                                                               [nameCategory]="utilsService.MA_THONG_KE"
                                                               [showIconPlus]="true"
                                                               [isOutTable]="false"
                                                               (click)="saveDetails(i)"
                                                               (focusInput)="actionFocus(7, i, 'statisticsCode')"
                                                               [tabindex]="23+20 + (8 * i * 3) + 8"
                                                               (keydown.tab)="addIfLastInput(i)"
                                                    ></combo-box>
                                                </td>
                                            </tr>
                                            <tr (click)="addNewRow()">
                                                <td class="cell-Table" *ngIf="isEdit">
                                                    <input type="text" id="materialGoods3" class="input-Cell" value="Thêm dòng mới ...." readonly>
                                                </td>
                                                <td class="cell-Table" *ngIf="!isEdit">
                                                    <input type="text" class="input-Cell" readonly>
                                                </td>
                                                <td class="cell-Table"><input type="text" id="description3" class="input-Cell" readonly></td>
                                                <!--                                        <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>-->
                                                <td class="cell-Table"><input type="text" id="expenseItem" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" id="costSet" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" id="budgetItem" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" id="organizationUnit" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" id="statisticsCode" class="input-Cell" readonly></td>
                                            </tr>
                                            <tr *ngFor="let bill of newArr(10 - sAInvoiceDetails.length); let i = index">
                                                <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                <!--                                        <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>-->
                                                <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                                <td class="cell-Table"><input type="text" class="input-Cell" readonly></td>
                                            </tr>
                                            </tbody>
                                            <tfoot>
                                            <tr>
                                                <td class="cell-Table countRow">
                                                    <input type="text" readonly
                                                           class="input-Cell"
                                                           value="{{'ebwebApp.purchaseOrder.countLine'| translate}} : {{sAInvoiceDetails.length}}">
                                                </td>
                                                <td class="countRow"></td>
                                                <!--                                        <td class="countRow"></td>-->
                                                <td class="countRow"></td>
                                                <td class="countRow"></td>
                                                <td class="countRow"></td>
                                                <td class="countRow"></td>
                                                <td class="countRow"></td>
                                            </tr>
                                            </tfoot>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </ng-template>
                    </ngb-tab>
                    <ngb-tab id="refdoc">
                        <ng-template ngbTabTitle><span jhiTranslate="ebwebApp.saBill.refDoc"></span></ng-template>
                        <ng-template ngbTabContent>
                            <div class="tab-content">
                                <div class="frm-main frm-padding tab-pane fade in active show" id="home-ref2"
                                     style="background: #cbdcf0">
                                    <div id="table-scroll-ref2" class="table-scroll">
                                        <table id="main-table-ref2" class="main-table">
                                            <thead>
                                            <tr>
                                                <th scope="col" jhiTranslate="ebwebApp.saBill.vDate">Ngày chứng từ</th>
                                                <th scope="col" jhiTranslate="ebwebApp.saBill.postedDate">Ngày hạch toán</th>
                                                <th scope="col" jhiTranslate="ebwebApp.saBill.noFBook">Số chứng từ</th>
                                                <th scope="col" jhiTranslate="ebwebApp.saBill.reason">Diễn giải</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr *ngFor="let viewVoucher of viewVouchersSelected; let i = index"
                                                oncontextmenu="return false;"
                                                (contextmenu)="onRightClick($event, viewVouchersSelected, viewVoucher, false, true, false, 1)"
                                                (keydown.control.delete)="keyPress(i ,1)">
                                                <td class="jsgrid-cell jsgrid-align">{{viewVoucher.date}}</td>
                                                <td class="jsgrid-cell jsgrid-align">{{viewVoucher.postedDate}}</td>
                                                <td class="jsgrid-cell" (click)="utilsService.viewRefVoucher(viewVoucher)" style="color:blue; text-decoration: underline;">{{viewVoucher.no}}</td>
                                                <td class="jsgrid-cell">{{viewVoucher.reason}}</td>
                                            </tr>
                                            <tr *ngFor="let l of newArr(10 - viewVouchersSelected?.length)">
                                                <td><input type="text" class="input-Cell" readonly></td>
                                                <td><input type="text" class="input-Cell" readonly></td>
                                                <td><input type="text" class="input-Cell" readonly></td>
                                                <td><input type="text" class="input-Cell" readonly></td>
                                            </tr>
                                            </tbody>
                                            <tfoot>
                                            <tr>
                                                <td class="cell-Table countRow">
                                                    <input type="text" readonly
                                                           class="input-Cell"
                                                           value="{{'ebwebApp.purchaseOrder.countLine'| translate}} : {{viewVouchersSelected.length}}">
                                                </td>
                                                <td class="countRow"></td>
                                                <td class="countRow"></td>
                                                <td class="countRow"></td>
                                            </tr>
                                            </tfoot>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </ng-template>
                    </ngb-tab>
                    <ngb-tab x-placement="right" id="allocationdiscount" [disabled]="!isEdit">
                        <ng-template ngbTabTitle>
                            <span jhiTranslate="ebwebApp.sAInvoice.allocationDicount"></span>
                        </ng-template>
                    </ngb-tab>
                    <ngb-tab x-placement="right" id="reference" [disabled]="!isEdit">
                        <ng-template ngbTabTitle>
                            <span jhiTranslate="ebwebApp.mBDeposit.reference"></span>
                        </ng-template>
                    </ngb-tab>
                </ngb-tabset>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="row col-md-4" [class.eb-read-only]="!isEdit || option2">
            <div class="col-lg-6" style="padding-right: 0 !important;">
                <div class="form-check form-check-inline form-control checkBox">
                    <input class="form-check-input" type="checkbox" name="checkNumber1"
                           id="inlineCheckbox5"
                           value="checkNumber" [(ngModel)]="sAInvoice.isExportInvoice" (ngModelChange)="deleteInvoiceNo()">
                    <label class="form-check-label" for="inlineCheckbox5"
                           style="font-size: 14px;"
                           jhiTranslate="ebwebApp.common.billed"></label>
                </div>
            </div>
            <div class="col-lg-6 pd-l-0" [class.eb-read-only]="!sAInvoice.isExportInvoice">
                <div>
                    <button class="btn mb-2 mr-2 selectVoucher"
                            (click)="openModel()">
                        <span jhiTranslate="ebwebApp.common.selectBill">Chọn hóa đơn</span>
                    </button>
                </div>
            </div>
        </div>
        <div class="row col-md-8 justify-content-end p-0">
            <div class="row col-md-6 justify-content-end">
                <label class="col-sm-3 col-form-label pd-r-0"
                       jhiTranslate="ebwebApp.saBill.totalAmount"
                       style="padding-left:0;padding-right:0;"
                       for="field_totalAmount">Total Amount</label>
                <div class="col-sm-4 pd-l-0 jsgrid-align-right">
                    <input type="number" class="form-control form-control-sm noEdit"
                           name="totalAmountOriginal" id="field_totalAmountOriginal2"
                           [(ngModel)]="sAInvoice.totalAmountOriginal"
                           ebCurrencyMask [systemOptions]="account?.systemOption" [type]="sAInvoice.currencyID !== currencyCode ? 8 : 7"/>
                </div>
                <div class="col-sm-4 p-0 jsgrid-align-right">
                    <input type="number" class="form-control form-control-sm noEdit"
                           name="totalAmount" id="field_totalAmount"
                           [(ngModel)]="sAInvoice.totalAmount"
                           ebCurrencyMask [systemOptions]="account?.systemOption" [type]="7"/>
                </div>
            </div>
            <div class="row col-md-6 justify-content-end">
                <label class="col-sm-3 col-form-label pd-r-0"
                       jhiTranslate="ebwebApp.saBill.totalVATAmount"
                       style="padding-left:0;padding-right:0;"
                       for="field_totalAmount">Total Amount</label>
                <div class="col-sm-4 pd-l-0 jsgrid-align-right">
                    <input type="number" class="form-control form-control-sm noEdit"
                           name="totalAmountOriginal" id="field_totalVATAmountOriginal"
                           [(ngModel)]="sAInvoice.totalVATAmountOriginal"
                           ebCurrencyMask [systemOptions]="account?.systemOption" [type]="sAInvoice.currencyID !== currencyCode ? 8 : 7"/>
                </div>
                <div class="col-sm-4 p-0 jsgrid-align-right">
                    <input type="number" class="form-control form-control-sm noEdit"
                           name="totalAmount" id="field_totalVATAmount"
                           [(ngModel)]="sAInvoice.totalVATAmount"
                           ebCurrencyMask [systemOptions]="account?.systemOption" [type]="7"/>
                </div>
            </div>
        </div>
        <div class="row mb-1 col-md-4"></div>
        <div class="row justify-content-end col-md-8 p-0">
            <div class="row col-md-6 justify-content-end">
                <label class="col-sm-3 col-form-label pd-r-0"
                       jhiTranslate="ebwebApp.saBill.totalDiscountAmount"
                       style="padding-left:0;padding-right:0;"
                       for="field_totalAmount">Total Amount</label>
                <div class="col-sm-4 pd-l-0 jsgrid-align-right pd-r-0">
                    <input type="number" class="form-control form-control-sm noEdit"
                           name="totalAmountOriginal" id="field_totalOriginal3"
                           [(ngModel)]="sAInvoice.totalDiscountAmountOriginal"
                           ebCurrencyMask [systemOptions]="account?.systemOption" [type]="sAInvoice.currencyID !== currencyCode ? 8 : 7"/>
                </div>
                <div class="col-sm-4 p-0 jsgrid-align-right">
                    <input type="number" class="form-control form-control-sm noEdit"
                           name="totalAmount" id="field_total3"
                           [(ngModel)]="sAInvoice.totalDiscountAmount"
                           ebCurrencyMask [systemOptions]="account?.systemOption" [type]="7"/>
                </div>
            </div>
            <div class="row col-md-6 justify-content-end">
                <label class="col-sm-3 col-form-label pd-r-0"
                       jhiTranslate="ebwebApp.saBill.total"
                       style="padding-left:0;padding-right:0;"
                       for="field_totalAmount">Total Amount</label>
                <div class="col-sm-4 pd-l-0 jsgrid-align-right">
                    <input type="number" class="form-control form-control-sm noEdit"
                           name="totalAmount" id="field_total"
                           [(ngModel)]="sAInvoice.totalAmountOriginal - sAInvoice.totalDiscountAmountOriginal + sAInvoice.totalVATAmountOriginal"
                           ebCurrencyMask [systemOptions]="account?.systemOption" [type]="sAInvoice.currencyID !== currencyCode ? 8 : 7"/>
                </div>
                <div class="col-sm-4 p-0 jsgrid-align-right">
                    <input type="number" class="form-control form-control-sm noEdit"
                           name="totalAmountOriginal" id="field_totalOriginal"
                           [(ngModel)]="sAInvoice.totalAmount - sAInvoice.totalDiscountAmount + sAInvoice.totalVATAmount"
                           ebCurrencyMask [systemOptions]="account?.systemOption" [type]="7"
                    />
                </div>
            </div>
        </div>
    </div>
</div>
<eb-context-menu [contextMenu]="contextMenu" [eventHandlingHere]="true" [useCopyRow]="true" [isMaterialGoodsSpecificationSelect]="true"></eb-context-menu>
<ng-template #contentClose let-q="dismiss">
    <div class="modal-body">
        <form>
            <div class="form-group">
                <label jhiTranslate="ebwebApp.saBill.saveMessage">Dữ liệu đã bị thay đổi, Bạn có muốn lưu lại?</label>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-outline-success" (click)="saveAll(true)" jhiTranslate="entity.action.save">
            Save
        </button>
        <button type="button" class="btn btn-outline-danger" (click)="close()" jhiTranslate="entity.action.noSave">
            Save
        </button>
        <button type="button" class="btn btn-outline-dark" (click)="closes()" jhiTranslate="entity.action.close">close
        </button>
    </div>
</ng-template>

<ng-template #contentUnRecord let-q="dismiss">
    <div class="modal-body">
        <form>
            <div class="form-group">
                <label *ngIf="typeNotify === 1 || typeNotify === 2" jhiTranslate="ebwebApp.sAInvoice.unRecord.questionUnRecord2"></label><br>
                <label *ngIf="typeNotify === 1 || typeNotify === 3" jhiTranslate="ebwebApp.sAInvoice.unRecord.questionUnRecord1"></label>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-outline-success" (click)="unrecordForm()" jhiTranslate="entity.action.ok">Đồng
            ý
        </button>
        <button type="button" class="btn btn-outline-dark" (click)="closes()" jhiTranslate="entity.action.close">Đóng
        </button>
    </div>
</ng-template>
<ng-template #contentSave let-q="dismiss">
    <div class="modal-body">
        <form>
            <div class="form-group">
                <label *ngIf="warningEmployee" jhiTranslate="ebwebApp.sAInvoice.warning.checkEmployeeID"></label><br *ngIf="warningEmployee">
                <label *ngIf="warningVatRate === 1" jhiTranslate="ebwebApp.sAInvoice.warning.checkVATRate1"></label><br *ngIf="warningVatRate === 1">
                <label *ngIf="warningVatRate === 2" jhiTranslate="ebwebApp.sAInvoice.warning.checkVATRate2"></label>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-outline-success" (click)="isSaveAndAdd ? saveAll(false) : saveAll(true)" jhiTranslate="entity.action.ok">Đồng
            ý
        </button>
        <button type="button" class="btn btn-outline-dark" (click)="closes()" jhiTranslate="entity.action.close">Đóng
        </button>
    </div>
</ng-template>
<ng-template #deleteItem let-d="dismiss">
    <form name="deleteForm">
        <div class="modal-header">
            <h4 class="modal-title" jhiTranslate="entity.delete.title">Confirm delete operation</h4>
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true"
                    (click)="d('Close')">&times;</button>
        </div>
        <div class="modal-body">
            <p id="eb-delete-sAInvoice-heading0" jhiTranslate="ebwebApp.sAInvoice.delete.question0" *ngIf="typeDelete === 0 || typeDelete === 2"></p>
            <p id="eb-delete-sAInvoice-heading1" jhiTranslate="ebwebApp.sAInvoice.delete.question1" *ngIf="typeDelete === 1"></p>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal" (click)="d('Close')">
                <fa-icon [icon]="'ban'"></fa-icon>&nbsp;<span jhiTranslate="entity.action.cancel">Cancel</span>
            </button>
            <button id="eb-confirm-delete-pPDiscountReturn" type="submit" class="btn btn-danger" (click)="deleteForm()">
                <fa-icon [icon]="'times'"></fa-icon>&nbsp;<span jhiTranslate="entity.action.delete">Delete</span>
            </button>
        </div>
    </form>
</ng-template>
<ng-template #contentCheckSave let-quantityExists="dismiss">
    <div class="modal-body">
        <form>
            <div class="form-group">
                <label *ngIf="checkOpenSave" jhiTranslate="ebwebApp.pPDiscountReturnDetails.error.quantityExistsErrorSave" translateValues="{textCode: '{{this.mgForPPOderTextCode.quantityExists}}'}">Vật tư hàng hóa + Mã VTHH</label>
                <label *ngIf="!checkOpenSave" jhiTranslate="ebwebApp.pPDiscountReturnDetails.error.minimumStockExistsErrorSave" translateValues="{textCode: '{{this.mgForPPOderTextCode.minimumStock}}'}">Vật tư hàng hóa + Mã VTHH</label>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-outline-success" (click)="isSaveAndAdd ? saveAndNewCheckEmployee() : saveCheckEmployee();quantityExists('Close')" jhiTranslate="entity.action.save">Save</button>
        <button type="button" class="btn btn-outline-dark" (click)="quantityExists('Close')" jhiTranslate="entity.action.close">close</button>
    </div>
</ng-template>

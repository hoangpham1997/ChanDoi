<div>
    <div>
        <div class="itemw">
            <div class="menu-tool-bar he">
                <div class="ptitle">
                    <span jhiTranslate="ebwebApp.saBill.title">Xuất hóa đơn</span>
                </div>
                <div>
                    <button class="button-navigation" *ebHasSomeAuthority="['ROLE_ADMIN', ROLE_Them]"
                            title="{{'ebwebApp.outWard.tooltipAdd' | translate}}" [routerLink]="['/xuat-hoa-don/new']">
                        <i class="mdi mdi-plus"></i>
                        <span jhiTranslate="entity.action.add"></span>
                    </button>
                    <button class="button-navigation" *ebHasSomeAuthority="['ROLE_ADMIN', ROLE_Xoa]" [disabled]="!xuatHoaDons || xuatHoaDons.length === 0 || isLoading || !selectedRow"
                            title="{{'ebwebApp.outWard.tooltipDrop' | translate}}"
                            (click)="delete()"><i
                        class="mdi mdi-delete"></i> <span jhiTranslate="entity.action.delete"></span>
                    </button>
                    <button class="button-navigation" [disabled]="isLoading" *ebHasSomeAuthority="['ROLE_ADMIN', ROLE_Upload]">
                        <i class="mdi mdi-file-upload"></i>
                        <span jhiTranslate="entity.action.uploadInvoice" (click)="uploadInvoice(uploadInvoiceModel)">Upload hóa đơn</span>
                    </button>
                    <button class="button-navigation" *ebHasSomeAuthority="['ROLE_ADMIN', ROLE_KetXuat]" [disabled]="!xuatHoaDons || xuatHoaDons.length === 0 ||isLoading"
                            title="{{'ebwebApp.outWard.tooltipExport' | translate}}">
                        <i class="mdi mdi-file-export"></i>
                        <span jhiTranslate="entity.action.render" (click)="exportPdf()">Kết xuất</span>
                    </button>

                    <button class="button-navigation" (click)="toggleSearch($event)" title="{{'ebwebApp.outWard.tooltipSearch' | translate}}">
                        <i class="{{searchVoucher.isShowSearch ? 'mdi mdi-chevron-up' : 'mdi mdi-magnify'}}"></i>
                        <span *ngIf="!searchVoucher.isShowSearch" jhiTranslate="ebwebApp.mBDeposit.home.advanceSearch"></span>
                        <span *ngIf="searchVoucher.isShowSearch" jhiTranslate="ebwebApp.mBDeposit.home.hideAdvanceSearch"></span>
                    </button>
                </div>
            </div>
        </div>
        <div class="frm-main frm-mains nobg">
            <form id="seach" style="background: #cbdcf0;" [hidden]="!searchVoucher.isShowSearch">
                <div class="row">
                    <div class="col-lg-3">
                        <div class="form-group row">
                            <label class="col-sm-4 col-form-label" style="padding: 0px 0px 0px 15px" jhiTranslate="ebwebApp.saBill.accountingObject">accountingObject</label>
                            <div class="col-sm-8 pd-l-0">
                                <combo-box id="field_accountingObject"
                                           [isOutTable]="true"
                                           name="comboboxaccountingObject"
                                           [dataList]="accountingObjects"
                                           [listColumns]="['accountingObjectCode', 'accountingObjectName']"
                                           displayMember="accountingObjectCode"
                                           valueName="id"
                                           [headerColumns]="['Mã đối tượng','Tên đối tượng']"
                                           [isObject]="false"
                                           [(ngModel)]="searchVoucher.accountingObjectID"
                                ></combo-box>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-sm-4 col-form-label" style="padding: 0px 0px 0px 15px"
                                   jhiTranslate="ebwebApp.saBill.invoice.fromDate">date</label>
                            <div class="col-sm-8">
                                <eb-date-picker [(ngModel)]="searchVoucher.fromInvoiceDate" name="fromdate"
                                                format="YYYYMMDD"></eb-date-picker>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-3">
                        <div class="form-group row">
                            <label class="col-sm-4 col-form-label p-0" jhiTranslate="ebwebApp.saBill.invoice.template">template</label>
                            <div class="col-sm-8">
                                <combo-box id="field_template"
                                           name="template"
                                           [isOutTable]="true"
                                           [dataList]="templates"
                                           [listColumns]="['invoiceFormName', 'invoiceTemplate', 'invoiceSeries']"
                                           displayMember="invoiceTemplate"
                                           valueName="invoiceTemplate"
                                           [headerColumns]="['Hình thức HĐ','Mẫu số HĐ', 'Ký hiệu HĐ']"
                                           [isObject]="true"
                                           [(ngModel)]="template"
                                           (ngModelChange)="selectTemplate()"
                                ></combo-box>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-sm-4 col-form-label"
                                   jhiTranslate="ebwebApp.saBill.invoice.toDate">date</label>
                            <div class="col-sm-8">
                                <eb-date-picker [(ngModel)]="searchVoucher.toInvoiceDate" name="todate"
                                                format="YYYYMMDD"></eb-date-picker>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="form-group row">
                            <label class="col-sm-2 col-form-label p-0"
                                   jhiTranslate="ebwebApp.saBill.invoice.series">series</label>
                            <div class="col-sm-4">
                                <combo-box id="field_invoiceSeries"
                                           name="invoiceSeries"
                                           [isOutTable]="true"
                                           [dataList]="series"
                                           [listColumns]="['name']"
                                           displayMember="name"
                                           valueName="name"
                                           [headerColumns]="['Ký hiệu']"
                                           [isObject]="false"
                                           [(ngModel)]="searchVoucher.invoiceSeries"
                                ></combo-box>
                            </div>
                            <label class="col-sm-2 col-form-label p-0" jhiTranslate="ebwebApp.saBill.invoice.no">Số hóa
                                đơn</label>
                            <div class="col-sm-4">
                                <input type="text" name="invoiceNo" [(ngModel)]="searchVoucher.invoiceNo"
                                       class="form-control" style="height: 28px!important;">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-sm-2 col-form-label" jhiTranslate="ebwebApp.sAInvoice.searchValue">Tìm
                                kiếm</label>
                            <div class="col-sm-10">
                                <input type="text" name="freeText" [(ngModel)]="searchVoucher.freeText"
                                       class="form-control" style="height: 28px!important;">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-12 mt-top-20">
                        <div class="frm-button">
                            <button class="btn btn-success btn-sm" style="font-size: 16px" (click)="search()">
                                <i class="mdi mdi-magnify" aria-hidden="true" style="margin-right: 5px"></i>
                                <span jhiTranslate="entity.searchform.search"></span>
                            </button>
                            <button class="btn btn-danger btn-sm" style="font-size: 16px" (click)="reset()">
                                <i class="mdi mdi-replay" style="margin-right: 5px"></i>
                                <span jhiTranslate="entity.searchform.reset"></span>
                            </button>
                        </div>
                    </div>
                </div>
            </form>
            <div class="frm-main frm-tables frm-padding no-highlight" style="background: #cbdcf0; margin-top: 5px">
                <div id="table-scroll0" class="table-scroll voucher-table">
                    <table id="main-table0" class="main-table">
                        <thead class="header-table">
                        <tr>
                            <th scope="col" jhiTranslate="ebwebApp.saBill.invoice.date">Ngày hóa đơn</th>
                            <th scope="col" jhiTranslate="ebwebApp.saBill.invoice.template">Mẫu số hóa đơn</th>
                            <th scope="col" jhiTranslate="ebwebApp.saBill.invoice.series">Ký hiệu hóa đơn</th>
                            <th scope="col" jhiTranslate="ebwebApp.saBill.invoice.no">Số hóa đơn</th>
                            <th scope="col" jhiTranslate="ebwebApp.saBill.accountingObjectName">Khách hàng</th>
                            <th scope="col" jhiTranslate="ebwebApp.saBill.totalAmount">Tổng tiền hàng</th>
                            <th scope="col" jhiTranslate="ebwebApp.saBill.totalDiscountAmount">Tổng tiền CK</th>
                            <th scope="col" jhiTranslate="ebwebApp.saBill.totalVATAmount">Tổng tiền GTGT</th>
                            <th scope="col" jhiTranslate="ebwebApp.saBill.totalAmountTt">Tổng tiền TT</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr *ngFor="let xuatHoaDon of xuatHoaDons"
                            [class.selected]="selectedRows.indexOf(xuatHoaDon) !== -1"
                            (click)="selectMultiRow(xuatHoaDon, $event, xuatHoaDons)"
                            (dblclick)="doubleClickRow(xuatHoaDon.rowIndex)">
                            <td title="{{xuatHoaDon.invoiceDate | date:'dd/MM/yyyy'}}" class="text-center">{{xuatHoaDon.invoiceDate | date:'dd/MM/yyyy'}}</td>
                            <td title="{{xuatHoaDon.invoiceTemplate}}" class="text-center">{{xuatHoaDon.invoiceTemplate}}</td>
                            <td title="{{xuatHoaDon.invoiceSeries}}">{{xuatHoaDon.invoiceSeries}}</td>
                            <td title="{{xuatHoaDon.invoiceNo}}">{{xuatHoaDon.invoiceNo}}</td>
                            <td title="{{xuatHoaDon.accountingObjectName}}">{{xuatHoaDon.accountingObjectName}}</td>
                            <td title="{{xuatHoaDon.totalAmount}}" class="jsgrid-align-right">
                                <input type="number" class="input-Cell" disabled
                                       [(ngModel)]="xuatHoaDon.totalAmount"
                                       ebCurrencyMask [systemOptions]="currentAccount?.systemOption" [type]="7">
                            </td>
                            <td title="{{xuatHoaDon.totalDiscountAmount}}" class="jsgrid-align-right">
                                <input type="number" class="input-Cell" disabled
                                       [(ngModel)]="xuatHoaDon.totalDiscountAmount"
                                       ebCurrencyMask [systemOptions]="currentAccount?.systemOption" [type]="7">
                            </td>
                            <td title="{{xuatHoaDon.totalVATAmount}}" class="jsgrid-align-right">
                                <input type="number" class="input-Cell" disabled
                                       [(ngModel)]="xuatHoaDon.totalVATAmount"
                                       ebCurrencyMask [systemOptions]="currentAccount?.systemOption" [type]="7">
                            </td>
                            <td title="{{xuatHoaDon.totalAmount - xuatHoaDon.totalDiscountAmount + xuatHoaDon.totalVATAmount}}" class="jsgrid-align-right">
                                <input type="number" class="input-Cell" disabled
                                       [ngModel]="xuatHoaDon.totalAmount - xuatHoaDon.totalDiscountAmount + xuatHoaDon.totalVATAmount"
                                       ebCurrencyMask [systemOptions]="currentAccount?.systemOption" [type]="7">
                            </td>
                        </tr>
                        <tr *ngFor="let xuatHoaDon of getEmptyRow(xuatHoaDons);" (click)="onSelect(null)">
                            <td>&nbsp;</td>
                            <td class="text-right"><input type="text" readonly
                                                          class="input-Cell"></td>
                            <td class="text-right">&nbsp;</td>
                            <td class="text-right">&nbsp;</td>
                            <td class="text-right">&nbsp;</td>
                            <td class="text-right">&nbsp;</td>
                            <td class="text-right">&nbsp;</td>
                            <td class="text-right">&nbsp;</td>
                            <td class="text-right">&nbsp;</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>

        </div>
        <!--        phân trang-->
        <div style="padding-right: 16px;">
            <div class="row" style="height: 32px">
                <div class="col-md-4">
                    <p style="padding-right: 5px;">
                        <span jhiTranslate="ebwebApp.saBill.totalAmountTt"></span>:
                        <input type="text" class="input-Cell-label" disabled
                               [ngModel]="xuatHoaDons[0]?.total"
                               ebCurrencyMask [systemOptions]="currentAccount?.systemOption" [type]="7"
                               [textAlign]="'left'">
                    </p>
                </div>
                <div class="col-md-8">
                    <div class="row justify-content-end" style="height:32px">
                        <div class="col-lg-4">
                            <div class="form-group row">
                                <label class="col-sm-9 col-form-label text-right" for="itemsPerPage">
                                    <span jhiTranslate="ebwebApp.mCPayment.total"></span> : {{totalItems}}
                                </label>
                                <div class="col-sm-3 pd-l-0">
                                    <select class="form-control form-control-sm" name="itemsPerPage" id="itemsPerPage"
                                            style="background-color: #f5f7fa;" [(ngModel)]="itemsPerPage" (ngModelChange)="loadPage(1)" >
                                        <option [value]="10">10</option>
                                        <option [value]="20">20</option>
                                        <option [value]="30">30</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="justify-content-end">
                            <ngb-pagination [size]="'sm'" [collectionSize]="totalItems" [(page)]="searchVoucher.page" [pageSize]="itemsPerPage"
                                            [maxSize]="5" [rotate]="true" [boundaryLinks]="true"
                                            (pageChange)="loadPage(searchVoucher.page)"></ngb-pagination>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--        end of phan trang-->
        <div>
            <ngb-tabset class="tool-navbar" [destroyOnHide]="true">
                <ngb-tab>
                    <ng-template ngbTabTitle><span jhiTranslate="ebwebApp.saBill.detail"></span></ng-template>
                    <ng-template ngbTabContent>
                        <div class="tab-content">
                            <div class="frm-main frm-padding tab-pane fade in active show" id="home-detail"
                                 style="background: #cbdcf0">
                                <div id="table-scroll-detail" class="table-scroll">
                                    <table id="main-table" class="main-table">
                                        <thead>
                                        <tr>
                                            <th scope="col" jhiTranslate="ebwebApp.saBill.materialGoodsID">Mã hàng</th>
                                            <th scope="col" jhiTranslate="ebwebApp.saBill.materialGoodsName">Tên hàng</th>
                                            <th scope="col" jhiTranslate="ebwebApp.saBill.unit">Đơn vị tính</th>
                                            <th scope="col" jhiTranslate="ebwebApp.saBill.isPromotion">Là hàng KM</th>
                                            <th scope="col" jhiTranslate="ebwebApp.saBill.quantity">Số lượng</th>
                                            <th scope="col" jhiTranslate="ebwebApp.saBill.unitPriceOriginal">Đơn giá</th>
                                            <th scope="col" jhiTranslate="ebwebApp.saBill.unitPrice" [hidden]="!selectedRow || selectedRow?.currencyID === currencyCode">Đơn giá QĐ</th>
<!--                                            <th scope="col" jhiTranslate="ebwebApp.saBill.mainUnit">ĐVT chính</th>-->
<!--                                            <th scope="col" jhiTranslate="ebwebApp.saBill.mainConvertRate">Tỷ lệ chuyển đổi</th>-->
<!--                                            <th scope="col" jhiTranslate="ebwebApp.saBill.formula">Phép tính</th>-->
<!--                                            <th scope="col" jhiTranslate="ebwebApp.saBill.mainQuantity">Số lượng theo ĐVC</th>-->
<!--                                            <th scope="col" jhiTranslate="ebwebApp.saBill.mainUnitPrice">Đơn giá theo ĐVC</th>-->
                                            <th scope="col" jhiTranslate="ebwebApp.saBill.amountOriginal">Thành tiền</th>
                                            <th scope="col" jhiTranslate="ebwebApp.saBill.amount" [hidden]="!selectedRow || selectedRow?.currencyID === currencyCode">Thành tiền QĐ</th>
                                            <th scope="col" jhiTranslate="ebwebApp.saBill.discountRate">Tỷ lệ CK</th>
                                            <th scope="col" jhiTranslate="ebwebApp.saBill.discountAmountOriginal">Tiền CK</th>
                                            <th scope="col" jhiTranslate="ebwebApp.saBill.discountAmount" [hidden]="!selectedRow || selectedRow?.currencyID === currencyCode">Tiền CK QĐ</th>
                                            <th *ngIf="!hiddenVAT" scope="col" jhiTranslate="ebwebApp.saBill.vatRate">% thuế GTGT</th>
                                            <th *ngIf="!hiddenVAT" scope="col" jhiTranslate="ebwebApp.saBill.vatAmountOriginal">Tiền thuế GTGT</th>
                                            <th scope="col" jhiTranslate="ebwebApp.saBill.vatAmount" [hidden]="!selectedRow || selectedRow?.currencyID === currencyCode || hiddenVAT">Tiền thuế GTGT QĐ</th>
                                            <th scope="col" jhiTranslate="ebwebApp.saBill.lotNo">Số lô</th>
                                            <th scope="col" jhiTranslate="ebwebApp.saBill.expiredDate">Hạn dùng</th>
                                            <th *ngIf="hiddenVAT" scope="col" jhiTranslate="ebwebApp.sAInvoiceDetails.careerGroupID"></th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr *ngFor="let detail of xuatHoaDonDetails">
                                            <td title="{{detail.materialGoods?.materialGoodsCode}}">{{detail.materialGoods?.materialGoodsCode}}</td>
                                            <td title="{{detail.description}}">{{detail.description}}</td>
                                            <td title="{{detail.unit?.unitName}}">{{detail.unit?.unitName}}</td>
                                            <td class="text-center eb-read-only">
                                                <div class="custom-control custom-checkbox">
                                                    <input type="checkbox" class="custom-control-input" id="customCheck1" [(ngModel)]="detail.isPromotion">
                                                    <label class="custom-control-label" for="customCheck1"></label>
                                                </div>
                                            </td>
                                            <td title="{{detail.quantity}}" class="jsgrid-align-right">
                                                <input type="number" class="input-Cell" disabled
                                                       [ngModel]="detail.quantity"
                                                       ebCurrencyMask [systemOptions]="currentAccount?.systemOption" [type]="3">
                                            </td>
                                            <td title="{{detail.unitPriceOriginal}}" class="jsgrid-align-right">
                                                <input type="number" class="input-Cell" disabled
                                                       [ngModel]="detail.unitPriceOriginal"
                                                       ebCurrencyMask [systemOptions]="currentAccount?.systemOption" [type]="selectedRow?.currencyID === currencyCode ? 2 : 1">
                                            </td>
                                            <td title="{{detail.unitPrice}}" class="jsgrid-align-right" [hidden]="!selectedRow || selectedRow?.currencyID === currencyCode">
                                                <input type="number" class="input-Cell" disabled
                                                       [ngModel]="detail.unitPrice"
                                                       ebCurrencyMask [systemOptions]="currentAccount?.systemOption" [type]="1">
                                            </td>
<!--                                            <td title="{{detail.mainUnit?.unitName}}">{{detail.mainUnit?.unitName}}</td>-->
<!--                                            <td title="{{detail.mainConvertRate}}" class="jsgrid-align-right">-->
<!--                                                <input type="number" class="input-Cell"-->
<!--                                                       [ngModel]="detail.mainConvertRate" disabled-->
<!--                                                       ebCurrencyMask [systemOptions]="currentAccount?.systemOption" [type]="4">-->
<!--                                            </td>-->
<!--                                            <td title="{{detail.formula}}">{{detail.formula}}</td>-->
<!--                                            <td title="{{detail.mainQuantity}}" class="jsgrid-align-right">-->
<!--                                                <input type="number" class="input-Cell"-->
<!--                                                       [ngModel]="detail.mainQuantity" disabled-->
<!--                                                       ebCurrencyMask [systemOptions]="currentAccount?.systemOption" [type]="3">-->
<!--                                            </td>-->
<!--                                            <td  title="{{detail.mainUnitPrice}}" class="jsgrid-align-right">-->
<!--                                                <input type="number" class="input-Cell" disabled-->
<!--                                                       [ngModel]="detail.mainUnitPrice"-->
<!--                                                       ebCurrencyMask [systemOptions]="currentAccount?.systemOption" [type]="1">-->
<!--                                            </td>-->
                                            <td title="{{detail.amountOriginal}}" class="jsgrid-align-right">
                                                <input type="number" class="input-Cell" disabled
                                                       [ngModel]="detail.amountOriginal"
                                                       ebCurrencyMask [systemOptions]="currentAccount?.systemOption" [type]="selectedRow?.currencyID === currencyCode ? 8 : 7">
                                            </td>
                                            <td title="{{detail.amount}}" class="jsgrid-align-right" [hidden]="!selectedRow || selectedRow?.currencyID === currencyCode">
                                                <input type="number" class="input-Cell" disabled
                                                       [ngModel]="detail.amount"
                                                       ebCurrencyMask [systemOptions]="currentAccount?.systemOption" [type]="7">
                                            </td>
                                            <td title="{{detail.discountRate}}" class="jsgrid-align-right">
                                                <input type="number" class="input-Cell" disabled
                                                       [ngModel]="detail.discountRate"
                                                       ebCurrencyMask [systemOptions]="currentAccount?.systemOption" [type]="5">
                                            </td>
                                            <td title="{{detail.discountAmountOriginal}}" class="jsgrid-align-right">
                                                <input type="number" class="input-Cell" disabled
                                                       [ngModel]="detail.discountAmountOriginal"
                                                       ebCurrencyMask [systemOptions]="currentAccount?.systemOption" [type]="selectedRow?.currencyID === currencyCode ? 8 : 7">
                                            </td>
                                            <td title="{{detail.discountAmount}}" class="jsgrid-align-right" [hidden]="!selectedRow || selectedRow?.currencyID === currencyCode">
                                                <input type="number" class="input-Cell" disabled
                                                       [ngModel]="detail.discountAmount"
                                                       ebCurrencyMask [systemOptions]="currentAccount?.systemOption" [type]="7">
                                            </td>
                                            <td *ngIf="!hiddenVAT" title="{{getVATRate(detail.vatRate)}}" class="jsgrid-align-right">
                                                {{getVATRate(detail.vatRate)}}
                                            </td>
                                            <td *ngIf="!hiddenVAT" title="{{detail.vatAmountOriginal}}" class="jsgrid-align-right">
                                                <input type="number" class="input-Cell" disabled
                                                       [ngModel]="detail.vatAmountOriginal"
                                                       ebCurrencyMask [systemOptions]="currentAccount?.systemOption" [type]="selectedRow?.currencyID === currencyCode ? 8 : 7">
                                            </td>
                                            <td title="{{detail.vatAmount}}" class="jsgrid-align-right" [hidden]="!selectedRow || selectedRow?.currencyID === currencyCode || hiddenVAT">
                                                <input type="number" class="input-Cell" disabled
                                                       [ngModel]="detail.vatAmount"
                                                       ebCurrencyMask [systemOptions]="currentAccount?.systemOption" [type]="7">
                                            </td>
                                            <td title="{{detail.lotNo}}">{{detail.lotNo}}</td>
                                            <td title="{{detail.expiryDate | date:'dd/MM/yyyy'}}" class="text-center">{{detail.expiryDate | date:'dd/MM/yyyy'}}</td>
                                            <td *ngIf="hiddenVAT"
                                                title="{{getCareerGroupID(detail.careerGroupID)}}" class="ellip">{{getCareerGroupID(detail.careerGroupID)}}</td>
                                        </tr>
                                        <tr *ngFor="let detail of getEmptyRow(xuatHoaDonDetails)">
                                            <td [hidden]="!selectedRow || selectedRow?.currencyID === currencyCode">&nbsp;</td>
                                            <td [hidden]="!selectedRow || selectedRow?.currencyID === currencyCode">&nbsp;</td>
                                            <td [hidden]="!selectedRow || selectedRow?.currencyID === currencyCode">&nbsp;</td>
                                            <td [hidden]="!selectedRow || selectedRow?.currencyID === currencyCode || hiddenVAT">&nbsp;</td>
<!--                                            <td>&nbsp;</td>-->
<!--                                            <td>&nbsp;</td>-->
<!--                                            <td>&nbsp;</td>-->
<!--                                            <td>&nbsp;</td>-->
<!--                                            <td>&nbsp;</td>-->
                                            <td *ngIf="!hiddenVAT">&nbsp;</td>
                                            <td *ngIf="!hiddenVAT">&nbsp;</td>
                                            <td><input type="text" readonly
                                                       class="input-Cell"></td>
                                            <td>&nbsp;</td>
                                            <td>&nbsp;</td>
                                            <td>&nbsp;</td>
                                            <td>&nbsp;</td>
                                            <td>&nbsp;</td>
                                            <td>&nbsp;</td>
                                            <td>&nbsp;</td>
                                            <td>&nbsp;</td>
                                            <td>&nbsp;</td>
                                            <td>&nbsp;</td>
                                            <td *ngIf="hiddenVAT">&nbsp;</td>
                                        </tr>
                                        </tbody>
                                        <tfoot>
                                        <tr>
                                            <td class="cell-Table countRow">
                                                <input type="text" readonly
                                                       class="input-Cell"
                                                       value="{{'ebwebApp.purchaseOrder.countLine'| translate}} : {{xuatHoaDonDetails.length}}">
                                            </td>
                                            <td class="countRow"></td>
                                            <td class="countRow"></td>
                                            <td class="countRow"></td>
                                            <td class="countRow"></td>
                                            <td class="countRow"></td>
                                            <td class="countRow" [hidden]="!selectedRow || selectedRow?.currencyID === currencyCode"></td>
                                            <td class="jsgrid-align-right countRow">
                                                <input type="number" class="input-Cell" disabled
                                                       [ngModel]="sum('amountOriginal')"
                                                       ebCurrencyMask [systemOptions]="currentAccount?.systemOption" [type]="selectedRow?.currencyID === currencyCode ? 8 : 7">
                                            </td>
                                            <td class="jsgrid-align-right countRow" [hidden]="!selectedRow || selectedRow?.currencyID === currencyCode">
                                                <input type="number" class="input-Cell" disabled
                                                       [ngModel]="sum('amount')"
                                                       ebCurrencyMask [systemOptions]="currentAccount?.systemOption" [type]="7">
                                            </td>
                                            <td class="countRow"></td>
                                            <td class="jsgrid-align-right countRow">
                                                <input type="number" class="input-Cell" disabled
                                                       [ngModel]="sum('discountAmountOriginal')"
                                                       ebCurrencyMask [systemOptions]="currentAccount?.systemOption" [type]="selectedRow?.currencyID === currencyCode ? 8 : 7">
                                            </td>
                                            <td class="jsgrid-align-right countRow" [hidden]="!selectedRow || selectedRow?.currencyID === currencyCode">
                                                <input type="number" class="input-Cell" disabled
                                                       [ngModel]="sum('discountAmount')"
                                                       ebCurrencyMask [systemOptions]="currentAccount?.systemOption" [type]="7">
                                            </td>
                                            <td *ngIf="!hiddenVAT" class="countRow"></td>
                                            <td *ngIf="!hiddenVAT" class="jsgrid-align-right countRow">
                                                <input type="number" class="input-Cell" disabled
                                                       [ngModel]="sum('vatAmountOriginal')"
                                                       ebCurrencyMask [systemOptions]="currentAccount?.systemOption" [type]="selectedRow?.currencyID === currencyCode ? 8 : 7">
                                            </td>
                                            <td class="jsgrid-align-right countRow" [hidden]="!selectedRow || selectedRow?.currencyID === currencyCode || hiddenVAT">
                                                <input type="number" class="input-Cell" disabled
                                                       [ngModel]="sum('vatAmount')"
                                                       ebCurrencyMask [systemOptions]="currentAccount?.systemOption" [type]="7">
                                            </td>
                                            <td class="jsgrid-align-right countRow"></td>
                                            <td class="jsgrid-align-right countRow"></td>
                                            <td *ngIf="hiddenVAT" class="countRow jsgrid-align-right"></td>
                                        </tr>
                                        </tfoot>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </ng-template>
                </ngb-tab>
                <ngb-tab>
                    <ng-template ngbTabTitle><span jhiTranslate="ebwebApp.saBill.refDoc"></span></ng-template>
                    <ng-template ngbTabContent>
                        <div class="tab-content">
                            <div class="frm-main frm-padding tab-pane fade in active show" id="home-ref"
                                 style="background: #cbdcf0">
                                <div id="table-scroll-ref" class="table-scroll">
                                    <table id="main-table1" class="main-table">
                                        <thead>
                                        <tr>
                                            <th scope="col" jhiTranslate="ebwebApp.saBill.vDate">Ngày chứng từ</th>
                                            <th scope="col" jhiTranslate="ebwebApp.saBill.postedDate">Ngày hạch toán</th>
                                            <th scope="col" jhiTranslate="ebwebApp.saBill.noFBook">Số chứng từ</th>
                                            <th scope="col" jhiTranslate="ebwebApp.saBill.reason">Diễn giải</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr *ngFor="let viewVoucher of refVoucher">
                                            <td title="{{viewVoucher.date}}" class="jsgrid-cell jsgrid-align-center">{{viewVoucher.date}}</td>
                                            <td title="{{viewVoucher.postedDate}}" class="jsgrid-cell jsgrid-align-center">{{viewVoucher.postedDate}}</td>
                                            <td class="jsgrid-cell" (click)="utilService.viewRefVoucher(viewVoucher)" style="color:blue; text-decoration: underline;">{{viewVoucher.no}}</td>
                                            <td title="{{viewVoucher.reason}}" class="jsgrid-cell">{{viewVoucher.reason}}</td>
                                        </tr>
                                        <tr *ngFor="let l of newArr(10 - refVoucher?.length)">
                                            <td><input type="text" class="input-Cell" readonly></td>
                                            <td><input type="text" class="input-Cell" readonly></td>
                                            <td><input type="text" class="input-Cell" readonly></td>
                                            <td><input type="text" class="input-Cell" readonly></td>
                                        </tr>
                                        </tbody>
                                        <tfoot>
                                        <tr>
                                            <td class="cell-Table countRow">
                                                <input type="text" readonly
                                                       class="input-Cell"
                                                       value="{{'ebwebApp.purchaseOrder.countLine'| translate}} : {{refVoucher.length}}">
                                            </td>
                                            <td class="countRow"></td>
                                            <td class="countRow"></td>
                                            <td class="countRow"></td>
                                        </tr>
                                        </tfoot>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </ng-template>
                </ngb-tab>
            </ngb-tabset>
        </div>
    </div>
</div>
<ng-template #uploadInvoiceModel let-d="dismiss">
    <div id="ModalCustom">
        <div class="modal-lg">
            <div class="modal-content">
                <div class="modal-header" style="padding: 15px 10px 10px 10px;">
                    <div class="d-flex flex-wrap col-md-11">
                        <h3 class="modal-title-detail"><span
                            class="text-uppercase" jhiTranslate="ebwebApp.saBill.upload.title">Upload hóa đơn</span></h3>
                    </div>
                    <a class="close-modal" data-dismiss="modal" (click)="d('Close')"
                       aria-label="Close">
                        <span aria-hidden="true">×</span>
                    </a>
                </div>
                <div>
                    <div class="modal-body">
                        <div class="row">
                            <div class="col-md-12">
                                <span jhiTranslate="ebwebApp.saBill.fileTemplate">Tải về mẫu file: </span> <a style="color: #007bff;"><span (click)="downloadTem()">Tải xuống</span></a>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-10">
                                <label><span  jhiTranslate="ebwebApp.saBill.uploadFile">Tải lên file dữ liệu</span></label>
                                <div class="custom-file">
                                    <input type="file" class="custom-file-input" id="customFile" (change)="changeFile($event)">
                                    <label class="custom-file-label" for="customFile">{{file?.name}}</label>
                                </div>
                            </div>
                            <div class="col-md-2 text-right">
                                <label>&nbsp;</label>
                                <div>
                                    <button class="btn btn-success" (click)="upload(downFile)" jhiTranslate="entity.action.upload">Upload</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</ng-template>

<ng-template #downFile let-d="dismiss">
    <div id="ModalCustom2">
        <div class="modal-lg">
            <div class="modal-content">
                <div class="modal-header" style="padding: 15px 10px 10px 10px;">
                    <div class="d-flex flex-wrap col-md-11">
                        <h3 class="modal-title-detail"><span
                            class="text-uppercase" jhiTranslate="ebwebApp.saBill.upload.title">Upload hóa đơn</span></h3>
                    </div>
                    <a class="close-modal" data-dismiss="modal" (click)="d('Close')"
                       aria-label="Close">
                        <span aria-hidden="true">×</span>
                    </a>
                </div>
                <div>
                    <div class="modal-body">
                        <div class="row">
                            <div class="col-md-12">
                                <span jhiTranslate="ebwebApp.saBill.error.fileError">Dữ liệu không chính xác, bạn có muốn tải về file lỗi?</span>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12 text-right">
                                <label></label>
                                <div>
                                    <button class="btn btn-default" (click)="d('Close')" jhiTranslate="entity.action.close">close</button>
                                    <button class="btn btn-success" (click)="download()" jhiTranslate="entity.action.download">download</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</ng-template>
<ng-template #popUpMultiDelete let-modal>
    <div class="modal-body">
        <form>
            <div class="form-group">
                <label jhiTranslate="ebwebApp.mBDeposit.multiDeleteMessage">Bạn có chắc chắn muốn xóa những chứng từ này
                    không?</label>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-outline-danger" (click)="deleteVoucher()"
                jhiTranslate="entity.action.delete">
        </button>
        <button type="button" class="btn btn-outline-dark" (click)="closePopUpDelete()"
                jhiTranslate="ebwebApp.mBDeposit.return">
        </button>
    </div>
</ng-template>
<ng-template #deleteItem let-modal>
    <div class="modal-body">
        <form>
            <div class="form-group">
                <p id="eb-delete-mCReceipt-heading" jhiTranslate="ebwebApp.saBill.delete.question" *ngIf="(typeDelete === 0 || typeDelete === 3) && !warningDelete"></p>
                <p id="eb-delete-sAInvoice-heading1" jhiTranslate="ebwebApp.saBill.delete.question1" *ngIf="typeDelete === 1"></p><br *ngIf="typeDelete === 1">
                <p id="eb-delete-sAInvoice-heading2" jhiTranslate="ebwebApp.saBill.delete.question2" *ngIf="warningDelete"></p>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-outline-danger" (click)="deleteForm()"
                jhiTranslate="entity.action.delete">
        </button>
        <button type="button" class="btn btn-outline-dark" (click)="closePopUpDelete()"
                jhiTranslate="ebwebApp.mBDeposit.return">
        </button>
    </div>
</ng-template>


<div >
    <div >
        <div class="menu-tool-bar he">
            <div class="ptitle">
                <span>CHUYỂN ĐỔI HÓA ĐƠN</span>
            </div>
            <div class="gr-toolbar">
                <a *ebHasSomeAuthority="['ROLE_ADMIN', ROLE_ChuyenDoiCMNG]" (click)="convertedOrigin(content)">
                    <svg class="icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Layer_1" x="0px" y="0px" viewBox="0 0 432 432" style="enable-background:new 0 0 432 432;" xml:space="preserve">
<path d="M253.2,183.8c-27.5-27.4-64-42.6-102.8-42.6S75,156.3,47.6,183.8C20.1,211.2,5,247.7,5,286.6S20.1,362,47.6,389.4  s64,42.6,102.8,42.6s75.4-15.1,102.8-42.6c27.5-27.4,42.6-64,42.6-102.8S280.7,211.2,253.2,183.8z M107.2,308.2l-64.9-64.9  l64.9-64.9v28H181v73.8h-73.8V308.2z M193.6,394.7v-28h-73.8v-73.8h73.8v-28l64.9,64.9L193.6,394.7z"/>
                        <polygon points="340.1,87.3 418.7,87.3 340.1,8.7 "/>
                        <path d="M325.2,117.2c-8.3,0-14.9-6.6-14.9-14.9V0H98.6c-8.3,0-14.9,6.6-14.9,14.9v83.6v31.1c20.8-8.9,43.4-13.5,66.7-13.5  c45.4,0,88.2,17.7,120.5,49.9v0c32.2,32.1,49.9,74.9,49.9,120.5s-17.7,88.4-49.9,120.5c-9.6,9.6-20.2,18-31.5,24.9h70.8v0h102.2  c8.3,0,14.9-6.6,14.9-14.9V314.8V139.2v-22.1H325.2z"/>
</svg>
                    <span>Chuyển đổi chứng minh nguồn gốc</span></a>
                <a *ebHasSomeAuthority="['ROLE_ADMIN', ROLE_ChuyenDoiLuuTru]" [hidden]="NCCDV === NCCDV_EINVOICE.SIV" (click)="ConvertedStorage()">
                    <svg class="icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Layer_1" x="0px" y="0px" viewBox="0 0 432 432" style="enable-background:new 0 0 432 432;" xml:space="preserve">
<g>
	<path d="M368,48c0-26.5-82.4-48-184-48S0,21.5,0,48s82.4,48,184,48S368,74.5,368,48z"/>
    <path d="M166.1,407.1c-21-20.9-35.8-46.4-43.6-74.1c-1.9-0.2-3.8-0.4-5.6-0.6l-2.9-0.3c-3.9-0.4-7.7-0.9-11.5-1.4l-2-0.3   c-3.3-0.5-6.6-1-9.8-1.5c-0.9-0.1-1.8-0.3-2.7-0.4c-3.7-0.6-7.3-1.3-10.8-1.9l-2.1-0.4c-3-0.6-6-1.2-9-1.9   c-0.8-0.2-1.6-0.3-2.4-0.5c-3.4-0.8-6.7-1.6-9.9-2.4c-0.7-0.2-1.4-0.4-2.1-0.6c-2.7-0.7-5.4-1.5-8-2.3l-2-0.6   c-3-0.9-5.9-1.9-8.7-2.9l-2-0.7c-2.4-0.9-4.8-1.8-7-2.7l-1.5-0.6c-2.6-1.1-5-2.2-7.4-3.4l-1.7-0.9c-2.1-1.1-4-2.1-5.9-3.2   c-0.3-0.2-0.7-0.4-1-0.6c-2.1-1.3-4-2.6-5.8-3.9c-0.2-0.1-0.4-0.3-0.6-0.4V384c0,20,70,48,184,48c4.6,0,9,0,13.5-0.1   C186.2,424.9,175.7,416.7,166.1,407.1z"/>
    <path d="M116.2,286.6c0-22.7,4.4-44.7,12.8-65l-1.3-0.1c-3.6-0.3-7.2-0.7-10.7-1.1l-2.9-0.3c-3.9-0.4-7.7-0.9-11.5-1.4l-2-0.3   c-3.3-0.5-6.6-1-9.8-1.5c-0.9-0.1-1.8-0.3-2.7-0.4c-3.7-0.6-7.3-1.3-10.8-1.9l-2.1-0.4c-3-0.6-6-1.2-9-1.9   c-0.8-0.2-1.6-0.3-2.4-0.5c-3.4-0.8-6.7-1.6-9.9-2.4c-0.7-0.2-1.4-0.4-2.1-0.6c-2.7-0.7-5.4-1.5-8-2.3l-2-0.6   c-3-0.9-5.9-1.9-8.7-2.9l-2-0.7c-2.4-0.9-4.8-1.8-7-2.7l-1.5-0.6c-2.6-1.1-5-2.2-7.4-3.4l-1.7-0.9c-2.1-1.1-4-2.1-5.9-3.2   c-0.3-0.2-0.7-0.4-1-0.6c-2.1-1.3-4-2.6-5.8-3.9c-0.2-0.1-0.4-0.3-0.6-0.4V272c0,15.9,43.9,36.7,118.8,44.7   C117.1,306.9,116.2,296.8,116.2,286.6z"/>
    <path d="M166.1,166.1c32.1-32.2,74.9-49.9,120.5-49.9c28.9,0,56.7,7.2,81.4,20.7l0-62.5c-0.2,0.1-0.4,0.3-0.6,0.4   c-1.8,1.3-3.7,2.6-5.8,3.9c-0.3,0.2-0.7,0.4-1,0.6c-1.9,1.1-3.8,2.2-5.9,3.2l-1.7,0.9c-2.4,1.2-4.8,2.3-7.4,3.4l-1.5,0.6   c-2.3,0.9-4.6,1.9-7,2.7l-2,0.7c-2.8,1-5.7,2-8.7,2.9l-2,0.6c-2.6,0.8-5.3,1.5-8,2.3c-0.7,0.2-1.4,0.4-2.1,0.6   c-3.2,0.8-6.5,1.6-9.9,2.4c-0.8,0.2-1.6,0.4-2.4,0.5c-2.9,0.7-5.9,1.3-9,1.9l-2.1,0.4c-3.5,0.7-7.1,1.3-10.8,1.9   c-0.9,0.2-1.8,0.3-2.7,0.4c-3.2,0.5-6.5,1-9.8,1.5l-2,0.3c-3.8,0.5-7.6,1-11.5,1.4l-2.9,0.3c-3.5,0.4-7.1,0.7-10.7,1.1l-1.5,0.1   c-4,0.4-8,0.6-12,0.9l-3,0.3c-3.8,0.2-7.6,0.4-11.4,0.6l-0.9,0c-4.1,0.2-8.2,0.3-12.3,0.4l-3,0.1c-4.1,0.1-8.2,0.1-12.4,0.1   c-4.1,0-8.2-0.1-12.4-0.1l-3-0.1c-4.1-0.1-8.2-0.2-12.2-0.4l-1,0c-3.8-0.2-7.6-0.4-11.4-0.6l-3-0.2c-4-0.3-8-0.6-12-0.9l-1.5-0.1   c-3.6-0.3-7.2-0.7-10.7-1.1l-2.9-0.3c-3.9-0.4-7.7-0.9-11.5-1.4l-2-0.3c-3.3-0.5-6.6-1-9.8-1.5c-0.9-0.1-1.8-0.3-2.7-0.4   c-3.7-0.6-7.3-1.3-10.8-1.9l-2.1-0.4c-3-0.6-6-1.2-9-1.9c-0.8-0.2-1.6-0.3-2.4-0.5c-3.4-0.8-6.7-1.6-9.9-2.4   c-0.7-0.2-1.4-0.4-2.1-0.6c-2.7-0.7-5.4-1.5-8-2.3l-2-0.6c-3-0.9-5.9-1.9-8.7-2.9l-2-0.7c-2.4-0.9-4.8-1.8-7-2.7l-1.5-0.6   c-2.6-1.1-5-2.2-7.4-3.4l-1.7-0.9c-2.1-1.1-4-2.1-5.9-3.2c-0.3-0.2-0.7-0.4-1-0.6c-2.1-1.3-4-2.6-5.8-3.9c-0.2-0.1-0.4-0.3-0.6-0.4   V160c0,17,50.8,39.9,136.2,46.3C144,191.6,154.1,178.1,166.1,166.1z"/>
    <path d="M389.4,183.8c-27.5-27.4-64-42.6-102.8-42.6s-75.4,15.1-102.8,42.6c-27.5,27.4-42.6,64-42.6,102.8s15.1,75.4,42.6,102.8   s64,42.6,102.8,42.6s75.4-15.1,102.8-42.6c27.5-27.4,42.6-64,42.6-102.8S416.9,211.2,389.4,183.8z M243.4,308.2l-64.9-64.9   l64.9-64.9v28h73.8v73.8h-73.8V308.2z M329.8,394.7v-28H256v-73.8h73.8v-28l64.9,64.9L329.8,394.7z"/>
</g>
</svg>
                    <span>Chuyển đổi lưu trữ </span></a>
                <a (click)="toggleSearch($event)" *ngIf="isShowSearch">
                    <i class="{{isShowSearch?'mdi mdi-chevron-up':'mdi mdi-magnify'}}"></i>
                    <span jhiTranslate="ebwebApp.mBDeposit.home.hideAdvanceSearch"></span>
                </a>
                <a (click)="toggleSearch($event)" *ngIf="!isShowSearch">
                    <i class="{{isShowSearch?'mdi mdi-chevron-up':'mdi mdi-magnify'}}"></i>
                    <span jhiTranslate="ebwebApp.mBDeposit.home.advanceSearch"></span>
                </a>
            </div>
        </div>

        <div class="frm-main frm-mains nobg">
            <form id="search" style="background: #cbdcf0;" [hidden]="!isShowSearch">
                <div class="row">
                    <div class="col-lg-3">
                        <div class="form-group row">
                            <label class="col-sm-5 col-form-label" jhiTranslate="entity.searchform.accountingobject">Đối
                                tượng</label>
                            <div class="col-sm-7">
                                <combo-box name="{{'comboboxaccountingObject_DT'}}"
                                           [dataList]="accountingObjects"
                                           [isOutTable]="true"
                                           [listColumns]="utilsService.listColumnsAccountingObjects"
                                           displayMember="accountingObjectCode"
                                           valueName="id"
                                           [headerColumns]="utilsService.listHeaderColumnsAccountingObject"
                                           [isObject]="false"
                                           [(ngModel)]="search.accountingObjectID"
                                ></combo-box>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-sm-5 col-form-label text-left"
                                   jhiTranslate="ebwebApp.mBDeposit.detail.fromDate">Từ ngày</label>
                            <div class="col-sm-7">
                                <eb-date-picker id="fromDate" name="fromDate" [(ngModel)]="search.fromDate"></eb-date-picker>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-3">
                        <div class="form-group row">
                            <label class="col-sm-5 col-form-label jsgrid-align-right"
                                   for="field_searchInvoiceNo"
                                   jhiTranslate="ebwebApp.eInvoice.InvoiceNo">Số hóa đơn</label>
                            <div class="col-sm-7">
                                <input [(ngModel)]="search.textSearch" name="field_searchInvoiceNo" id="field_searchInvoiceNo"
                                       type="text" class="form-control form-control-sm">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-sm-5 col-form-label text-right"
                                   jhiTranslate="ebwebApp.mBDeposit.detail.toDate">Đến ngày</label>
                            <div class="col-sm-7">
                                <eb-date-picker id="toDate" name="toDate" [(ngModel)]="search.toDate"></eb-date-picker>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-3">
                        <div class="form-group row">
                            <label class="col-sm-5 col-form-label" jhiTranslate="ebwebApp.eInvoice.InvoiceTemplate">Mẫu số hóa đơn</label>
                            <div class="col-sm-7">
                                <combo-box id="field_template"
                                           name="template"
                                           [isOutTable]="true"
                                           [dataList]="templates"
                                           [listColumns]="['invoiceTemplate', 'invoiceSeries']"
                                           displayMember="invoiceTemplate"
                                           valueName="invoiceTemplate"
                                           [headerColumns]="['Mẫu số HĐ', 'Ký hiệu HĐ']"
                                           [isObject]="true"
                                           [(ngModel)]="invoiceTemplate"
                                           (ngModelChange)="changeInvoiceTemplate()"
                                ></combo-box>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-sm-5 col-form-label text-left"
                                   jhiTranslate="ebwebApp.eInvoice.StatusInvoice">TT hóa đơn</label>
                            <div class="col-sm-7">
                                <combo-box style="" id="field_listRecord"
                                           name="comboboxListStatus"
                                           [dataList]="listStatus"
                                           [isOutTable]="true"
                                           [valueIsNumber]="true"
                                           [listColumns]="listColumnsStatus"
                                           displayMember="name"
                                           valueName="value"
                                           [headerColumns]="listHeaderColumnsStatus"
                                           [isObject]="false"
                                           [(ngModel)]="search.status">
                                </combo-box>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-3">
                        <div class="form-group row">
                            <label class="col-sm-5 col-form-label jsgrid-align-right"
                                   jhiTranslate="ebwebApp.eInvoice.InvoiceSeries">Ký hiệu hóa đơn</label>
                            <div class="col-sm-7">
                                <combo-box id="field_invoiceSeries"
                                           name="invoiceSeries"
                                           [isOutTable]="true"
                                           [dataList]="series"
                                           [listColumns]="['name']"
                                           displayMember="name"
                                           valueName="name"
                                           [headerColumns]="['Ký hiệu']"
                                           [isObject]="false"
                                           [(ngModel)]="search.invoiceSeries"
                                ></combo-box>
                            </div>
                        </div>
                        <div [hidden]="true" class="form-group row">
                            <label class="col-sm-5 col-form-label text-right"
                                   jhiTranslate="ebwebApp.eInvoice.StatusSendMail">Trạng thái gửi Mail</label>
                            <div class="col-sm-7">
                                <combo-box style="" id="field_listSearchSendMail"
                                           name="comboboxListSearchSendMail"
                                           [dataList]="listStatusSendMail"
                                           [isOutTable]="true"
                                           [valueIsNumber]="true"
                                           [listColumns]="listColumnsStatus"
                                           displayMember="name"
                                           valueName="value"
                                           [headerColumns]="listHeaderColumnsStatus"
                                           [isObject]="false"
                                           [(ngModel)]="search.statusSendMail">
                                </combo-box>
                            </div>
                        </div>
                    </div>
                    <div class="col-12">
                        <div class="frm-button">
                            <button class="btn btn-success btn-sm" (click)="searchVoucher(true)" style="font-size: 16px"><i
                                class="mdi mdi-magnify"
                                aria-hidden="true"
                                style="margin-right: 5px"></i><span
                                jhiTranslate="ebwebApp.purchaseOrder.search"></span>
                            </button>
                            <button class="btn btn-danger btn-sm" (click)="resetSearch()" style="font-size: 16px"><i
                                class="mdi mdi-replay"
                                style="margin-right: 5px"></i><span
                                jhiTranslate="ebwebApp.mBDeposit.detail.reset"></span>
                            </button>
                        </div>
                    </div>
                </div>
            </form>
            <div class="frm-main frm-tables frm-padding" style="background: #cbdcf0; margin-top: 5px">
                <div id="table-scroll0" class="table-scroll">
                    <table id="main-table0" class="main-table">
                        <thead>
                        <tr>
                            <th scope="col" class="check">
                                <div class="custom-control custom-checkbox">
                                    <input type="checkbox" class="custom-control-input" id="check-all" [checked]="isCheckAll()" (change)="checkAll()">
                                    <label class="custom-control-label" for="check-all"></label>
                                </div>
                            </th>
                            <th scope="col" jhiTranslate="ebwebApp.eInvoice.InvoiceTemplate">Mẫu số hóa đơn</th>
                            <th scope="col" jhiTranslate="ebwebApp.eInvoice.InvoiceSeries">Ký hiệu HĐ</th>
                            <th scope="col" jhiTranslate="ebwebApp.eInvoice.InvoiceNo">Số HĐ</th>
                            <th scope="col" jhiTranslate="ebwebApp.eInvoice.InvoiceDate">Ngày HĐ</th>
                            <th scope="col" jhiTranslate="ebwebApp.eInvoice.AccountingObjectCode">Khách hàng</th>
                            <th scope="col" jhiTranslate="ebwebApp.eInvoice.TotalAmountOriginal">Tỏng tiền</th>
                            <th scope="col" jhiTranslate="ebwebApp.eInvoice.StatusConverted">TT chuyển đổi HĐ</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr *ngFor="let eIvoice of eInvoices ;let i = index; trackBy: trackId;"
                            [class.selected]="eIvoice === selectedRow"
                            (click)="onSelect(eIvoice)"
                            (dblclick)="doubleClickRow(eIvoice.id)">
                            <td class="text-center check">
                                <div class="custom-control custom-checkbox">
                                    <input type="checkbox" class="custom-control-input" name="{{'checkbox' + i}}"
                                           id="{{'checkbox' + i}}" [(ngModel)]="eIvoice.checked" (click)="check(eIvoice)">
                                    <label class="custom-control-label" for="{{'checkbox' + i}}"></label>
                                </div>
                            </td>
                            <td class="jsgrid-cell jsgrid-align-center" style="width: 150px">{{eIvoice.invoiceTemplate}}</td>
                            <td class="jsgrid-cell jsgrid-align-left" style="width: 150px">{{eIvoice.invoiceSeries}}</td>
                            <td class="jsgrid-cell jsgrid-align-center" style="width: 150px">{{eIvoice.invoiceNo}}</td>
                            <td class="jsgrid-cell jsgrid-align-center">{{eIvoice.invoiceDate| date:'dd/MM/yyyy'}}</td>
                            <td class="jsgrid-cell jsgrid-align-left total" >{{eIvoice.accountingObjectName}}</td>
                            <td class="jsgrid-cell jsgrid-align-right total"
                                style="width: 150px" class="cell-Table"><input type="number" class="input-Cell myreadonlytrue"
                                                            name="{{'totalAmount'+i}}"
                                                            ebCurrencyMask
                                                            readonly
                                                            [systemOptions]="currentAccount?.systemOption"
                                                            [type] = "7"
                                                            [(ngModel)]="eIvoice.totalAmount - eIvoice.totalDiscountAmount + eIvoice.totalVATAmount"
                            ></td>
                            <td class="text-center check">
                                <div class="custom-control custom-checkbox">
                                    <input [disabled]="true" type="checkbox" class="custom-control-input" name="{{'statusConverted' + i}}"
                                           id="{{'statusConverted' + i}}" [(ngModel)]="eIvoice.statusConverted">
                                    <label class="custom-control-label" for="{{'statusConverted' + i}}"></label>
                                </div>
                            </td>
                        </tr>
                        <tr *ngFor="let l of newArr(9 - eInvoices?.length)">
                            <td class="jsgrid-cell jsgrid-align-right">&nbsp;</td>
                            <td class="jsgrid-cell jsgrid-align-right">&nbsp;</td>
                            <td class="jsgrid-cell jsgrid-align-right">&nbsp;</td>
                            <td class="jsgrid-cell jsgrid-align-right">&nbsp;</td>
                            <td class="jsgrid-cell jsgrid-align-right">&nbsp;</td>
                            <td class="jsgrid-cell jsgrid-align-right">&nbsp;</td>
                            <td class="jsgrid-cell jsgrid-align-right">&nbsp;</td>
                            <td class="jsgrid-cell jsgrid-align-right">&nbsp;</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>

        </div>
        <!--        phân trang-->
        <div *ngIf="eInvoices && eInvoices?.length"
             style="padding-right: 16px;">
            <div class="row" style="height: 32px">
                <div class="col-md-4">
                    <p style="padding-right: 5px;">
                        <span jhiTranslate="ebwebApp.saBill.totalAmountTt"></span>:
                        <input type="text" class="input-Cell-total" disabled
                               [ngModel]="eInvoices[0]?.total"
                               ebCurrencyMask [systemOptions]="currentAccount?.systemOption" [type]="7"
                               [textAlign]="'left'">
                    </p>
                </div>
                <div class="col-md-8">
                    <div class="row justify-content-end" style="height:32px">
                        <div class="col-lg-5">
                            <div class="form-group row justify-content-end">
                                <label class="col-sm-9 col-form-label" for="itemsPerPage"
                                       style="padding-right: 0px;text-align: right;"><span
                                    jhiTranslate="ebwebApp.eInvoice.SelectAndTotalItems"
                                    translateValues="{select: '{{newList?.length}}',
                                    totalItem:'{{totalItems}}'}"></span></label>
                                <div class="col-sm-3 pd-l-0" style="padding-right: 5px;padding-left: 5px;">
                                    <select class="form-control form-control-sm" name="itemsPerPage"
                                            id="itemsPerPage"
                                            style="background-color: #f5f7fa;"
                                            [(ngModel)]="itemsPerPage"
                                            (ngModelChange)="selectedItemPerPage()"
                                    >
                                        <option [value]="10">10</option>
                                        <option [value]="20">20</option>
                                        <option [value]="30">30</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="justify-content-end">
                            <ngb-pagination [size]="'sm'" [collectionSize]="totalItems" [(page)]="page" [pageSize]="itemsPerPage"
                                            [maxSize]="5" [rotate]="true" [boundaryLinks]="true"
                                            (pageChange)="loadPage(page)"></ngb-pagination>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--        end of phan trang-->
        <div>
            <ngb-tabset class="tool-navbar">
                <ngb-tab>
                    <ng-template ngbTabTitle><span jhiTranslate="ebwebApp.sAOrder.home.detail">Chi tiết</span>
                    </ng-template>
                    <ng-template ngbTabContent>
                        <div class="tab-content">
                            <div class="frm-main frm-padding tab-pane fade in active show" id="home-detail"
                                 style="background: #cbdcf0">
                                <div id="table-scroll-detail" class="table-scroll">
                                    <table id="main-table-detail" class="main-table">
                                        <thead>
                                        <tr>
                                            <th scope="col" jhiTranslate="ebwebApp.saBill.materialGoodsID">Mã hàng</th>
                                            <th scope="col" jhiTranslate="ebwebApp.saBill.materialGoodsName">Tên hàng</th>
                                            <th scope="col" jhiTranslate="ebwebApp.saBill.unit">Đơn vị tính</th>
                                            <th scope="col" jhiTranslate="ebwebApp.saBill.quantity">Số lượng</th>
                                            <th scope="col" jhiTranslate="ebwebApp.saBill.unitPriceOriginal">Đơn giá</th>
                                            <th scope="col" jhiTranslate="ebwebApp.saBill.unitPrice" [hidden]="selectedRow?.currencyID === currencyCode">Đơn giá QĐ</th>
                                            <th scope="col" jhiTranslate="ebwebApp.saBill.amountOriginal">Thành tiền</th>
                                            <th scope="col" jhiTranslate="ebwebApp.saBill.amount" [hidden]="selectedRow?.currencyID === currencyCode">Thành tiền QĐ</th>
                                            <th scope="col" jhiTranslate="ebwebApp.saBill.discountRate">Tỷ lệ CK</th>
                                            <th scope="col" jhiTranslate="ebwebApp.saBill.discountAmountOriginal">Tiền CK</th>
                                            <th scope="col" jhiTranslate="ebwebApp.saBill.discountAmount" [hidden]="selectedRow?.currencyID === currencyCode">Tiền CK QĐ</th>
                                            <th scope="col" jhiTranslate="ebwebApp.saBill.vatRate">% thuế GTGT</th>
                                            <th scope="col" jhiTranslate="ebwebApp.saBill.vatAmountOriginal">Tiền thuế GTGT</th>
                                            <th scope="col" jhiTranslate="ebwebApp.saBill.vatAmount" [hidden]="selectedRow?.currencyID === currencyCode">Tiền thuế GTGT QĐ</th>
                                        </tr>
                                        </thead>
                                        <tbody>

                                        <tr *ngFor="let detail of eInvoiceDetails; let i = index;">
                                            <td>{{detail.materialGoodsCode}}</td>
                                            <td>{{detail.description}}</td>
                                            <td>{{detail.unitName}}</td>
                                            <td class="jsgrid-align-right">
                                                <input type="number" class="input-Cell" [(ngModel)]="detail.quantity"
                                                       readonly
                                                       ebCurrencyMask
                                                       [type]="3"
                                                       [systemOptions]="currentAccount?.systemOption">
                                            </td>
                                            <td class="jsgrid-align-right">
                                                <input type="number" class="input-Cell myreadonlytrue"
                                                       name="{{'unitPriceOriginalDetail'+i}}"
                                                       ebCurrencyMask
                                                       readonly
                                                       [systemOptions]="currentAccount?.systemOption"
                                                       [type] = "getUnitPriceOriginalType()"
                                                       [(ngModel)]="detail.unitPriceOriginal"
                                                >
                                            </td>
                                            <td class="jsgrid-align-right" [hidden]="selectedRow?.currencyID === currencyCode">
                                                <input type="number" class="input-Cell myreadonlytrue"
                                                       name="{{'unitPriceDetail'+i}}"
                                                       ebCurrencyMask
                                                       readonly
                                                       [systemOptions]="currentAccount?.systemOption"
                                                       [type] = "1"
                                                       [(ngModel)]="detail.unitPrice"
                                                >
                                            </td>
                                            <td class="jsgrid-align-right">
                                                <input type="number" class="input-Cell myreadonlytrue"
                                                       name="{{'amountOriginalDetail'+i}}"
                                                       ebCurrencyMask
                                                       readonly
                                                       [systemOptions]="currentAccount?.systemOption"
                                                       [type] = "getAmountOriginalType()"
                                                       [(ngModel)]="detail.amountOriginal"
                                                >
                                            </td>
                                            <td class="jsgrid-align-right" [hidden]="selectedRow?.currencyID === currencyCode">
                                                <input type="number" class="input-Cell myreadonlytrue"
                                                       name="{{'amountDetail'+i}}"
                                                       ebCurrencyMask
                                                       readonly
                                                       [systemOptions]="currentAccount?.systemOption"
                                                       [type] = "7"
                                                       [(ngModel)]="detail.amount"
                                                >
                                            </td>
                                            <td class="jsgrid-align-right">
                                                <input type="number" class="input-Cell myreadonlytrue"
                                                       name="{{'discountRateDetail'+i}}"
                                                       ebCurrencyMask
                                                       readonly
                                                       [systemOptions]="currentAccount?.systemOption"
                                                       [type] = "5"
                                                       [(ngModel)]="detail.discountRate"
                                                >
                                            </td>
                                            <td class="jsgrid-align-right">
                                                <input type="number" class="input-Cell myreadonlytrue"
                                                       name="{{'discountAmountOriginalDetail'+i}}"
                                                       ebCurrencyMask
                                                       readonly
                                                       [systemOptions]="currentAccount?.systemOption"
                                                       [type] = "getAmountOriginalType()"
                                                       [(ngModel)]="detail.discountAmountOriginal"
                                                >
                                            </td>
                                            <td class="jsgrid-align-right" [hidden]="selectedRow?.currencyID === currencyCode">
                                                <input type="number" class="input-Cell myreadonlytrue"
                                                       name="{{'discountAmountDetail'+i}}"
                                                       ebCurrencyMask
                                                       readonly
                                                       [systemOptions]="currentAccount?.systemOption"
                                                       [type] = "7"
                                                       [(ngModel)]="detail.discountAmount"
                                                >
                                            </td>
                                            <td class="jsgrid-align-right">
                                                {{getVATRate(detail.vATRate)}}
                                            </td>
                                            <td class="jsgrid-align-right">
                                                <input type="number" class="input-Cell myreadonlytrue"
                                                       name="{{'vATAmountOriginalDetail'+i}}"
                                                       ebCurrencyMask
                                                       readonly
                                                       [systemOptions]="currentAccount?.systemOption"
                                                       [type] = "getAmountOriginalType()"
                                                       [(ngModel)]="detail.vATAmountOriginal"
                                                >
                                            </td>
                                            <td class="jsgrid-align-right" [hidden]="selectedRow?.currencyID === currencyCode">
                                                <input type="number" class="input-Cell myreadonlytrue"
                                                       name="{{'vATAmountDetail'+i}}"
                                                       ebCurrencyMask
                                                       readonly
                                                       [systemOptions]="currentAccount?.systemOption"
                                                       [type] = "7"
                                                       [(ngModel)]="detail.vATAmount"
                                                >
                                            </td>
                                        </tr>
                                        <tr *ngFor="let l of newArr(9 - eInvoiceDetails?.length)">
                                            <td class="jsgrid-cell jsgrid-align-right">&nbsp;</td>
                                            <td class="jsgrid-cell jsgrid-align-right">&nbsp;</td>
                                            <td class="jsgrid-cell jsgrid-align-right">&nbsp;</td>
                                            <td class="jsgrid-cell jsgrid-align-right">&nbsp;</td>
                                            <td class="jsgrid-cell jsgrid-align-right">&nbsp;</td>
                                            <td class="jsgrid-cell jsgrid-align-right">&nbsp;</td>
                                            <td class="jsgrid-cell jsgrid-align-right">&nbsp;</td>
                                            <td class="jsgrid-cell jsgrid-align-right">&nbsp;</td>
                                            <td class="jsgrid-cell jsgrid-align-right">&nbsp;</td>
                                            <td class="jsgrid-cell jsgrid-align-right">&nbsp;</td>
                                            <td [hidden]="selectedRow?.currencyID === currencyCode" class="jsgrid-cell jsgrid-align-right">&nbsp;</td>
                                            <td [hidden]="selectedRow?.currencyID === currencyCode" class="jsgrid-cell jsgrid-align-right">&nbsp;</td>
                                            <td [hidden]="selectedRow?.currencyID === currencyCode" class="jsgrid-cell jsgrid-align-right">&nbsp;</td>
                                            <td [hidden]="selectedRow?.currencyID === currencyCode" class="jsgrid-cell jsgrid-align-right">&nbsp;</td>
                                        </tr>
                                        </tbody>
                                        <tfoot>
                                        <tr>
                                            <td class="cell-Table color-tfoot jsgrid-align-left" colspan="3"><input type="text" readonly
                                                                                                                    class="color-tfoot input-Cell"
                                                                                                                    value="{{'ebwebApp.purchaseOrder.countLine'| translate}} : {{eInvoiceDetails?.length}}"></td>
                                            <td class="cell-Table color-tfoot jsgrid-align-right">
                                                <input type="number" class="input-Cell" [ngModel]="sum('quantity')"
                                                       ebCurrencyMask
                                                       [type] = "3"
                                                       [systemOptions]="currentAccount?.systemOption">
                                            </td>
                                            <td class="cell-Table color-tfoot jsgrid-align-right">
                                                <input type="number" class="input-Cell" [ngModel]="sum('unitPriceOriginal')"
                                                       ebCurrencyMask
                                                       [type] = "getUnitPriceOriginalType()"
                                                       [systemOptions]="currentAccount?.systemOption">
                                            </td>
                                            <td class="cell-Table color-tfoot jsgrid-align-right" [hidden]="selectedRow?.currencyID === currencyCode">
                                                <input type="number" class="input-Cell" [ngModel]="sum('unitPrice')"
                                                       ebCurrencyMask
                                                       [type] = "1"
                                                       [systemOptions]="currentAccount?.systemOption">
                                            </td>
                                            <td class="cell-Table color-tfoot jsgrid-align-right">
                                                <input type="number" class="input-Cell" [ngModel]="sum('amountOriginal')"
                                                       ebCurrencyMask
                                                       [type] = "getAmountOriginalType()"
                                                       [systemOptions]="currentAccount?.systemOption">
                                            </td>
                                            <td class="cell-Table color-tfoot jsgrid-align-right" [hidden]="selectedRow?.currencyID === currencyCode">
                                                <input type="number" class="input-Cell" [ngModel]="sum('amount')"
                                                       ebCurrencyMask
                                                       [type] = "7"
                                                       [systemOptions]="currentAccount?.systemOption">
                                            </td>
                                            <td class="cell-Table color-tfoot jsgrid-align-right"></td>
                                            <td class="cell-Table color-tfoot jsgrid-align-right">
                                                <input type="number" class="input-Cell" [ngModel]="sum('discountAmountOriginal')"
                                                       ebCurrencyMask
                                                       [type] = "getAmountOriginalType()"
                                                       [systemOptions]="currentAccount?.systemOption">
                                            </td>
                                            <td class="cell-Table color-tfoot jsgrid-align-right" [hidden]="selectedRow?.currencyID === currencyCode">
                                                <input type="number" class="input-Cell" [ngModel]="sum('discountAmount')"
                                                       ebCurrencyMask
                                                       [type] = "7"
                                                       [systemOptions]="currentAccount?.systemOption">
                                            </td>
                                            <td class="cell-Table color-tfoot jsgrid-align-right"></td>
                                            <td class="cell-Table color-tfoot jsgrid-align-right">
                                                <input type="number" class="input-Cell" [ngModel]="sum('vATAmountOriginal')"
                                                       ebCurrencyMask
                                                       [type] = "getAmountOriginalType()"
                                                       [systemOptions]="currentAccount?.systemOption">
                                            </td>
                                            <td class="cell-Table color-tfoot jsgrid-align-right" [hidden]="selectedRow?.currencyID === currencyCode">
                                                <input type="number" class="input-Cell" [ngModel]="sum('vATAmount')"
                                                       ebCurrencyMask
                                                       [type] = "7"
                                                       [systemOptions]="currentAccount?.systemOption">
                                            </td>
                                        </tr>
                                        </tfoot>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </ng-template>
                </ngb-tab>
            </ngb-tabset>
        </div>
    </div>
</div>

<ng-template #content let-modal>
    <div class="modal-body">
        <form>
            <div class="form-group">
                <label>Hóa đơn chỉ được chuyển đổi chứng minh nguồn gốc một lần, bạn có muốn chuyển đổi hóa đơn ?</label>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-outline-success" (click)="continue()"> Có</button>
        <button type="button" class="btn btn-outline-dark" (click)="closeContent()"> Không</button>
    </div>
</ng-template>

<ng-template #contentSIV let-modal>
    <div class="modal-body">
        <div class="form-group">
            <label for="nameDocument">Tên người chuyển đổi:</label>
            <input [(ngModel)]="nameUser" autocomplete="false" class="form-control" id="nameDocument" name="nameDocument">
        </div>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-outline-success" (click)="continueSDS()"> Đồng ý</button>
        <button type="button" class="btn btn-outline-dark" (click)="closeContentSIV()"> Đóng</button>
    </div>
</ng-template>
